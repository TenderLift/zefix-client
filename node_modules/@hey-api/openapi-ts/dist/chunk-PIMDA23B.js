import {createRequire}from'module';import he from'node:fs';import F from'node:path';import xt from'ansi-colors';import {fileURLToPath}from'node:url';import b from'typescript';import {EOL}from'os';import {createRequire as createRequire$1}from'node:module';import*as On from'semver';import {loadConfig}from'c12';import {$RefParser,getResolvedInput,sendRequest}from'@hey-api/json-schema-ref-parser';const require = createRequire(import.meta.url);
var zc=Object.create;var Wo=Object.defineProperty;var Kc=Object.getOwnPropertyDescriptor;var Wc=Object.getOwnPropertyNames;var Hc=Object.getPrototypeOf,Zc=Object.prototype.hasOwnProperty;var Ho=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Ud=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Uc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Wc(t))!Zc.call(e,o)&&o!==r&&Wo(e,o,{get:()=>t[o],enumerable:!(n=Kc(t,o))||n.enumerable});return e};var Qd=(e,t,r)=>(r=e!=null?zc(Hc(e)):{},Uc(t||!e||!e.__esModule?Wo(r,"default",{value:e,enumerable:true}):r,e));var Xc=fileURLToPath(import.meta.url),Ws=F.dirname(Xc),Hs=()=>{let e=Ws;for(;e!==F.dirname(e);){let r=he.readdirSync(e).filter(n=>n==="package.json");if(r[0]){let n=F.join(e,r[0]);return JSON.parse(he.readFileSync(n,{encoding:"utf8"}))}e=F.dirname(e);}},ty=e=>{if(e==="off")return null;if(e){let r=F.isAbsolute(e)?e:F.resolve(Ws,e);return he.existsSync(r)?r:null}let t=Ws;for(;t!==F.dirname(t);){let n=he.readdirSync(t).filter(o=>o.startsWith("tsconfig")&&o.endsWith(".json")).sort(o=>o==="tsconfig.json"?-1:1);if(n[0])return F.join(t,n[0]);t=F.dirname(t);}return null},ry=e=>{if(!e)return null;let t=b.readConfigFile(e,b.sys.readFile);if(t.error)throw new Error(`Couldn't read tsconfig from path: ${e}`);return b.parseJsonConfigFileContent(t.config,b.sys,F.dirname(e))};var ot=e=>{he.existsSync(e)||he.mkdirSync(e,{recursive:true});},oy=e=>{he.existsSync(e)&&he.rmSync(e,{force:true,recursive:true});},nr=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var Lt=class extends Error{},sr=class extends Error{args;event;pluginName;constructor({args:t,error:r,event:n,name:o,pluginName:a}){let i=r instanceof Error?r.message:"Unknown error";super(i),this.args=t,this.cause=r.cause,this.event=n,this.name=o||r.name,this.pluginName=a,this.stack=r.stack;}},ly=(e,t)=>{if(e instanceof Lt)return;let r=`openapi-ts-error-${Date.now()}.log`,n=F.resolve(process.cwd(),t);ot(n);let o=F.resolve(n,r),a=`[${new Date().toISOString()}] `;e instanceof sr&&(a+=`${e.name} during event "${e.event}"
`,e.pluginName&&(a+=`Plugin: ${e.pluginName}
`),a+=`Arguments: ${JSON.stringify(e.args,null,2)}

`);let i=e instanceof Error?e.message:String(e),p=e instanceof Error?e.stack:void 0;return a+=`Error: ${i}
`,p&&(a+=`Stack:
${p}
`),he.writeFileSync(o,a),o},uy=async e=>{let t="";e instanceof sr&&(e.pluginName&&(t+=`**Plugin**: \`${e.pluginName}\`
`),t+=`**Event**: \`${e.event}\`
`,t+=`**Arguments**:
\`\`\`ts
${JSON.stringify(e.args,null,2)}
\`\`\`

`);let r=e instanceof Error?e.message:String(e),n=e instanceof Error?e.stack:void 0;t+=`**Error**: \`${r}\`
`,n&&(t+=`
**Stack Trace**:
\`\`\`
${n}
\`\`\``);let o=new URLSearchParams({body:t,labels:"bug \u{1F525}",title:"Crash Report"}),a=Hs(),i;if(a&&typeof a=="object"&&"bugs"in a&&a.bugs&&typeof a.bugs=="object"&&"url"in a.bugs&&typeof a.bugs.url=="string"&&(i=a.bugs.url,i&&!i.endsWith("/")&&(i+="/")),i){let p=`${i}new?${o.toString()}`,c=(await import('open')).default;await c(p);}},dy=({error:e,logPath:t})=>{let r=Hs(),n;r&&typeof r=="object"&&"name"in r&&typeof r.name=="string"&&(n=r.name),process.stderr.write(`
\u{1F6D1} ${xt.cyan(n||"")} ${xt.red("encountered an error.")}

${xt.red("\u2757\uFE0F Error:")} ${xt.white(typeof e=="string"?e:e instanceof Error?e.message:"Unknown error")}`+(t?`

${xt.cyan("\u{1F4C4} Crash log saved to:")} ${xt.gray(t)}`:"")+`
`);},yy=async({error:e,isInteractive:t})=>!t||e instanceof Lt?false:new Promise(r=>{process.stdout.write(`${xt.yellow(`
\u{1F4E2} Open a GitHub issue with crash details?`)} ${xt.yellow("(y/N):")}`),process.stdin.setEncoding("utf8"),process.stdin.once("data",n=>{r(n.trim().toLowerCase()==="y");});});var Uo=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var Jc=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)&&typeof e!="function",or=(e,t)=>{for(let[r,n]of Object.entries(t))n!==void 0&&n!==""&&(e[r]=n);return e},Dt=({defaultValue:e,mappers:t,value:r})=>{let n={...e};switch(typeof r){case "boolean":if(t&&"boolean"in t){let o=t.boolean;n=or(n,o(r));}break;case "function":if(t&&"function"in t){let o=t.function;n=or(n,o(r));}break;case "number":if(t&&"number"in t){let o=t.number;n=or(n,o(r));}break;case "string":if(t&&"string"in t){let o=t.string;n=or(n,o(r));}break;case "object":if(Jc(r))if(t&&"object"in t&&typeof t.object=="function"){let o=t.object;n=or(n,o(r,e));}else n=or(n,r);break}return n};var Yc=["after","before","cursor","offset","page","start"],Qo=e=>{let t={...e.parser,pagination:{keywords:Yc},transforms:{enums:{case:"PascalCase",enabled:false,mode:"root",name:"{{name}}Enum"},readWrite:{enabled:true,requests:{case:"preserve",name:"{{name}}Writable"},responses:{case:"preserve",name:"{{name}}"}}},validate_EXPERIMENTAL:false};return e.parser&&(e.parser.pagination?.keywords&&(t.pagination.keywords=e.parser.pagination.keywords),e.parser.transforms&&(e.parser.transforms.enums!==void 0&&(t.transforms.enums=Dt({defaultValue:{...t.transforms.enums,enabled:!!e.parser.transforms.enums},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.parser.transforms.enums})),e.parser.transforms.readWrite!==void 0&&(t.transforms.readWrite=Dt({defaultValue:{...t.transforms.readWrite,enabled:!!e.parser.transforms.readWrite},mappers:{boolean:r=>({enabled:r}),object:r=>({...r,requests:Dt({defaultValue:t.transforms.readWrite.requests,mappers:{function:n=>({name:n}),string:n=>({name:n})},value:r.requests}),responses:Dt({defaultValue:t.transforms.readWrite.responses,mappers:{function:n=>({name:n}),string:n=>({name:n})},value:r.responses})})},value:e.parser.transforms.readWrite}))),e.parser.validate_EXPERIMENTAL&&(t.validate_EXPERIMENTAL=e.parser.validate_EXPERIMENTAL===true?"warn":e.parser.validate_EXPERIMENTAL)),t};var A=e=>t=>({...e,config:{...e.config,...t}}),bt={boolean:e=>({enabled:e}),function:e=>({name:e}),string:e=>({name:e})};var Ot={baseUrl:true,bundle:true,exportFromIndex:false},St={dependencies:["@hey-api/typescript"],output:"client",tags:["client"]};var ir=/^[^$_\p{ID_Start}]+/u,re=/^-?\d+(\.\d+)?$/,Xo=/^(document|history|location|navigator|window)$/g,Go=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,le=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,Jo=/^(global|process|Buffer)$/g,Yo=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,Ne=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var Oe=e=>(e||e==="")&&(Ne.lastIndex=0,!Ne.test(e))?`'${e}'`:e,ar=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,K=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>EOL+r.trim());var Fe="client",Ce=e=>{let t=C(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},C=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?.tags?.includes("client"))return r}return {config:{name:""},name:""}};var ei,R=()=>{let e=ei,t=C(e);return e.client=t,e},ti=e=>(ei=e,R()),U=e=>C(e).name.startsWith("legacy/"),Vt=e=>{if(U(e))return e.name};var tm=b.createPrinter({newLine:b.NewLineKind.LineFeed,removeComments:false}),rm=e=>b.createSourceFile("",e,b.ScriptTarget.ESNext,false,b.ScriptKind.TS),nm=rm(""),sm=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function Le({node:e,unescape:t=false}){let r=tm.printNode(b.EmitHint.Unspecified,e,nm);if(!t)return r;try{return sm(r)}catch{return R().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}var I=({text:e})=>b.factory.createIdentifier(e),ri=()=>b.factory.createThis(),Y=({keyword:e})=>{let t=Zs({keyword:e});return b.factory.createModifier(t)},ni=({initializer:e,modifier:t,name:r,type:n})=>b.factory.createPropertyDeclaration(t?[Y({keyword:t})]:void 0,r,void 0,n,e),ye={boolean:e=>e?b.factory.createTrue():b.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let n=I({text:r});if(e){let o=I({text:e});return b.factory.createExportSpecifier(t,n,o)}return b.factory.createExportSpecifier(t,void 0,n)},import:({alias:e,asType:t=false,name:r})=>{let n=I({text:r});if(e){let o=I({text:e});return b.factory.createImportSpecifier(t,n,o)}return b.factory.createImportSpecifier(t,void 0,n)},number:e=>e<0?b.factory.createPrefixUnaryExpression(b.SyntaxKind.MinusToken,b.factory.createNumericLiteral(Math.abs(e))):b.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=ar(r));let n=r.includes("'")&&r.includes('"'),o=r.includes(`
`),a=r.startsWith("`"),i=r.startsWith("\\`")&&r.endsWith("\\`");return (o||n||a)&&!i&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?I({text:r}):Bt({text:r})}},_t=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",Tt=e=>e!==void 0,om=({commentObject:e,node:t})=>{let r=e.lines.filter(i=>!!i||i==="");if(!r.length)return;if(!e.jsdoc){for(let i of r)b.addSyntheticLeadingComment(t,b.SyntaxKind.SingleLineCommentTrivia,` ${i}`,true);return}let n=r.map((i,p)=>{let c=i;return p!==r.length&&(c=`${c}
`),b.factory.createJSDocText(c)}),o=b.factory.createJSDocComment(b.factory.createNodeArray(n),void 0),a=Le({node:o,unescape:true}).replace("/*","").replace("*  */","");b.addSyntheticLeadingComment(t,b.SyntaxKind.MultiLineCommentTrivia,a,true);},ie=({comments:e=[],node:t})=>{let r=!!e.find(o=>typeof o=="object"&&o),n=e;r||(n=[{jsdoc:true,lines:e}]);for(let o of n)om({commentObject:o,node:t});};var ae=(e,t)=>b.isTypeNode(e)?e:typeof e=="number"?b.factory.createLiteralTypeNode(ye.number(e)):Se({typeArguments:t?.map(r=>ae(r)),typeName:b.isIdentifier(e)?e.text:e}),Us=({expression:e,name:t})=>b.factory.createPropertyAccessChain(e,b.factory.createToken(b.SyntaxKind.QuestionDotToken),t),Ve=({expression:e,isOptional:t,name:r})=>{let n=typeof e=="string"?I({text:e}):e;if(t&&typeof r!="number")return Us({expression:n,name:r});if(typeof r=="string"){if(Ne.lastIndex=0,!Ne.test(r)){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let a=I({text:r});return b.factory.createElementAccessExpression(n,a)}let o=I({text:r});return b.factory.createPropertyAccessExpression(n,o)}if(typeof r=="number"){let o=b.factory.createNumericLiteral(r);return b.factory.createElementAccessExpression(n,o)}return b.factory.createPropertyAccessExpression(n,r)},Qs=()=>b.factory.createNull(),De=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:n,value:o})=>{if(o===null)return Qs();if(Array.isArray(o))return Xs({elements:o});if(typeof o=="object")return dn({identifiers:e,obj:o,shorthand:r});if(typeof o=="number")return ye.number(o);if(typeof o=="boolean")return ye.boolean(o);if(typeof o=="string"){if(t){let a=o.split(".");return Ve({expression:a[0],name:a[1]})}return ye.string(o,n)}},$r=e=>e.map(t=>{if("destructure"in t)return pr({name:b.factory.createObjectBindingPattern(t.destructure.map(n=>"destructure"in n?void 0:b.factory.createBindingElement(void 0,void 0,I({text:n.name}),void 0)).filter(Boolean)),type:t.type!==void 0?ae(t.type):void 0});let r=t.accessLevel?[Y({keyword:t.accessLevel})]:[];return t.isReadOnly&&r.push(Y({keyword:"readonly"})),pr({initializer:t.default!==void 0?De({value:t.default}):void 0,modifiers:r,name:I({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?ae(t.type):void 0})}),Zs=({keyword:e})=>{switch(e){case "any":return b.SyntaxKind.AnyKeyword;case "async":return b.SyntaxKind.AsyncKeyword;case "boolean":return b.SyntaxKind.BooleanKeyword;case "export":return b.SyntaxKind.ExportKeyword;case "never":return b.SyntaxKind.NeverKeyword;case "number":return b.SyntaxKind.NumberKeyword;case "private":return b.SyntaxKind.PrivateKeyword;case "protected":return b.SyntaxKind.ProtectedKeyword;case "public":return b.SyntaxKind.PublicKeyword;case "readonly":return b.SyntaxKind.ReadonlyKeyword;case "static":return b.SyntaxKind.StaticKeyword;case "string":return b.SyntaxKind.StringKeyword;case "undefined":return b.SyntaxKind.UndefinedKeyword;case "unknown":return b.SyntaxKind.UnknownKeyword;case "void":return b.SyntaxKind.VoidKeyword;default:throw new Error(`unsupported syntax kind keyword "${e}"`)}},zt=({keyword:e})=>{let t=Zs({keyword:e});return b.factory.createKeywordTypeNode(t)},Mr=e=>e.map(t=>b.isTypeParameterDeclaration(t)?t:Fr({constraint:t.extends?typeof t.extends=="string"?zt({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?_t(t.default)?t.default:b.factory.createLiteralTypeNode(t.default?b.factory.createTrue():b.factory.createFalse()):void 0,name:t.name})),si=({operator:e,type:t})=>{let r=e==="keyof"?b.SyntaxKind.KeyOfKeyword:e==="readonly"?b.SyntaxKind.ReadonlyKeyword:b.SyntaxKind.UniqueKeyword;return b.factory.createTypeOperatorNode(r,t)},Fr=({constraint:e,defaultType:t,modifiers:r,name:n})=>b.factory.createTypeParameterDeclaration(r,n,e,t),ln=({members:e,nameType:t,questionToken:r,readonlyToken:n,type:o,typeParameter:a})=>b.factory.createMappedTypeNode(n,a,t,r,o,e),oi=({literal:e})=>b.factory.createLiteralTypeNode(e),un=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:o,statements:a=[],types:i=[]})=>{let p=b.factory.createArrowFunction(e?[Y({keyword:"async"})]:void 0,i?Mr(i):void 0,$r(n),o?ae(o):void 0,void 0,Array.isArray(a)?ge({multiLine:r,statements:a}):a);return ie({comments:t,node:p}),p},ii=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:o,statements:a=[],types:i=[]})=>{let p=b.factory.createFunctionExpression(e?[Y({keyword:"async"})]:void 0,void 0,void 0,i?Mr(i):void 0,$r(n),o?ae(o):void 0,ge({multiLine:r,statements:a}));return ie({comments:t,node:p}),p},Xs=({elements:e,multiLine:t=false})=>b.factory.createArrayLiteralExpression(e.map(n=>_t(n)?n:De({value:n})).filter(Tt),t||!Array.isArray(e[0])&&typeof e[0]=="object"),ai=({expression:e})=>b.factory.createAwaitExpression(e),pi=({parameters:e=[],returnType:t,typeParameters:r})=>b.factory.createFunctionTypeNode(r,e,t),dn=({comments:e,identifiers:t=[],multiLine:r=true,obj:n,shorthand:o,unescape:a=false})=>{let i=Array.isArray(n)?n.map(c=>{let m=false;if("key"in c){let{key:l}=c;m=l===c.value,(l.match(/^[0-9]/)&&l.match(/\D+/g)||l.match(/\W/g)||l==="")&&!l.startsWith("'")&&!l.endsWith("'")&&(c.key=`'${l}'`);}let f;if("spread"in c){let l=_t(c.spread)?c.spread:I({text:c.spread});f=b.factory.createSpreadAssignment(c.assertion?Dr({expression:l,type:typeof c.assertion=="string"?zt({keyword:c.assertion}):c.assertion}):l);}else if(c.shorthand||o&&m)f=b.factory.createShorthandPropertyAssignment(c.value);else {let l=_t(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?dn({multiLine:r,obj:c.value,shorthand:o,unescape:a}):De({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:o,unescape:a,value:c.value});if(!l)return;t.includes(c.key)&&!b.isObjectLiteralExpression(l)&&(l=I({text:c.value})),f=fn({initializer:l,name:c.key});}return ie({comments:c.comments,node:f}),f}).filter(Tt):Object.entries(n).map(([c,m])=>{let f=De({identifiers:t.includes(c)?Object.keys(m):[],shorthand:o,unescape:a,value:m});if(!f)return;t.includes(c)&&!b.isObjectLiteralExpression(f)&&(f=I({text:m}));let l=c===m;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),o&&l?b.factory.createShorthandPropertyAssignment(m):fn({initializer:f,name:c})}).filter(Tt),p=b.factory.createObjectLiteralExpression(i,r);return ie({comments:e,node:p}),p},ci=({comments:e={},leadingComment:t,name:r,obj:n})=>{let o=Array.isArray(n)?n.map(i=>{let p=am({initializer:De({value:i.value}),name:i.key});return ie({comments:i.comments,node:p}),p}):Object.entries(n).map(([i,p])=>{let c=b.factory.createEnumMember(i,De({unescape:true,value:p}));return ie({comments:e[i],node:c}),c}),a=b.factory.createEnumDeclaration([Y({keyword:"export"})],typeof r=="string"?I({text:r}):r,o);return ie({comments:t,node:a}),a},am=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.includes("'")?r=Bt({isSingleQuote:false,text:r}):r=Oe(r)),b.factory.createEnumMember(r,e)},mi=({name:e,statements:t})=>b.factory.createModuleDeclaration([Y({keyword:"export"})],I({text:e}),b.factory.createModuleBlock(t),b.NodeFlags.Namespace),fi=({indexType:e,objectType:t})=>b.factory.createIndexedAccessTypeNode(t,e),li=({name:e,returnType:t,statements:r})=>b.factory.createGetAccessorDeclaration(void 0,e,[],t?Se({typeName:t}):void 0,ge({statements:r})),Bt=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),b.factory.createStringLiteral(t,e)),ui=({condition:e,whenFalse:t,whenTrue:r})=>b.factory.createConditionalExpression(e,b.factory.createToken(b.SyntaxKind.QuestionToken),r,b.factory.createToken(b.SyntaxKind.ColonToken),t),di=({text:e})=>b.factory.createTypeOfExpression(typeof e=="string"?I({text:e}):e),yi=({comment:e,exportType:t,name:r,type:n,typeParameters:o=[]})=>{let a=b.factory.createTypeAliasDeclaration(t?[Y({keyword:"export"})]:void 0,typeof r=="string"?I({text:r}):r,Mr(o),ae(n));return ie({comments:e,node:a}),a},Se=({typeArguments:e,typeName:t})=>b.factory.createTypeReferenceNode(t,e),gi=({type:e})=>b.factory.createParenthesizedType(e),pr=({initializer:e,modifiers:t,name:r,required:n=true,type:o})=>b.factory.createParameterDeclaration(t,void 0,r,n?void 0:b.factory.createToken(b.SyntaxKind.QuestionToken),o,e),Lr=({argumentsArray:e,expression:t,typeArguments:r})=>b.factory.createNewExpression(t,r,e),hi=({awaitModifier:e,expression:t,initializer:r,statement:n})=>b.factory.createForOfStatement(e,r,t,n),xi=({left:e,right:t})=>b.factory.createAssignment(e,t),ge=({multiLine:e=true,statements:t})=>b.factory.createBlock(t,e),fn=({initializer:e,name:t})=>b.factory.createPropertyAssignment(t,e),bi=({flags:e=[],text:t})=>{let r=t.startsWith("/")&&t.endsWith("/")?t:`/${t}/`;return b.factory.createRegularExpressionLiteral(`${r}${e.join("")}`)},Dr=({expression:e,type:t})=>b.factory.createAsExpression(e,t),Oi=({value:e})=>{let t=[],r="";for(let o of e.slice(0).reverse())if(typeof o=="string")r=`${o}${r}`;else {let a=t.length?b.factory.createTemplateMiddle(r):b.factory.createTemplateTail(r),i=b.factory.createTemplateLiteralTypeSpan(o,a);t.push(i),r="";}return b.factory.createTemplateLiteralType(b.factory.createTemplateHead(r),t.reverse())};var Si=({module:e})=>b.factory.createExportDeclaration(void 0,false,void 0,ye.string(e)),_e=({functionName:e,parameters:t=[],types:r})=>{let n=typeof e=="string"?I({text:e}):e,o=t.filter(i=>i!==void 0).map(i=>typeof i=="string"?I({text:i}):i);return b.factory.createCallExpression(n,r,o)},Ti=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(c=>typeof c!="object"||!c.asType),o=r.map(c=>{let m=typeof c=="string"?{name:c}:c;return ye.export({alias:m.alias,asType:n&&m.asType,name:m.name})}),a=b.factory.createNamedExports(o),i=ye.string(t);return b.factory.createExportDeclaration(void 0,!n,a,i)},Ri=({assertion:e,comment:t,destructure:r,exportConst:n,expression:o,name:a,typeName:i})=>{let p=e?Dr({expression:o,type:typeof e=="string"?Se({typeName:e}):e}):o,c=typeof a=="string"?I({text:a}):a,m=b.factory.createVariableDeclaration(r?b.factory.createObjectBindingPattern([b.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,i?typeof i=="string"?Se({typeName:i}):i:void 0,p),f=b.factory.createVariableStatement(n?[Y({keyword:"export"})]:void 0,b.factory.createVariableDeclarationList([m],b.NodeFlags.Const));return ie({comments:t,node:f}),f},Ii=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(f=>typeof f!="object"||!f.asType),o,a=[];r.forEach(f=>{let l=typeof f=="string"?{name:f}:f;l.name==="*"&&l.alias?o=l:a.push(ye.import({alias:l.alias,asType:n&&l.asType,name:l.name}));});let i=o?b.factory.createNamespaceImport(I({text:o.alias})):b.factory.createNamedImports(a),p=b.factory.createImportClause(!n,void 0,i),c=ye.string(t);return b.factory.createImportDeclaration(void 0,p,c)};var Ai=({accessLevel:e,comment:t,multiLine:r=true,parameters:n=[],statements:o=[]})=>{let a=e?[Y({keyword:e})]:void 0,i=b.factory.createConstructorDeclaration(a,$r(n),ge({multiLine:r,statements:o}));return ie({comments:t,node:i}),i},Pi=({accessLevel:e,comment:t,isStatic:r=false,multiLine:n=true,name:o,parameters:a=[],returnType:i,statements:p=[],types:c=[]})=>{let m=e?[Y({keyword:e})]:[];r&&m.push(Y({keyword:"static"}));let f=b.factory.createMethodDeclaration(m,void 0,I({text:o}),void 0,c?Mr(c):void 0,$r(a),i?ae(i):void 0,ge({multiLine:n,statements:p}));return ie({comments:t,node:f}),f},Ei=({decorator:e,exportClass:t,extendedClasses:r,name:n,nodes:o})=>{let a=[];t&&a.push(Y({keyword:"export"})),e&&a.unshift(b.factory.createDecorator(_e({functionName:e.name,parameters:e.args.map(p=>De({value:p})).filter(Tt)})));let i=[];if(r)for(let p of r)i.push(b.factory.createHeritageClause(b.SyntaxKind.ExtendsKeyword,[b.factory.createExpressionWithTypeArguments(I({text:p}),void 0)]));return b.factory.createClassDeclaration(a,I({text:n}),void 0,i,o)};var Wt=({expression:e})=>b.factory.createExpressionStatement(e);var yn=({expression:e})=>b.factory.createReturnStatement(e),Ni=({args:e=[],name:t,types:r=[]})=>{let n=r.map(p=>Se({typeName:p})),o=e.map(p=>b.isExpression(p)?p:I({text:p})).filter(Tt),a=_e({functionName:t,parameters:o,types:n});return yn({expression:a})},Ci=({expression:e})=>yn({expression:typeof e=="string"?I({text:e}):e});var cr=e=>e.slice(1).reduce((t,r)=>(Ne.lastIndex=0,Ne.test(r)?Us({expression:t,name:r}):b.factory.createElementAccessChain(t,b.factory.createToken(b.SyntaxKind.QuestionDotToken),I({text:r}))),I({text:e[0]})),gn=e=>e.slice(1).reduce((t,r)=>Ve({expression:t,name:r}),I({text:e[0]})),ki=({expressions:e})=>e.reduce((r,n)=>Ve({expression:r,name:n})),hn=({left:e,operator:t="=",right:r})=>b.factory.createBinaryExpression(e,t==="="?b.SyntaxKind.EqualsToken:t==="==="?b.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?b.SyntaxKind.QuestionQuestionToken:b.SyntaxKind.InKeyword,typeof r=="string"?I({text:r}):r),mr=({elseStatement:e,expression:t,thenStatement:r})=>b.factory.createIfStatement(t,r,e),vi=({path:e})=>{let t=cr(e),r=gn(e),n=ge({statements:[Wt({expression:hn({left:r,right:Lr({argumentsArray:[r],expression:I({text:"Date"})})})})]});return mr({expression:t,thenStatement:n})},wi=({path:e,transformerName:t})=>{let r=cr(e),n=gn(e),o=ge({statements:[Wt({expression:_e({functionName:t,parameters:[n]})})]});return [mr({expression:r,thenStatement:o})]},qi=({path:e,transformerName:t})=>{let r=cr(e),n=gn(e);return mr({expression:_e({functionName:Ve({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:ge({statements:[Wt({expression:b.factory.createCallChain(Ve({expression:n,name:"forEach"}),void 0,void 0,[I({text:t})])})]})})},$i=({parameterName:e})=>{let t=I({text:"Date"});return Lr({argumentsArray:[I({text:e})],expression:t})},Mi=({path:e,transformExpression:t})=>{let r=cr(e),n=gn(e);return mr({expression:_e({functionName:Ve({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:ge({statements:[Wt({expression:hn({left:n,right:b.factory.createCallChain(Ve({expression:n,name:"map"}),void 0,void 0,[un({parameters:[{name:"item"}],statements:t})])})})]})})};var ym=Se({typeName:"null"}),fr=({isNullable:e,node:t})=>e?b.factory.createUnionTypeNode([t,ym]):t,Gs=({indexKey:e,indexProperty:t,isNullable:r,properties:n,useLegacyResolution:o})=>{let i=n.map(m=>{let f=m.isReadOnly?[Y({keyword:"readonly"})]:void 0,l=m.isRequired!==false?void 0:b.factory.createToken(b.SyntaxKind.QuestionToken),u=ae(m.type);let y=b.factory.createPropertySignature(f,o||typeof m.name=="string"&&m.name.match(Ne)||typeof m.name!="string"&&b.isPropertyName(m.name)?m.name:Bt({text:m.name}),l,u);return ie({comments:m.comment,node:y}),y}),p=false;if(t)if(!n.length&&e){let m=ln({questionToken:b.factory.createToken(b.SyntaxKind.QuestionToken),type:t.type??zt({keyword:"string"}),typeParameter:Fr({constraint:e,name:I({text:String(t.name)})})});i.push(m),p=true;}else {let m=t.isReadOnly?[Y({keyword:"readonly"})]:void 0,f=b.factory.createIndexSignature(m,[pr({name:I({text:String(t.name)}),type:zt({keyword:"string"})})],ae(t.type));i.push(f);}let c=p?i[0]:b.factory.createTypeLiteralNode(i);return fr({isNullable:r,node:c})},Vr=({isNullable:e,types:t})=>{let r=t.map(o=>ae(o)),n=b.factory.createUnionTypeNode(r);return fr({isNullable:e,node:n})},Fi=({isNullable:e,types:t})=>{let r=t.map(o=>ae(o)),n=b.factory.createIntersectionTypeNode(r);return fr({isNullable:e,node:n})},Li=({isNullable:e=false,types:t})=>{let r=t.map(o=>ae(o)),n=b.factory.createTupleTypeNode(r);return fr({isNullable:e,node:n})},Di=(e,t,r=false,n=true)=>{let o=Vr({types:e}),a=Vr({types:t}),i=Gs({properties:[{name:`[key: ${Le({node:o,unescape:true})}]`,type:a}],useLegacyResolution:n});return fr({isNullable:r,node:i})},Vi=(e,t=false)=>{let r=Se({typeArguments:[Array.isArray(e)?Vr({types:e}):e],typeName:"Array"});return fr({isNullable:t,node:r})};var s={anonymousFunction:ii,arrayLiteralExpression:Xs,arrowFunction:un,asExpression:Dr,assignment:xi,awaitExpression:ai,binaryExpression:hn,block:ge,callExpression:_e,classDeclaration:Ei,conditionalExpression:ui,constVariable:Ri,constructorDeclaration:Ai,enumDeclaration:ci,exportAllDeclaration:Si,exportNamedDeclaration:Ti,expressionToStatement:Wt,forOfStatement:hi,functionTypeNode:pi,getAccessorDeclaration:li,identifier:I,ifStatement:mr,indexedAccessTypeNode:fi,isTsNode:_t,keywordTypeNode:zt,literalTypeNode:oi,mappedTypeNode:ln,methodDeclaration:Pi,namedImportDeclarations:Ii,namespaceDeclaration:mi,newExpression:Lr,nodeToString:Le,null:Qs,objectExpression:dn,ots:ye,parameterDeclaration:pr,propertyAccessExpression:Ve,propertyAccessExpressions:ki,propertyAssignment:fn,propertyDeclaration:ni,regularExpressionLiteral:bi,returnFunctionCall:Ni,returnStatement:yn,returnVariable:Ci,safeAccessExpression:cr,stringLiteral:Bt,templateLiteralType:Oi,this:ri,transformArrayMap:Mi,transformArrayMutation:qi,transformDateMutation:vi,transformFunctionMutation:wi,transformNewDate:$i,typeAliasDeclaration:yi,typeArrayNode:Vi,typeInterfaceNode:Gs,typeIntersectionNode:Fi,typeNode:ae,typeOfExpression:di,typeOperatorNode:si,typeParameterDeclaration:Fr,typeParenthesizedNode:gi,typeRecordNode:Di,typeReferenceNode:Se,typeTupleNode:Li,typeUnionNode:Vr,valueToExpression:De},ig=s;var _i=(e,t)=>e instanceof Set?e.has(t):e instanceof Array?e.includes(t):t in e,Rt=({base:e,components:t,extraComponents:r})=>{let n=2,o=e;for(;_i(t,o)||r&&_i(r,o);)o=`${e}${n}`,n+=1;return o},xn=e=>e.length===3&&e[0]==="components"&&e[1]==="schemas"||e.length===2&&e[0]==="definitions",lr=e=>{if(e&&typeof e=="object"){if("swagger"in e)return "#/definitions/";if("openapi"in e)return "#/components/schemas/"}return ""};var hm=[le,Yo,Go,Jo,Xo],Re=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(ir.lastIndex=0,ir.test(t))return `_${t}`;for(let r of hm){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var Bi=/[\p{Lu}]/u,Js=/[\p{Ll}]/u,Ki=/([\p{Alpha}\p{N}_]|$)/u,ur=/[_.\- `\\[\]{}\\/]+/,xm=new RegExp(`^${ur.source}`),Ys=new RegExp(`${ur.source}${Ki.source}`,"gu"),zi=new RegExp(`\\d+${Ki.source}`,"gu"),bm=({case:e,string:t})=>{let r=false,n=false,o=false,a=false,i=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let p=0;p<t.length;p++){let c=t[p];a=p>2?t[p-3]===i:true;let m=p+1,f=t[m];for(ur.lastIndex=0;f&&ur.test(f);)m+=1,f=t[m];let l=m!==p+1;if(Js.lastIndex=0,Bi.lastIndex=0,Bi.test(c)&&(r||f&&!l&&f!=="s"&&Js.test(f)))t=`${t.slice(0,p)}${i}${t.slice(p)}`,p++,o=n,r=false,n=true;else if(n&&o&&Js.test(c)&&!a&&!(c==="s"&&(!f||f.toLocaleLowerCase()!==f)))t=`${t.slice(0,p-1)}${i}${t.slice(p-1)}`,o=n,r=true,n=false;else {let u=c.toLocaleLowerCase(),y=c.toLocaleUpperCase();o=n,r=u===c&&y!==c,n=y===c&&u!==c;}}return t},j=({case:e,stripLeadingSeparators:t=true,value:r})=>{let n=r.trim();return n.length?!e||e==="preserve"?n:n.length===1?(ur.lastIndex=0,ur.test(n)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase()):(n!==n.toLocaleLowerCase()&&(n=bm({case:e,string:n})),(t||n[0]!==r[0])&&(n=n.replace(xm,"")),n=e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase(),e==="PascalCase"&&(n=`${n.charAt(0).toLocaleUpperCase()}${n.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(n=n.replaceAll(Ys,(a,i,p)=>p===0&&!t?a:`_${i}`),n[n.length-1]==="_"&&(n=n.slice(0,n.length-1))):(Ys.lastIndex=0,zi.lastIndex=0,n=n.replaceAll(zi,(a,i,p)=>["_","-","."].includes(n.charAt(p+a.length))?a:a.toLocaleUpperCase()),n=n.replaceAll(Ys,(a,i,p)=>p===0&&!t&&a[0]&&r.startsWith(a[0])?a:i.toLocaleUpperCase())),n):""};var Be=class{_case;_exportFromIndex;_headers=[];_id;_imports=new Map;_items=[];_name;_path;identifiers={};names={};nodeReferences={};nodes={};constructor({case:t,dir:r,exportFromIndex:n=false,header:o=true,id:a,name:i}){this._case=t,this._exportFromIndex=n,this._id=a,this._name=this._setName(i),this._path=F.resolve(r,this._name),o&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}addNodeReference(t,r){this.nodeReferences[t]||(this.nodeReferences[t]=[]);let n=r.factory(this.names[t]??"");return this.nodeReferences[t].push({factory:r.factory,node:n}),n}blockIdentifier({$ref:t,namespace:r}){let{name:n,ref:o}=Hi(t),a=this.identifiers[n.toLocaleLowerCase()]?.[r]?.[o];if(!a)throw new Error(`Identifier for $ref ${t} in namespace ${r} not found`);return a.name=false,{created:false,name:a.name}}get exportFromIndex(){return this._exportFromIndex}getName(t){let r=this.names[t];if(r)return r}getNode(t){return this.nodes[t]||(this.nodes[t]={node:s.typeReferenceNode({typeName:""})}),this.nodes[t]}get id(){return this._id}identifier(t){return eo({case:t.case??this._case,identifiers:this.identifiers,...t})}import({module:t,...r}){if(!r.name)return {name:void 0};let n=this._imports.get(t);n||(n=new Map,this._imports.set(t,n));let o=n.get(r.name);return o?{...o,name:o.alias||o.name}:(n.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=_r(this._name);return t}relativePathToFile({context:t,id:r}){let n="";if(r.startsWith(".")){let m=[];if(t.config.configFile){let f=t.config.configFile.split("/");m=f.slice(0,f.length-1);}n=F.resolve(process.cwd(),...m,r);}else {let m=t.file({id:r});if(!m)throw new Error(`File with id ${r} does not exist`);n=m._path;}let o=this._path.split(F.sep),a=n.split(F.sep),i=-1,p="";for(let m of o)if(i+=1,a[i]!==m){let f=Array.from({length:o.length-i}).fill(""),l=a.slice(i),u=l.slice(0,l.length-1);u.length&&u.push(""),p=(f.join("../")||"./")+u.join("/");break}let c=a[a.length-1];return `${p}${_r(c).name}`}remove(t){he.rmSync(this._path,t);}removeNode_LEGACY(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:n}=_r(t);return [n,"gen",r].filter(Boolean).join(".")}_toString(t,r){let n=[];this._headers.length&&n.push(this._headers.join(`
`));let o=r?.options.moduleResolution===b.ModuleResolutionKind.NodeNext,a=[];for(let[i,p]of this._imports.entries()){let c=Array.from(p.values()),m=i;o&&(m.startsWith("./")||m.startsWith("../"))&&(m==="./client"?m="./client/index.js":m=`${m}.js`);let f=s.namedImportDeclarations({imports:c,module:m});a.push(Le({node:f}));}return a.length&&n.push(a.join(`
`)),n=n.concat(this._items.map(i=>typeof i=="string"?i:Le({node:i,unescape:true}))),n.join(t)}updateNode(t,r){let n=Rt({base:Re(r.name),components:Object.values(this.names)});this.names[t]=n;let o=s.typeReferenceNode({typeName:n});return this.nodes[t]?Object.assign(this.nodes[t].node,o):this.nodes[t]={node:o},r.exported!==void 0&&(this.nodes[t].exported=r.exported),this.nodes[t]}updateNodeReferences(t,r){if(!this.nodeReferences[t])return;let n=Rt({base:Re(r),components:Object.values(this.names)});this.names[t]=n;for(let o of this.nodeReferences[t]){let a=o.factory(n);Object.assign(o.node,a);}}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let n=this._path;if(typeof this._path=="string"){let o=this._path.split(F.sep);n=o.slice(0,o.length-1).join(F.sep);}ot(n),he.writeFileSync(this._path,this._toString(t,r));}},Hi=e=>{let t=e,r=[],n=t.split("/"),o=n[n.length-1]||"",a=n.indexOf("properties");if(a!==-1)for(t=n.slice(0,a).join("/"),o=n[a-1]||"";a+1<n.length;){let i=n[a+1];if(!i)throw new Error(`Invalid $ref: ${e}`);r.push(i),a+=2;}return {name:o,properties:r,ref:t}},Sm=(e,t,r)=>{if(typeof t=="function")return t(e);let n=r==="preserve"?"":"-";return t.replace("{{name}}",`${n}${e}${n}`)},eo=({$ref:e,case:t,count:r=1,create:n=false,identifiers:o,nameTransformer:a,namespace:i})=>{let{name:p,properties:c,ref:m}=Hi(e);if(!p)return {created:false,name:""};let f=j({case:t,value:a?Sm(p,a,t):p});r>1&&(f=`${f}${r}`);let l=f.toLocaleLowerCase();o[l]||(o[l]={});let u=o[l];if(i==="enum"&&(u.type||u.value)||i!=="enum"&&u.enum)return eo({$ref:m,case:t,count:r+1,create:n,identifiers:o,nameTransformer:a,namespace:i});u[i]||(u[i]={});let y=u[i],g=y[m];if(g){let S=g.name;return c.length&&(S+=c.map(O=>`['${O}']`).join("")),{created:false,name:S}}let x=y[f];return x?x.$ref===m?{created:false,name:x.name}:eo({$ref:m,case:t,count:r+1,create:n,identifiers:o,nameTransformer:a,namespace:i}):n?(x={$ref:m,name:Re(f)},y[f]=x,y[x.$ref]=x,{created:true,name:x.name}):(delete u[i],{created:false,name:""})},_r=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",n=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:n}};var Zi=F.dirname(createRequire$1(import.meta.url).resolve("@hey-api/openapi-ts/package.json")),Xi=e=>{let t=e.split(F.sep);return t.slice(0,t.length-1).join(F.sep)},ee=({config:e,sourceOutput:t})=>{let r=C(e);if("bundle"in r.config&&r.config.bundle)return nr({moduleOutput:"client",sourceOutput:t});if(F.isAbsolute(r.name)){let n=Xi(r.name),o=F.resolve(e.output.path);return F.relative(o,n).replace(/\\/g,"/")}return r.name},Q={Options:{asType:true,name:"Options"},OptionsLegacyParser:{asType:true,name:"OptionsLegacyParser"}},bn=(e,t)=>{if(he.statSync(e).isDirectory()){he.existsSync(t)||he.mkdirSync(t,{recursive:true});let n=he.readdirSync(e);for(let o of n)bn(F.join(e,o),F.join(t,o));}else {let n=he.readFileSync(e);he.writeFileSync(t,n);}},to=(e,t=".js")=>{let r=he.readFileSync(e,"utf8");r=r.replace(/from\s+['"](\.\.?\/[^'"]*?)['"]/g,(n,o)=>{let a=o.lastIndexOf("/");return (a>=0?o.slice(a+1):o).includes(".")?n:`from '${o}${t}'`}),he.writeFileSync(e,r,"utf8");},Ui=e=>to(e),Qi=e=>{let t=he.readdirSync(e);for(let r of t){let n=F.resolve(e,r);if(r!=="index.ts"){let{extension:o,name:a}=_r(n),i=F.resolve(e,[a,"gen",o].filter(Boolean).join("."));he.renameSync(n,i),to(F.resolve(e,i),".gen");}else to(F.resolve(e,n),".gen");}},Ng=({legacy:e,outputPath:t,plugin:r,tsConfig:n})=>{if(r.name.startsWith("@hey-api/client-")){let u=n?.options.moduleResolution===b.ModuleResolutionKind.NodeNext,y=F.resolve(t,"core");ot(y);let g=F.resolve(Zi,"dist","clients","core");if(bn(g,y),e||Qi(y),u){let w=he.readdirSync(y);for(let N of w)Ui(F.resolve(y,N));}let x=F.resolve(t,"client");ot(x);let S=r.name.slice(16),O=F.resolve(Zi,"dist","clients",S);if(bn(O,x),e||Qi(x),u){let w=he.readdirSync(x);for(let N of w)Ui(F.resolve(x,N));}return}let a="";if(F.isAbsolute(r.name)&&(a=Xi(r.name)),a){let u=F.resolve(t,"client");ot(u),bn(a,u);return}let p=F.normalize(Ho.resolve(r.name)).split(F.sep),c=p.slice(0,p.indexOf("dist")+1).join(F.sep),f=[p[p.length-1],"index.d.ts","index.d.cts"],l=F.resolve(t,"client");ot(l);for(let u of f)he.copyFileSync(F.resolve(c,u),F.resolve(l,u));};var Gi=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,ze=e=>{let t={host:"",path:"",port:"",protocol:""};Gi.lastIndex=0;let r=e.match(Gi);if(!r)return t;let n=r[5]||"";if(n==="."||n==="..")return t;let o=r[8]||"",a=r[2]||"";return a.length===1?t:{host:n,path:o==="/"?"":o,port:r[7]||"",protocol:a}};var T="types";var Im=({plugin:e})=>{let{baseUrl:t}=e.config;if(t===false)return;if(typeof t=="string")return t;let{servers:r}=e.context.ir;if(r)return r[typeof t=="number"?t:0]?.url},Ji=({plugin:e})=>{let t=e.context.file({id:Fe}),r=ee({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({module:r,name:"createClient"}),o=t.import({module:r,name:"createConfig"}),a=e.getPlugin("@hey-api/typescript"),i=e.context.file({id:T}),p=t.import({asType:true,module:t.relativePathToFile({context:e.context,id:T}),name:i.getName(a.api.getId({type:"ClientOptions"}))}),c=e.config.runtimeConfigPath?t.import({module:t.relativePathToFile({context:e.context,id:e.config.runtimeConfigPath}),name:"createClientConfig"}):void 0,m=[],f=Im({plugin:e});if(f){let y=ze(f);if(y.protocol&&y.host&&!f.includes("{"))m.push({key:Ce(e.context.config),value:f});else if(f!=="/"&&f.startsWith("/")){let g=f.endsWith("/")?f.slice(0,-1):f;m.push({key:Ce(e.context.config),value:g});}}"throwOnError"in e.config&&e.config.throwOnError&&m.push({key:"throwOnError",value:true});let l=[s.callExpression({functionName:o.name,parameters:m.length?[s.objectExpression({obj:m})]:void 0,types:p.name?[s.typeReferenceNode({typeName:p.name})]:void 0})],u=s.constVariable({exportConst:true,expression:s.callExpression({functionName:n.name,parameters:c?[s.callExpression({functionName:c.name,parameters:l})]:l}),name:"client"});t.add(u);};var Yi=({plugin:e})=>{let t=e.context.file({id:Fe}),r=ee({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=e.getPlugin("@hey-api/typescript"),o=e.context.file({id:T}),a=t.import({asType:true,module:t.relativePathToFile({context:e.context,id:T}),name:o.getName(n.api.getId({type:"ClientOptions"}))}),i=t.import({asType:true,module:r,name:"Config"}),p=t.import({alias:"DefaultClientOptions",asType:true,module:r,name:"ClientOptions"}),c=s.typeReferenceNode({typeName:p.name}),m=s.typeReferenceNode({typeName:"T"}),f=s.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:"CreateClientConfig",type:s.functionTypeNode({parameters:[s.parameterDeclaration({name:"override",required:false,type:s.typeReferenceNode({typeArguments:[s.typeIntersectionNode({types:[c,m]})],typeName:i.name})})],returnType:s.typeReferenceNode({typeArguments:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeArguments:[c],typeName:"Required"}),m]})],typeName:i.name})}),typeParameters:[{default:a.name?s.typeReferenceNode({typeName:a.name}):void 0,extends:c,name:"T"}]});t.add(f);};var It=({plugin:e})=>{e.createFile({id:Fe,path:e.output}),Yi({plugin:e}),Ji({plugin:e});};var Sn=e=>({getVersion:t=>{let r=e[t];try{if(r)return On.parse(r)||void 0}catch{}},isInstalled:t=>!!e[t],satisfies:(t,r,n)=>{let o=typeof t=="string"?e[t]:t;return o?On.satisfies(o,r,n):false}});var Tn=class{api;config;context;dependencies=[];handler;name;output;package;constructor(t){this.api=t.api??{},this.config=t.config,this.context=t.context,this.dependencies=t.dependencies,this.handler=t.handler,this.name=t.name,this.output=t.output,this.package=t.context.package;}createFile(t){return this.context.createFile({exportFromIndex:this.config.exportFromIndex,...t})}forEach(...t){let r=t.slice(0,-1),n=t[t.length-1],o=new Set(r.length?r:["operation","parameter","requestBody","schema","server"]);if(o.has("server")&&this.context.ir.servers)for(let a of this.context.ir.servers){let i={server:a,type:"server"};try{n(i);}catch(p){this.forEachError(p,i);}}if(o.has("schema")&&this.context.ir.components?.schemas)for(let a in this.context.ir.components.schemas){let i={$ref:`#/components/schemas/${a}`,name:a,schema:this.context.ir.components.schemas[a],type:"schema"};try{n(i);}catch(p){this.forEachError(p,i);}}if(o.has("parameter")&&this.context.ir.components?.parameters)for(let a in this.context.ir.components.parameters){let i={$ref:`#/components/parameters/${a}`,name:a,parameter:this.context.ir.components.parameters[a],type:"parameter"};try{n(i);}catch(p){this.forEachError(p,i);}}if(o.has("requestBody")&&this.context.ir.components?.requestBodies)for(let a in this.context.ir.components.requestBodies){let i={$ref:`#/components/requestBodies/${a}`,name:a,requestBody:this.context.ir.components.requestBodies[a],type:"requestBody"};try{n(i);}catch(p){this.forEachError(p,i);}}if(o.has("operation")&&this.context.ir.paths)for(let a in this.context.ir.paths){let i=this.context.ir.paths[a];for(let p in i){let c=p,m={method:c,operation:i[c],path:a,type:"operation"};try{n(m);}catch(f){this.forEachError(f,m);}}}}forEachError(t,r){let n=t instanceof Error?t:new Error(String(t));throw new sr({args:[r],error:n,event:r.type,name:"Error",pluginName:this.name})}getPlugin(t){return this.context.plugins[t]}async run(){await this.handler({plugin:this});}};var Am=/~1/g,Pm=/~0/g,_=e=>{let t=Ke(e),r=t[t.length-1];return decodeURI(r)},Em=e=>String(e).replace(/~/g,"~0").replace(/\//g,"~1"),Ke=e=>{let t=e.trim();return t.startsWith("#")&&(t=t.slice(1)),t.startsWith("/")&&(t=t.slice(1)),t?t.split("/").map(r=>r.replace(Am,"/").replace(Pm,"~")):[]},ea=e=>{let t=e.trim();return t.startsWith("#")||(t=`#${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t=t.replace(/\/+/g,"/"),t},ta=e=>{let t=e.map(Em).join("/");return "#"+(t?`/${t}`:"")},ro=({$ref:e,spec:t})=>{let r=Ke(decodeURI(e)),n=t;for(let o of r){let a=o;if(n[a]===void 0)throw new Error(`Reference not found: ${e}`);n=n[a];}return n};var Rn=class{config;files={};ir={};package;plugins={};spec;constructor({config:t,dependencies:r,spec:n}){this.config=t,this.package=Sn(r),this.spec=n;}createFile(t){let r=t.path.split("/"),n=F.resolve(this.config.output.path,...r.slice(0,r.length-1)),o=new Be({case:t.case,dir:n,exportFromIndex:t.exportFromIndex,id:t.id,name:`${r[r.length-1]}.ts`});return this.files[t.id]=o,o}dereference(t){let r=this.resolveRef(t.$ref),n={...t,...r};return delete n.$ref,n}file({id:t}){return this.files[t]}registerPlugin(t){let r=this.config.plugins[t],n=new Tn({api:r.api,config:r.config,context:this,dependencies:r.dependencies??[],handler:r.handler,name:r.name,output:r.output});return this.plugins[n.name]=n,n}registerPlugins(){return this.config.pluginOrder.map(t=>this.registerPlugin(t))}resolveIrRef(t){return ro({$ref:t,spec:this.ir})}resolveRef(t){return ro({$ref:t,spec:this.spec})}};var In=({context:e,parameter:t})=>{if(!t.pagination)return;if(t.pagination===true)return t.schema;let r=t.schema;return r.$ref&&(r=e.resolveIrRef(r.$ref)),r.properties[t.pagination]},At=e=>{for(let t in e)if(e[t].required)return  true;return  false},ra=e=>e?!!(At(e.cookie)||At(e.header)||At(e.path)||At(e.query)):false,no=({context:e,parameters:t})=>{if(t){for(let r in t.cookie){let n=t.cookie[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:In({context:e,parameter:n})}}for(let r in t.header){let n=t.header[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:In({context:e,parameter:n})}}for(let r in t.path){let n=t.path[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:In({context:e,parameter:n})}}for(let r in t.query){let n=t.query[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:In({context:e,parameter:n})}}}};var G=({detectFormat:e=true,schema:t})=>{if(!t.items)return t;let r=[],n=[];for(let a of t.items){if(!a.type&&a.items||t.type==="tuple"){r.push(a);continue}if(!a.type||a.type==="boolean"||a.type==="integer"||a.type==="null"||a.type==="number"||a.type==="string"||a.type==="unknown"||a.type==="void"){let i=a.const!==void 0?`const-${a.const}`:"",p=a.format!==void 0&&e?`format-${a.format}`:"",c=`${a.$ref??""}${a.type??""}${i}${p}`;n.includes(c)||(n.push(c),r.push(a));continue}r.push(a);}let o={...t};if(o.items=r,o.items.length<=1&&o.type!=="array"&&o.type!=="enum"&&o.type!=="tuple"){let a=o.items[0];delete o.logicalOperator,delete o.items,o={...o,...a};}return o.type==="unknown"?{}:o};var Br=e=>JSON.parse(JSON.stringify(e)),k=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let n of t)r.add(n);return r.size>e.length?Array.from(r):e};var so=({items:e,schema:t})=>{for(let r of e)t.accessScopes=k(t.accessScopes,r.accessScopes);t.items=e;},B=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:n})=>e.length?n.type==="tuple"?(so({items:e,schema:n}),n):e.length!==1?(so({items:e,schema:n}),n.logicalOperator=t,n):r?(n={...n,...e[0]},n):(so({items:e,schema:n}),n):n;var An=e=>!!(ra(e.parameters)||e.body?.required),v=({method:e,path:t})=>`${e.toUpperCase()} ${t}`,na=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return no({context:e,parameters:t.parameters});if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let n=r.schema,o=n.$ref?e.resolveIrRef(n.$ref):n,i=("schema"in o?o.schema:o)?.properties?.[r.pagination];return i?{in:"body",name:r.pagination,schema:i}:no({context:e,parameters:t.parameters})},oo=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},We=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},n={properties:{},type:"object"},o;for(let p in e.responses){let c=e.responses[p];switch(oo({statusCode:p})){case "1XX":case "3XX":break;case "2XX":n.properties[p]=c.schema;break;case "4XX":case "5XX":r.properties[p]=c.schema;break;case "default":o=c;break}}if(o){let p=false;Object.keys(n.properties).length||(n.properties.default=o.schema,p=true);let c=(o.schema.description??"").toLocaleLowerCase(),m=(o.schema.$ref??"").toLocaleLowerCase();["success"].some(u=>c.includes(u)||m.includes(u))&&(n.properties.default=o.schema,p=true),["error","problem"].some(u=>c.includes(u)||m.includes(u))&&(r.properties.default=o.schema,p=true),p||(r.properties.default=o.schema);}let a=Object.keys(r.properties);if(a.length){r.required=a,t.errors=r;let p=B({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});p=G({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.error=p);}let i=Object.keys(n.properties);if(i.length){n.required=i,t.responses=n;let p=B({items:Object.values(n.properties),mutateSchemaOneItem:true,schema:{}});p=G({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.response=p);}return t};var ve=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return ir.lastIndex=0,ir.test(t)?`_${t}`:t},it=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),io=e=>{let t=e.replace("[]","Array");return it(t)};var oe=["delete","get","head","options","patch","post","put","trace"],Ht=({context:e,count:t=1,id:r,method:n,path:o,state:a})=>{let i,{output:p}=e.config,c=(p!==void 0&&typeof p=="object"&&"case"in p?p.case:void 0)??"camelCase";if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].config.operationId))i=j({case:c,value:it(r)});else {let m=o.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");i=j({case:c,value:`${n}-${m}`});}return t>1&&(i=`${i}${t}`),a.ids.has(i)?Ht({context:e,count:t+1,id:r,method:n,path:o,state:a}):(a.ids.set(i,v({method:n,path:o})),i)};var sa="/",E=(e,t="")=>`${e}${sa}${t}`,ne=e=>{let t=e.indexOf(sa);return {name:e.slice(t+1),namespace:e.slice(0,t)}},oa=e=>{switch(e){case "parameters":return "parameter";case "requestBodies":return "body";case "responses":return "response";case "definitions":case "schemas":return "schema";default:return "unknown"}},He=(e,t)=>{let r=[],n=[];if(t)for(let o of t)o.startsWith("/")&&o.endsWith("/")?n.push(new RegExp(o.slice(1,o.length-1))):r.push(E(e,o));return {regexps:n,set:new Set(r)}},Nm=({excludeOperations:e,excludeSchemas:t,includeOperations:r,includeSchemas:n,spec:o})=>{if((e.regexps.length||r.regexps.length)&&o.paths)for(let a of Object.entries(o.paths)){let i=a[0],p=a[1];for(let c of oe){if(!p[c])continue;let f=v({method:c,path:i});e.regexps.some(l=>l.test(f))&&e.set.add(E("operation",f)),r.regexps.some(l=>l.test(f))&&r.set.add(E("operation",f));}}if(o.definitions&&(t.regexps.length||n.regexps.length))for(let a of Object.keys(o.definitions))t.regexps.some(i=>i.test(a))&&t.set.add(E("schema",a)),n.regexps.some(i=>i.test(a))&&n.set.add(E("schema",a));},Cm=({excludeOperations:e,excludeParameters:t,excludeRequestBodies:r,excludeResponses:n,excludeSchemas:o,includeOperations:a,includeParameters:i,includeRequestBodies:p,includeResponses:c,includeSchemas:m,spec:f})=>{if((e.regexps.length||a.regexps.length)&&f.paths)for(let l of Object.entries(f.paths)){let u=l[0],y=l[1];for(let g of oe){if(!y[g])continue;let S=v({method:g,path:u});e.regexps.some(O=>O.test(S))&&e.set.add(E("operation",S)),a.regexps.some(O=>O.test(S))&&a.set.add(E("operation",S));}}if(f.components){if((t.regexps.length||i.regexps.length)&&f.components.parameters)for(let l of Object.keys(f.components.parameters))t.regexps.some(u=>u.test(l))&&t.set.add(E("parameter",l)),i.regexps.some(u=>u.test(l))&&i.set.add(E("parameter",l));if((r.regexps.length||p.regexps.length)&&f.components.requestBodies)for(let l of Object.keys(f.components.requestBodies))r.regexps.some(u=>u.test(l))&&r.set.add(E("body",l)),p.regexps.some(u=>u.test(l))&&p.set.add(E("body",l));if((n.regexps.length||c.regexps.length)&&f.components.responses)for(let l of Object.keys(f.components.responses))n.regexps.some(u=>u.test(l))&&n.set.add(E("response",l)),c.regexps.some(u=>u.test(l))&&c.set.add(E("response",l));if((o.regexps.length||m.regexps.length)&&f.components.schemas)for(let l of Object.keys(f.components.schemas))o.regexps.some(u=>u.test(l))&&o.set.add(E("schema",l)),m.regexps.some(u=>u.test(l))&&m.set.add(E("schema",l));}},km=({spec:e,...t})=>{"swagger"in e?Nm({...t,spec:e}):Cm({...t,spec:e});},yr=(e,t)=>{let r=He("operation",e?.operations?.exclude),n=He("operation",e?.operations?.include),o=He("parameter",e?.parameters?.exclude),a=He("parameter",e?.parameters?.include),i=He("body",e?.requestBodies?.exclude),p=He("body",e?.requestBodies?.include),c=He("response",e?.responses?.exclude),m=He("response",e?.responses?.include),f=He("schema",e?.schemas?.exclude),l=He("schema",e?.schemas?.include);return km({excludeOperations:r,excludeParameters:o,excludeRequestBodies:i,excludeResponses:c,excludeSchemas:f,includeOperations:n,includeParameters:a,includeRequestBodies:p,includeResponses:m,includeSchemas:l,spec:t}),{deprecated:e?.deprecated??true,operations:{exclude:r.set,include:n.set},orphans:e?.orphans??false,parameters:{exclude:o.set,include:a.set},preserveOrder:e?.preserveOrder??false,requestBodies:{exclude:i.set,include:p.set},responses:{exclude:c.set,include:m.set},schemas:{exclude:f.set,include:l.set},tags:{exclude:new Set(e?.tags?.exclude),include:new Set(e?.tags?.include)}}},gr=e=>e?e.orphans===false||e.deprecated===false?true:!!(e.operations?.exclude?.length||e.operations?.include?.length||e.parameters?.exclude?.length||e.parameters?.include?.length||e.requestBodies?.exclude?.length||e.requestBodies?.include?.length||e.responses?.exclude?.length||e.responses?.include?.length||e.schemas?.exclude?.length||e.schemas?.include?.length||e.tags?.exclude?.length||e.tags?.include?.length):false,vm=({filters:e,parameters:t,requestBodies:r,resourceMetadata:n,responses:o,schemas:a})=>{let i=new Set,c=[...e.operations.include.size?e.operations.include:new Set(n.operations.keys())];for(;c.length;){let m=c.pop();if(e.operations.exclude.has(m)||i.has(m))continue;let f=n.operations.get(m);f&&(!e.deprecated&&f.deprecated||e.tags.exclude.size&&f.tags.size&&[...e.tags.exclude].some(l=>f.tags.has(l))||e.tags.include.size&&!new Set([...e.tags.include].filter(l=>f.tags.has(l))).size||[...f.dependencies].some(l=>{let{namespace:u}=ne(l);switch(u){case "body":return !r.has(l);case "parameter":return !t.has(l);case "response":return !o.has(l);case "schema":return !a.has(l);default:return  false}})||i.add(m));}return {operations:i}},wm=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,a=[...e.parameters.include.size?e.parameters.include:new Set(t.parameters.keys())];for(;a.length;){let i=a.pop();if(e.parameters.exclude.has(i)||n.has(i))continue;let p=t.parameters.get(i);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(i),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=ne(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(i):n.has(c)||a.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(i):r.has(c)||r.add(c);break}}}}return {parameters:n}},qm=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,a=[...e.requestBodies.include.size?e.requestBodies.include:new Set(t.requestBodies.keys())];for(;a.length;){let i=a.pop();if(e.requestBodies.exclude.has(i)||n.has(i))continue;let p=t.requestBodies.get(i);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(i),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=ne(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(i):n.has(c)||a.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(i):r.has(c)||r.add(c);break}}}}return {requestBodies:n}},$m=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,a=[...e.responses.include.size?e.responses.include:new Set(t.responses.keys())];for(;a.length;){let i=a.pop();if(e.responses.exclude.has(i)||n.has(i))continue;let p=t.responses.get(i);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(i),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=ne(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(i):n.has(c)||a.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(i):r.has(c)||r.add(c);break}}}}return {responses:n}},Mm=({filters:e,resourceMetadata:t})=>{let r=new Set,o=[...e.schemas.include.size?e.schemas.include:new Set(t.schemas.keys())];for(;o.length;){let a=o.pop();if(e.schemas.exclude.has(a)||r.has(a))continue;let i=t.schemas.get(a);if(i&&!(!e.deprecated&&i.deprecated)&&(r.add(a),!!i.dependencies.size))for(let p of i.dependencies){let{namespace:c}=ne(p);switch(c){case "schema":{!r.has(p)&&!e.schemas.exclude.has(p)&&o.push(p);break}}}}return {schemas:r}},Fm=({filters:e,parameters:t,resourceMetadata:r})=>{if(e.parameters.exclude.size)for(let n of t){let o=r.parameters.get(n);if(o?.dependencies.size){for(let a of e.parameters.exclude)if(o.dependencies.has(a)){t.delete(n);break}}}},Lm=({filters:e,requestBodies:t,resourceMetadata:r})=>{if(e.requestBodies.exclude.size)for(let n of t){let o=r.requestBodies.get(n);if(o?.dependencies.size){for(let a of e.requestBodies.exclude)if(o.dependencies.has(a)){t.delete(n);break}}}},Dm=({filters:e,resourceMetadata:t,responses:r})=>{if(e.responses.exclude.size)for(let n of r){let o=t.responses.get(n);if(o?.dependencies.size){for(let a of e.responses.exclude)if(o.dependencies.has(a)){r.delete(n);break}}}},Vm=({filters:e,resourceMetadata:t,schemas:r})=>{if(e.schemas.exclude.size)for(let n of r){let o=t.schemas.get(n);if(o?.dependencies.size){for(let a of e.schemas.exclude)if(o.dependencies.has(a)){r.delete(n);break}}}},_m=({operationDependencies:e,parameters:t,requestBodies:r,responses:n,schemas:o})=>{for(let a of o)e.has(a)||o.delete(a);for(let a of t)e.has(a)||t.delete(a);for(let a of r)e.has(a)||r.delete(a);for(let a of n)e.has(a)||n.delete(a);},Bm=({operations:e,resourceMetadata:t})=>{let r=new Set,o=[...new Set([...e].flatMap(a=>[...t.operations.get(a)?.dependencies??[]]))];for(;o.length;){let a=o.pop();if(r.has(a))continue;r.add(a);let{namespace:i}=ne(a),p;if(i==="body"?p=t.requestBodies.get(a)?.dependencies:i==="operation"?p=t.operations.get(a)?.dependencies:i==="parameter"?p=t.parameters.get(a)?.dependencies:i==="response"?p=t.responses.get(a)?.dependencies:i==="schema"&&(p=t.schemas.get(a)?.dependencies),!!p?.size)for(let c of p)r.has(c)||o.push(c);}return {operationDependencies:r}},hr=({filters:e,resourceMetadata:t})=>{let{schemas:r}=Mm({filters:e,resourceMetadata:t}),{parameters:n}=wm({filters:e,resourceMetadata:t,schemas:r}),{requestBodies:o}=qm({filters:e,resourceMetadata:t,schemas:r}),{responses:a}=$m({filters:e,resourceMetadata:t,schemas:r});Vm({filters:e,resourceMetadata:t,schemas:r}),Fm({filters:e,parameters:n,resourceMetadata:t}),Lm({filters:e,requestBodies:o,resourceMetadata:t}),Dm({filters:e,resourceMetadata:t,responses:a});let{operations:i}=vm({filters:e,parameters:n,requestBodies:o,resourceMetadata:t,responses:a,schemas:r});if(!e.orphans&&i.size){let{operationDependencies:p}=Bm({operations:i,resourceMetadata:t});_m({operationDependencies:p,parameters:n,requestBodies:o,responses:a,schemas:r});}return {operations:i,parameters:n,requestBodies:o,responses:a,schemas:r}};var xr=e=>{let t={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},r=n=>{let o=new Set,a=e.allDependencies.get(n);if(a?.size)for(let i of a){let p=Ke(i),c=p[p.length-2],m=p[p.length-1];if(c&&m){let f=oa(c);f==="unknown"&&console.warn(`unsupported type: ${c}`),o.add(E(f,m));}}return o};for(let[n,o]of e.nodes){let a=Ke(n);if(a[0]==="components"){if(a.length===3){if(a[1]==="schemas"){let i=a[a.length-1];t.schemas.set(E("schema",i),{dependencies:r(n),deprecated:o.deprecated??false});}else if(a[1]==="parameters"){let i=a[a.length-1];t.parameters.set(E("parameter",i),{dependencies:r(n),deprecated:o.deprecated??false});}else if(a[1]==="requestBodies"){let i=a[a.length-1];t.requestBodies.set(E("body",i),{dependencies:r(n),deprecated:o.deprecated??false});}else if(a[1]==="responses"){let i=a[a.length-1];t.responses.set(E("response",i),{dependencies:r(n),deprecated:o.deprecated??false});}}continue}if(a[0]==="paths"){if(a.length===3&&oe.includes(a[2])){let i=a[a.length-1],p=a.slice(1,-1).join("/"),c=v({method:i,path:p});t.operations.set(E("operation",c),{dependencies:r(n),deprecated:o.deprecated??false,tags:o.tags??new Set});}continue}if(a[0]==="definitions"){if(a.length===2){let i=a[a.length-1];t.schemas.set(E("schema",i),{dependencies:r(n),deprecated:o.deprecated??false});}continue}}return {resourceMetadata:t}};var q=({config:e,name:t})=>{if(typeof e.name=="function")t=e.name(t);else if(e.name){let r=e.case==="preserve"?"":"-";t=e.name.replace("{{name}}",`${r}${t}${r}`);}return j({case:e.case,value:t})};var Pt=[["additionalProperties","single"],["allOf","array"],["anyOf","array"],["contains","single"],["dependentSchemas","objectMap"],["else","single"],["if","single"],["items","singleOrArray"],["oneOf","array"],["patternProperties","objectMap"],["properties","objectMap"],["propertyNames","single"],["then","single"]];var zr=e=>{if(Pn(e))return e.components.schemas;if(En(e))return e.definitions},Pn=e=>typeof e=="object"&&e!==null&&"components"in e&&typeof e.components=="object"&&e.components!==null&&"schemas"in e.components&&typeof e.components.schemas=="object"&&e.components.schemas!==null,En=e=>typeof e=="object"&&e!==null&&"definitions"in e&&typeof e.definitions=="object"&&e.definitions!==null;var ao=e=>{if(!e||typeof e!="object"||!("enum"in e)||!(e.enum instanceof Array))return;let t=("type"in e?e.type:void 0)||"",r=[...e.enum].sort();return JSON.stringify({type:t,values:r})},po=({key:e,node:t,parent:r,path:n,visitor:o})=>{if(!t||typeof t!="object"||t instanceof Array)return;let a=t;("type"in a||"enum"in a||Pt.some(([i])=>i in a))&&o({key:e,node:t,parent:r,path:n});for(let[i,p]of Object.entries(a))typeof p=="object"&&p!==null&&(p instanceof Array?p.forEach((c,m)=>po({key:m,node:c,parent:p,path:[...n,i,m],visitor:o})):po({key:i,node:p,parent:t,path:[...n,i],visitor:o}));},zm=({spec:e})=>{let t=zr(e);if(!t)return;let r=lr(e),n={};for(let[a,i]of Object.entries(t))ao(i)&&(n[`${r}${a}`]=i);let o=a=>{if(a instanceof Array)a.forEach(o);else if(a&&typeof a=="object")for(let[i,p]of Object.entries(a))i==="$ref"&&typeof p=="string"&&p in n?(Object.assign(a,Br(n[p])),delete a.$ref):o(p);};o(e);for(let a of Object.keys(n)){let i=Ke(a),p=i[i.length-1];p&&delete t[p];}},Km=({config:e,spec:t})=>{let r=zr(t);if(!r)return;let n={};for(let[c,m]of Object.entries(r)){let f=ao(m);f&&(n[f]=c);}let o=[];po({key:null,node:t,parent:null,path:[],visitor:c=>{if(!xn(c.path)){let m=ao(c.node);m&&o.push({...c,signature:m});}}});let a={},i={};for(let{key:c,node:m,signature:f}of o){if(f in a)continue;if(f in n){a[f]=n[f];continue}let l=q({config:e,name:typeof m=="object"&&m&&"title"in m&&typeof m.title=="string"?m.title:String(c)}),u=Rt({base:l,components:r,extraComponents:Object.values(a)});a[f]=u,i[f]=m;}for(let[c,m]of Object.entries(a)){let f=i[c];m&&!(m in r)&&f&&typeof f=="object"&&(r[m]=f);}let p=lr(t);for(let{key:c,parent:m,signature:f}of o){let l=a[f];l&&c!=null&&m&&typeof m=="object"&&(m[c]={$ref:`${p}${l}`});}},ia=({config:e,spec:t})=>{if(e.mode==="inline"){zm({spec:t});return}if(e.mode==="root"){Km({config:e,spec:t});return}};var Wm=e=>{for(let[,t]of e)if(!t.scopes&&t.parentPointer){let r=e.get(t.parentPointer);r?.scopes&&(t.scopes=new Set(r.scopes));}},mo=({graph:e,pointer:t,visited:r})=>{if(r.has(t))return new Set;if(r.add(t),!e.nodes.get(t))return new Set;let o=new Set,a=e.dependencies.get(t);if(a)for(let i of a){o.add(i);let p=mo({graph:e,pointer:i,visited:r});for(let c of p)o.add(c);}for(let[i,p]of e.nodes)if(p.parentPointer===t){let c=mo({graph:e,pointer:i,visited:r});for(let m of c)o.add(m);}return o},Hm=e=>{let t=new Set(Array.from(e.nodes.entries()).filter(([,o])=>o.scopes&&o.scopes.size>0).map(([o])=>o)),r=(o,a,i)=>{a.parentPointer&&t.add(a.parentPointer);let p=e.reverseDependencies.get(o);if(p)for(let c of p)t.add(c);if(i){let c=i.match(/(.*)\/(allOf|anyOf|oneOf)\/\d+$/);if(c){let m=c[1];m&&t.add(m);}}},n=(o,a,i)=>{if(!a?.scopes)return;let p=e.nodes.get(i);if(!p?.scopes)return;co(p,a)&&r(o,a,i);};for(;t.size>0;){let o=t.values().next().value;t.delete(o);let a=e.nodes.get(o);if(!a)continue;a.scopes||(a.scopes=new Set);let i=a.node;for(let[c,m]of Pt){if(!i||typeof i!="object"||!(c in i))continue;let f=i[c];if(m==="array"&&f instanceof Array)for(let l=0;l<f.length;l++){let u=`${o}/${c}/${l}`;n(o,a,u);}else if(m==="objectMap"&&typeof f=="object"&&f!==null&&!(f instanceof Array))for(let l of Object.keys(f)){let u=`${o}/${c}/${l}`;n(o,a,u);}else if(m==="single"&&typeof f=="object"&&f!==null){let l=`${o}/${c}`;n(o,a,l);}else if(m==="singleOrArray"){if(f instanceof Array)for(let l=0;l<f.length;l++){let u=`${o}/${c}/${l}`;n(o,a,u);}else if(typeof f=="object"&&f!==null){let l=`${o}/${c}`;n(o,a,l);}}}let p=e.dependencies.get(o);if(p)for(let c of p){let m=e.nodes.get(c);m?.scopes&&co(m,a)&&r(o,a);}if(a.parentPointer){let c=e.nodes.get(a.parentPointer);c&&co(a,c)&&r(a.parentPointer,c);}}},co=(e,t)=>{if(!e.scopes)return  false;t.scopes||(t.scopes=new Set);let r=false;for(let n of e.scopes)t.scopes.has(n)||(t.scopes.add(n),r=true);return r},Zm=e=>{for(let[t,r]of e){let{node:n}=r;typeof n!="object"||n===null||n instanceof Array||("readOnly"in n&&n.readOnly===true?r.scopes=new Set(["read"]):"writeOnly"in n&&n.writeOnly===true?r.scopes=new Set(["write"]):t.match(/\/properties\/[^/]+$/)&&(r.scopes=new Set(["normal"])));}},Et=e=>{let t={allDependencies:new Map,dependencies:new Map,nodes:new Map,reverseDependencies:new Map},r=({key:n,node:o,parentPointer:a,path:i})=>{if(typeof o!="object"||o===null)return;let p=ta(i),c,m;if(typeof o=="object"&&o!==null){if("deprecated"in o&&typeof o.deprecated=="boolean"&&(c=!!o.deprecated),"$ref"in o&&typeof o.$ref=="string"){let f=ea(o.$ref);t.dependencies.has(p)||t.dependencies.set(p,new Set),t.dependencies.get(p).add(f);}"tags"in o&&o.tags instanceof Array&&(m=new Set(o.tags.filter(f=>typeof f=="string")));}if(t.nodes.set(p,{deprecated:c,key:n,node:o,parentPointer:a,tags:m}),o instanceof Array)o.forEach((f,l)=>r({key:l,node:f,parentPointer:p,path:[...i,l]}));else for(let[f,l]of Object.entries(o))r({key:f,node:l,parentPointer:p,path:[...i,f]});};r({key:null,node:e,parentPointer:null,path:[]});for(let[n,o]of t.dependencies)for(let a of o)t.reverseDependencies.has(a)||t.reverseDependencies.set(a,new Set),t.reverseDependencies.get(a).add(n);Zm(t.nodes),Hm(t),Wm(t.nodes);for(let n of t.nodes.keys()){let o=mo({graph:t,pointer:n,visited:new Set});t.allDependencies.set(n,o);}return {graph:t}};var Um=new Set(["additionalProperties","allOf","anyOf","items","not","oneOf","patternProperties","properties","schema"]),Qm=e=>{if(e.length===3&&e[0]==="components"){let t=e[1];if(t==="parameters"||t==="requestBodies")return "write";if(t==="responses"||t==="headers")return "read"}if(e.length===2){let t=e[0];if(t==="parameters")return "write";if(t==="responses")return "read"}},Xm=e=>{let t={};if(Pn(e))for(let[r,n]of Object.entries(e.components.schemas))t[`#/components/schemas/${r}`]=n;else if(En(e))for(let[r,n]of Object.entries(e.definitions))t[`#/definitions/${r}`]=n;return t},Gm=(e,t)=>{Pn(e)?Object.assign(e.components.schemas,t.schemas):En(e)&&Object.assign(e.definitions,t.schemas);},Zt=(e,t,r)=>{if(t&&typeof t=="object"){if("$ref"in t&&typeof t.$ref=="string"){let n=t.$ref,o=e.nodes.get(n);if(o?.scopes&&(r==="writeOnly"&&o.scopes.size===1&&o.scopes.has("write")||r==="readOnly"&&o.scopes.size===1&&o.scopes.has("read"))&&(delete t.$ref,!Pt.some(([a])=>a in t)))return  true}for(let[n,o]of Pt){if(!(n in t))continue;let a=t[n];if(o==="array"&&a instanceof Array){for(let i=a.length-1;i>=0;i--){let p=a[i];(p&&typeof p=="object"&&p[r]===true||Zt(e,p,r))&&a.splice(i,1);}a.length||delete t[n];}else if(o==="objectMap"&&typeof a=="object"&&a!==null&&!(a instanceof Array)){let i=a;for(let p of Object.keys(i)){let c=i[p];(c&&typeof c=="object"&&c[r]===true||Zt(e,c,r))&&delete i[p];}Object.keys(i).length||delete t[n];}else if(o==="single"&&typeof a=="object"&&a!==null)(a[r]===true||Zt(e,a,r))&&delete t[n];else if(o==="singleOrArray")if(a instanceof Array){for(let i=a.length-1;i>=0;i--){let p=a[i];(p&&typeof p=="object"&&p[r]===true||Zt(e,p,r))&&a.splice(i,1);}a.length||delete t[n];}else typeof a=="object"&&a!==null&&(a[r]===true||Zt(e,a,r))&&delete t[n];}if(t.type==="object"&&!Pt.some(([n])=>n in t))return  true}return  false},Jm=({originalSchemas:e,spec:t,split:r})=>{let n=zr(t);for(let o of Object.keys(r.mapping)){let a=Ke(o),i=a[a.length-1];typeof i=="string"&&n&&Object.prototype.hasOwnProperty.call(n,i)&&n[i]===e[o]&&delete n[i];}},Ym=({config:e,graph:t,spec:r})=>{let n=new Set,o={mapping:{},reverseMapping:{},schemas:{}},a=lr(r),i=a.split("/").length-1,p=c=>{if(c.startsWith(a)){let m=Ke(c);if(m.length===i)return m[i-1]||""}return ""};for(let c of t.nodes.keys()){let m=p(c);m&&n.add(m);}for(let[c,m]of t.nodes){let f=p(c);if(!f||!(m.scopes?.has("read")&&m.scopes?.has("write")))continue;let l=Br(m.node);Zt(t,l,"writeOnly");let u=q({config:e.responses,name:f}),y=u===f?u:Rt({base:u,components:n});n.add(y),o.schemas[y]=l;let g=`${a}${y}`,x=Br(m.node);Zt(t,x,"readOnly");let S=q({config:e.requests,name:f}),O=S===f&&S!==y?S:Rt({base:S,components:n});n.add(O),o.schemas[O]=x;let w=`${a}${O}`;o.mapping[c]={read:g,write:w},o.reverseMapping[g]=c,o.reverseMapping[w]=c;}return o},ef=(e,t)=>{let r=lr(e),n=({context:o,currentPointer:a,inSchema:i,node:p,path:c})=>{if(p instanceof Array)p.forEach((m,f)=>n({context:o,currentPointer:a,inSchema:i,node:m,path:[...c,f]}));else if(p&&typeof p=="object"){let m=a,f=o;if(xn(c)){m=`${r}${c[2]}`;let u=t.reverseMapping[m];if(u){let y=t.mapping[u];y?.read===m?f="read":y?.write===m&&(f="write");}}let l=Qm(c);if(l!==void 0){for(let u in p)Object.prototype.hasOwnProperty.call(p,u)&&n({context:l,currentPointer:m,inSchema:false,node:p[u],path:[...c,u]});return}for(let u in p){if(!Object.prototype.hasOwnProperty.call(p,u))continue;let y=p[u];if(!i){if(u==="requestBody"){n({context:"write",currentPointer:m,inSchema:false,node:y,path:[...c,u]});continue}if(u==="responses"){n({context:"read",currentPointer:m,inSchema:false,node:y,path:[...c,u]});continue}if(u==="parameters"&&Array.isArray(y)){y.forEach((g,x)=>{g&&typeof g=="object"&&"schema"in g&&n({context:"write",currentPointer:m,inSchema:true,node:g.schema,path:[...c,u,x,"schema"]}),g&&typeof g=="object"&&"content"in g&&n({context:"write",currentPointer:m,inSchema:false,node:g.content,path:[...c,u,x,"content"]});});continue}if(u==="headers"&&typeof y=="object"&&y!==null){for(let g in y)Object.prototype.hasOwnProperty.call(y,g)&&n({context:"read",currentPointer:m,inSchema:false,node:y[g],path:[...c,u,g]});continue}}if(Um.has(u))n({context:f,currentPointer:m,inSchema:true,node:y,path:[...c,u]});else if(u==="$ref"&&typeof y=="string"){let g=t.mapping[y];f==="read"&&g?.read?p[u]=g.read:f==="write"&&g?.write&&(p[u]=g.write);}else n({context:f,currentPointer:m,inSchema:i,node:y,path:[...c,u]});}}};n({context:null,currentPointer:null,inSchema:false,node:e,path:[]});},aa=({config:e,spec:t})=>{let{graph:r}=Et(t),n=Xm(t),o=Ym({config:e,graph:r,spec:t});Gm(t,o),ef(t,o),Jm({originalSchemas:n,spec:t,split:o});};var br=({context:e})=>{e.config.parser.transforms.enums.enabled&&ia({config:e.config.parser.transforms.enums,spec:e.spec}),e.config.parser.transforms.readWrite.enabled&&aa({config:e.config.parser.transforms.readWrite,spec:e.spec});};var L=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var tf=e=>/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(e),rf=e=>e.map((t,r)=>typeof t=="number"?`[${t}]`:r===0?t:tf(t)?`.${t}`:`['${t.replace(/"/g,"\\'")}']`).join(""),nf=e=>{let t=rf(e.path),r=e.severity==="error"?xt.bold.red:xt.bold.yellow,n=e.message.replace(/`([^`]+)`/g,(o,a)=>xt.yellow(`\`${a}\``));return `${r(`[${e.severity.toUpperCase()}]`)} ${xt.cyan(t)}: ${n}`},sf=({context:e,issue:t})=>e.config.logs.level==="silent"?false:t.severity==="error"?e.config.logs.level!=="warn":true,Or=({context:e,result:t})=>{for(let r of t.issues)sf({context:e,issue:r})&&console.log(nf(r));t.valid||process.exit(1);};var pa=({operations:e,preserveOrder:t,schemas:r,spec:n})=>{if(n.definitions){let o={};if(t)for(let[a,i]of Object.entries(n.definitions))r.has(E("schema",a))&&(o[a]=i);else for(let a of r){let{name:i}=ne(a),p=n.definitions[i];p&&(o[i]=p);}n.definitions=o;}if(n.paths)for(let o of Object.entries(n.paths)){let a=o[0],i=o[1];for(let p of oe){if(!i[p])continue;let m=E("operation",v({method:p,path:a}));e.has(m)||delete i[p];}Object.keys(i).length||delete n.paths[a];}};var ca=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,ma=/^application\/(.*\+)?json(;.*)?$/i,fa=/^multipart\/form-data(;.*)?$/i,la=/^text\/[a-z0-9.+-]+(;.*)?$/i,ua=/^application\/x-www-form-urlencoded(;.*)?$/i,da=/^application\/octet-stream(;.*)?$/i,at=({mediaType:e})=>(ca.lastIndex=0,ca.test(e)),Sr=({mediaType:e})=>{if(ma.lastIndex=0,ma.test(e))return "json";if(fa.lastIndex=0,fa.test(e))return "form-data";if(la.lastIndex=0,la.test(e))return "text";if(ua.lastIndex=0,ua.test(e))return "url-search-params";if(da.lastIndex=0,da.test(e))return "octet-stream"};var ya=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&at({mediaType:t})?{...r,format:"binary"}:r:at({mediaType:t})?{format:"binary",type:"string"}:void 0},fo=({mimeTypes:e,response:t})=>{let r=[];for(let n of e??[])r.push({mediaType:n,schema:t.schema,type:Sr({mediaType:n})});return r};function xe(e){let t=`^(${e.keywords.join("|")})$`;return new RegExp(t)}var Ze=(e,t)=>{let r=[];for(let n in t)t[n]===e&&r.push(n);return r.length?r:[_(e)]};var Kr=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},of=({irSchema:e,schema:t})=>{t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Nn=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=k(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=k(e.accessScopes,["both"]));},af=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let a=Ie({context:e,schema:r.items,state:n});if(t.accessScopes=k(t.accessScopes,a.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(a);else if("$ref"in r.items)o.push(a);else {let i=r.items.allOf;i&&i.length>1&&!r.items["x-nullable"]?t={...t,...a}:o.push(a);}}return t=B({items:o,schema:t}),t},pf=({irSchema:e={}})=>(e.type="boolean",e),cf=({irSchema:e={},schema:t})=>(e.type=t.type,e),mf=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let a in r.properties){let i=r.properties[a];if(typeof i!="boolean"){let p=Ie({context:e,schema:i,state:{...n,isProperty:true}});t.accessScopes=k(t.accessScopes,p.accessScopes),o[a]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")n.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let a=Ie({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=a;}return r.required&&(t.required=r.required),t},ff=({irSchema:e={}})=>(e.type="string",e),Tr=({schema:e})=>{let t={};return of({irSchema:t,schema:e}),t},lf=({context:e,schema:t,state:r})=>{let n=Tr({schema:t}),o=[],a=Kr({schema:t}),i=t.allOf;for(let p of i){let m="$ref"in p?r:{...r,inAllOf:true},f=Ie({context:e,schema:p,state:m});if(n.accessScopes=k(n.accessScopes,f.accessScopes),t.required&&(f.required?f.required=[...f.required,...t.required]:f.required=t.required),o.push(f),p.$ref){let l=e.resolveRef(p.$ref);if(l.discriminator&&r.$ref){let y=Ze(r.$ref).map(x=>({const:x,type:"string"})),g={properties:{[l.discriminator]:y.length>1?{items:y,logicalOperator:"or"}:y[0]},type:"object"};l.required?.includes(l.discriminator)&&(g.required=[l.discriminator]),o.push(g);}if(!r.circularReferenceTracker.has(p.$ref)){let u=Ie({context:e,schema:l,state:{...r,$ref:p.$ref}});n.accessScopes=k(n.accessScopes,u.accessScopes);}}}if(a==="object"){let p=Wr({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=k(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of i){let f=m.$ref?e.resolveRef(m.$ref):m;if(Kr({schema:f})==="object"){let l=Wr({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=k(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(n=B({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t["x-nullable"]){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},uf=({context:e,schema:t,state:r})=>{let n=Tr({schema:t});n.type="enum";let o=[];for(let[a,i]of t.enum.entries()){let p=typeof i,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(i)?c="array":i===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${i}" for enum`,t.enum),!c)continue;let m=Wr({context:e,schema:{description:t["x-enum-descriptions"]?.[a],title:t["x-enum-varnames"]?.[a]??t["x-enumNames"]?.[a],type:c==="null"?"string":c},state:r});m.const=i,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=k(n.accessScopes,m.accessScopes),o.push(m);}return n=B({items:o,schema:n}),n},df=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),n.$ref=n.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let o=e.resolveRef(t.$ref),a=Ie({context:e,schema:o,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=k(n.accessScopes,a.accessScopes);}return n},yf=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=Tr({schema:r}));let o={};Nn({irSchema:o,schema:r,state:n}),o.default===null&&delete o.default;let a=[Wr({context:e,irSchema:o,schema:r,state:n}),{type:"null"}];return t=B({items:a,schema:t}),t},gf=({context:e,schema:t,state:r})=>{let n=Tr({schema:t});Nn({irSchema:n,schema:t,state:r});let o=Kr({schema:t});return o?t["x-nullable"]?yf({context:e,irSchema:n,schema:{...t,type:o},state:r}):Wr({context:e,irSchema:n,schema:{...t,type:o},state:r}):n},Wr=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=Tr({schema:r}),Nn({irSchema:t,schema:r,state:n})),r.type){case "array":return af({context:e,irSchema:t,schema:r,state:n});case "boolean":return pf({irSchema:t});case "integer":case "number":return cf({irSchema:t,schema:r});case "object":return mf({context:e,irSchema:t,schema:r,state:n});case "string":return ff({irSchema:t});default:return ga({irSchema:t,schema:r,state:n})}},ga=({irSchema:e,schema:t,state:r})=>(e||(e=Tr({schema:t})),e.type="unknown",Nn({irSchema:e,schema:t,state:r}),e),Ie=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?df({context:e,schema:t,state:r}):t.enum?uf({context:e,schema:t,state:r}):t.allOf?lf({context:e,schema:t,state:r}):t.type||t.properties?gf({context:e,schema:t,state:r}):ga({schema:t,state:r})),ha=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[_(e)]=Ie({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var hf=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",jt=({context:e,name:t,schema:r})=>{if(xe(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref??"");if("in"in o&&o.in){let a="schema"in o?o.schema:{...o,in:void 0};return jt({context:e,name:t,schema:a})}return jt({context:e,name:t,schema:o})}if("in"in r){if(!r.in)return  false;let o="schema"in r?r.schema:{...r,in:void 0};return jt({context:e,name:t,schema:o})}for(let o in r.properties)if(xe(e.config.parser.pagination).test(o)){let i=r.properties[o];if(typeof i!="boolean"&&!("$ref"in i)){let p=Kr({schema:i});if(hf(p))return o}}for(let o of r.allOf??[]){let a=jt({context:e,name:t,schema:o});if(a)return a}return  false};var xf=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},bf=({context:e,method:t,operation:r,path:n,state:o})=>{let a={id:Ht({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(a.operationId=r.operationId),xf({irOperation:a,operation:r}),a},Of=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a})=>{let i=bf({context:e,method:t,operation:r,path:n,state:a});r.parameters&&(i.parameters=r.parameters);let p=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},m=[];for(let f of r.requestBody??[]){let l="$ref"in f?e.resolveRef(f.$ref):f,u=l.in==="body"?l.schema:{...l,format:l.type==="file"?"binary":l.format,required:void 0,type:l.type==="file"?"string":l.type},y=fo({mimeTypes:r.consumes,response:{schema:u}}),g=y.find(x=>x.type==="json")||y[0];if(g){let x=jt({context:e,name:"",schema:g.schema&&"$ref"in g.schema?{allOf:[{...g.schema}],description:l.description}:{description:l.description,...g.schema}}),S=Ie({context:e,schema:"$ref"in l?{allOf:[{...l,$ref:l.$ref,required:[],type:"string"}],description:l.description}:g.schema&&"$ref"in g.schema?{allOf:[{...g.schema}],description:l.description}:{description:l.description,...g.schema},state:void 0});c.mediaType=g.mediaType,l.in==="body"?c.schema=S:(c.schema.properties[l.name]=S,l.required&&m.push(l.name)),x&&(c.pagination=x),g.type&&(c.type=g.type);}l.required&&(p=true);}c.mediaType&&(m.length&&(c.schema.required=m),i.body=c,p&&(i.body.required=p));for(let f in r.responses){i.responses||(i.responses={});let l=r.responses[f],u="$ref"in l?e.resolveRef(l.$ref):l,y=fo({mimeTypes:r.produces?r.produces:["application/json"],response:u}),g=y.find(x=>x.type==="json")||y[0];g?i.responses[f]={mediaType:g.mediaType,schema:Ie({context:e,schema:{description:u.description,...ya({content:g})},state:void 0})}:i.responses[f]={schema:{description:u.description,type:f==="204"?"void":"unknown"}};}if(r.security){let f=[];for(let l of r.security)for(let u in l){let y=o.get(u);if(!y)continue;let g;if(y.type==="apiKey"&&(g=y),y.type==="basic"&&(g={description:y.description,scheme:"basic",type:"http"}),y.type==="oauth2")switch(g={description:y.description,flows:{},type:"oauth2"},y.flow){case "accessCode":g.flows.authorizationCode={authorizationUrl:y.authorizationUrl,scopes:y.scopes,tokenUrl:y.tokenUrl};break;case "application":g.flows.clientCredentials={scopes:y.scopes,tokenUrl:y.tokenUrl};break;case "implicit":g.flows.implicit={authorizationUrl:y.authorizationUrl,scopes:y.scopes};break;case "password":g.flows.password={scopes:y.scopes,tokenUrl:y.tokenUrl};break}g&&f.push(g);}f.length&&(i.security=f);}return i},Nt=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),e.ir.paths[n][t]=Of({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a});};var Sf=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},Tf=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},pt=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let n={};for(let o of r){let a="$ref"in o?e.dereference(o):o;if(a.in==="body"||a.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(a);continue}n[a.in]||(n[a.in]={}),n[a.in][a.name.toLocaleLowerCase()]=Rf({context:e,parameter:a});}return n},Rf=({context:e,parameter:t})=>{let r=t,n=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},o=jt({context:e,name:t.name,schema:n}),a=Tf(t.in),c={allowReserved:false,explode:Sf(t.collectionFormat),location:t.in,name:t.name,schema:Ie({context:e,schema:n,state:void 0}),style:a};return t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c};var xa=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",n=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let a=ze(e.config.input.path);t.length||a.protocol&&(t=[a.protocol]),r||(r=`${a.host}${a.port?`:${a.port}`:""}`);}t.length||(t=[""]);let o=t.map(a=>`${a?`${a}://`:""}${r}${n}`).filter(Boolean);o.length&&(e.ir.servers=o.map(a=>({url:a})));};var ba=e=>{let t=[],r=new Map;if(e.paths)for(let n of Object.entries(e.paths)){let o=n[0],a=n[1];for(let i of oe){if(i==="trace")continue;let p=a[i];if(!p)continue;let c=v({method:i,path:o});p.operationId&&(r.has(p.operationId)?t.push({code:"duplicate_key",context:{key:"operationId",value:p.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",o,i,"operationId"],severity:"error"}):r.set(p.operationId,c));}}return {issues:t,valid:!t.some(n=>n.severity==="error")}};var lo=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=ba(e.spec);Or({context:e,result:o});}if(gr(e.config.parser.filters)){let o=yr(e.config.parser.filters,e.spec),{graph:a}=Et(e.spec),{resourceMetadata:i}=xr(a),p=hr({filters:o,resourceMetadata:i});pa({...p,preserveOrder:o.preserveOrder,spec:e.spec});}br({context:e});let r={ids:new Map},n=new Map;for(let o in e.spec.securityDefinitions){let a=e.spec.securityDefinitions[o];n.set(o,a);}if(e.spec.definitions)for(let o in e.spec.definitions){let a=`#/definitions/${o}`,i=e.spec.definitions[o];ha({$ref:a,context:e,schema:i});}xa({context:e});for(let o in e.spec.paths){if(o.startsWith("x-"))continue;let a=e.spec.paths[o],i=a.$ref?{...e.resolveRef(a.$ref),...a}:a,p={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},c={context:e,operation:{...p,parameters:pt({context:e,operation:p,parameters:i.parameters})},path:o,securitySchemesMap:n,state:r};if(i.delete){let m=L({source:pt({context:e,operation:i.delete,parameters:i.delete.parameters}),target:c.operation.parameters});Nt({...c,method:"delete",operation:{...c.operation,...i.delete,parameters:m}});}if(i.get){let m=L({source:pt({context:e,operation:i.get,parameters:i.get.parameters}),target:c.operation.parameters});Nt({...c,method:"get",operation:{...c.operation,...i.get,parameters:m}});}if(i.head){let m=L({source:pt({context:e,operation:i.head,parameters:i.head.parameters}),target:c.operation.parameters});Nt({...c,method:"head",operation:{...c.operation,...i.head,parameters:m}});}if(i.options){let m=L({source:pt({context:e,operation:i.options,parameters:i.options.parameters}),target:c.operation.parameters});Nt({...c,method:"options",operation:{...c.operation,...i.options,parameters:m}});}if(i.patch){let m=L({source:pt({context:e,operation:i.patch,parameters:i.patch.parameters}),target:c.operation.parameters});Nt({...c,method:"patch",operation:{...c.operation,...i.patch,parameters:m}});}if(i.post){let m=L({source:pt({context:e,operation:i.post,parameters:i.post.parameters}),target:c.operation.parameters});Nt({...c,method:"post",operation:{...c.operation,...i.post,parameters:m}});}if(i.put){let m=L({source:pt({context:e,operation:i.put,parameters:i.put.parameters}),target:c.operation.parameters});Nt({...c,method:"put",operation:{...c.operation,...i.put,parameters:m}});}}};var Oa=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:o,schemas:a,spec:i})=>{if(i.components){if(i.components.parameters){let p={};if(r)for(let[c,m]of Object.entries(i.components.parameters))t.has(E("parameter",c))&&(p[c]=m);else for(let c of t){let{name:m}=ne(c),f=i.components.parameters[m];f&&(p[m]=f);}i.components.parameters=p;}if(i.components.requestBodies){let p={};if(r)for(let[c,m]of Object.entries(i.components.requestBodies))n.has(E("body",c))&&(p[c]=m);else for(let c of n){let{name:m}=ne(c),f=i.components.requestBodies[m];f&&(p[m]=f);}i.components.requestBodies=p;}if(i.components.responses){let p={};if(r)for(let[c,m]of Object.entries(i.components.responses))o.has(E("response",c))&&(p[c]=m);else for(let c of o){let{name:m}=ne(c),f=i.components.responses[m];f&&(p[m]=f);}i.components.responses=p;}if(i.components.schemas){let p={};if(r)for(let[c,m]of Object.entries(i.components.schemas))a.has(E("schema",c))&&(p[c]=m);else for(let c of a){let{name:m}=ne(c),f=i.components.schemas[m];f&&(p[m]=f);}i.components.schemas=p;}}if(i.paths)for(let p of Object.entries(i.paths)){let c=p[0],m=p[1];for(let f of oe){if(!m[f])continue;let u=E("operation",v({method:f,path:c}));e.has(u)||delete m[f];}Object.keys(m).length||delete i.paths[c];}};var Sa=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&at({mediaType:t})?{...r,format:"binary"}:r:at({mediaType:t})?{format:"binary",type:"string"}:void 0},ct=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:Sr({mediaType:r})});return t};var Ut=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},If=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},Cn=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=k(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=k(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=k(e.accessScopes,["both"]));},Af=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let a=pe({context:e,schema:r.items,state:n});if(t.accessScopes=k(t.accessScopes,a.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(a);else if("$ref"in r.items)o.push(a);else {let i=r.items.allOf||r.items.anyOf||r.items.oneOf;i&&i.length>1&&!r.items.nullable?t={...t,...a}:o.push(a);}}return t=B({items:o,schema:t}),t},Pf=({irSchema:e={}})=>(e.type="boolean",e),Ef=({irSchema:e={},schema:t})=>(e.type=t.type,e),jf=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let a in r.properties){let i=r.properties[a];if(typeof i!="boolean"){let p=pe({context:e,schema:i,state:{...n,isProperty:true}});t.accessScopes=k(t.accessScopes,p.accessScopes),o[a]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")n.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let a=pe({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=a;}return r.required&&(t.required=r.required),t},Nf=({irSchema:e={}})=>(e.type="string",e),Ct=({schema:e})=>{let t={};return If({irSchema:t,schema:e}),t},Cf=({context:e,schema:t,state:r})=>{let n=Ct({schema:t}),o=[],a=Ut({schema:t}),i=t.allOf;for(let p of i){let m="$ref"in p?r:{...r,inAllOf:true},f=pe({context:e,schema:p,state:m});if(n.accessScopes=k(n.accessScopes,f.accessScopes),t.required&&(f.required?f.required=[...f.required,...t.required]:f.required=t.required),o.push(f),"$ref"in p){let l=e.resolveRef(p.$ref);if(l.discriminator&&r.$ref){let y=Ze(r.$ref,l.discriminator.mapping).map(x=>({const:x,type:"string"})),g={properties:{[l.discriminator.propertyName]:y.length>1?{items:y,logicalOperator:"or"}:y[0]},type:"object"};l.required?.includes(l.discriminator.propertyName)&&(g.required=[l.discriminator.propertyName]),o.push(g);}if(!r.circularReferenceTracker.has(p.$ref)){let u=pe({context:e,schema:l,state:{...r,$ref:p.$ref}});n.accessScopes=k(n.accessScopes,u.accessScopes);}}}if(a==="object"){let p=Qt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=k(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of i){let f="$ref"in m?e.resolveRef(m.$ref):m;if(Ut({schema:f})==="object"){let l=Qt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=k(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(n=B({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t.nullable){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},kf=({context:e,schema:t,state:r})=>{let n=Ct({schema:t}),o=[],a=Ut({schema:t}),i=t.anyOf;for(let p of i){let c=pe({context:e,schema:p,state:r});if(n.accessScopes=k(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in p){let f=Ze(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(t.nullable&&o.push({type:"null"}),n=B({items:o,mutateSchemaOneItem:true,schema:n}),a==="object"){let p=Qt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=k(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},vf=({context:e,schema:t,state:r})=>{let n=Ct({schema:t});n.type="enum";let o=[];for(let[a,i]of t.enum.entries()){let p=typeof i,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(i)?c="array":i===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${i}" for enum`,t.enum),!c)continue;let m=Qt({context:e,schema:{description:t["x-enum-descriptions"]?.[a],title:t["x-enum-varnames"]?.[a]??t["x-enumNames"]?.[a],type:c==="null"?"string":c},state:r});m.const=i,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=k(n.accessScopes,m.accessScopes),o.push(m);}return n=B({items:o,schema:n}),n},wf=({context:e,schema:t,state:r})=>{let n=Ct({schema:t}),o=[],a=Ut({schema:t}),i=t.oneOf;for(let p of i){let c=pe({context:e,schema:p,state:r});if(n.accessScopes=k(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in p){let f=Ze(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(t.nullable&&o.push({type:"null"}),n=B({items:o,mutateSchemaOneItem:true,schema:n}),a==="object"){let p=Qt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=k(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},qf=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let o=e.resolveRef(t.$ref),a=pe({context:e,schema:o,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=k(n.accessScopes,a.accessScopes);}return n},$f=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=Ct({schema:r}));let o={};Cn({irSchema:o,schema:r,state:n}),o.default===null&&delete o.default;let a=[Qt({context:e,irSchema:o,schema:r,state:n}),{type:"null"}];return t=B({items:a,schema:t}),t},Mf=({context:e,schema:t,state:r})=>{let n=Ct({schema:t});Cn({irSchema:n,schema:t,state:r});let o=Ut({schema:t});return o?t.nullable?$f({context:e,irSchema:n,schema:{...t,type:o},state:r}):Qt({context:e,irSchema:n,schema:{...t,type:o},state:r}):n},Qt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=Ct({schema:r}),Cn({irSchema:t,schema:r,state:n})),r.type){case "array":return Af({context:e,irSchema:t,schema:r,state:n});case "boolean":return Pf({irSchema:t});case "integer":case "number":return Ef({irSchema:t,schema:r});case "object":return jf({context:e,irSchema:t,schema:r,state:n});case "string":return Nf({irSchema:t});default:return Ta({irSchema:t,schema:r,state:n})}},Ta=({irSchema:e,schema:t,state:r})=>(e||(e=Ct({schema:t})),e.type="unknown",Cn({irSchema:e,schema:t,state:r}),e),pe=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?qf({context:e,schema:t,state:r}):t.enum?vf({context:e,schema:t,state:r}):t.allOf?Cf({context:e,schema:t,state:r}):t.anyOf?kf({context:e,schema:t,state:r}):t.oneOf?wf({context:e,schema:t,state:r}):t.type||t.properties?Mf({context:e,schema:t,state:r}):Ta({schema:t,state:r})),Ra=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[_(e)]=pe({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Ff=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",Xt=({context:e,name:t,schema:r})=>{if(xe(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let a;if("in"in o&&(a=o.schema),!a){let i=ct({content:o.content}),p=i.find(c=>c.type==="json")||i[0];p?.schema&&(a=p.schema);}return a?Xt({context:e,name:t,schema:a}):false}return Xt({context:e,name:t,schema:o})}for(let o in r.properties)if(xe(e.config.parser.pagination).test(o)){let i=r.properties[o];if(typeof i!="boolean"&&!("$ref"in i)){let p=Ut({schema:i});if(Ff(p))return o}}for(let o of r.allOf??[]){let a=Xt({context:e,name:t,schema:o});if(a)return a}return  false};var Lf=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Df=({context:e,method:t,operation:r,path:n,state:o})=>{let a={id:Ht({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(a.operationId=r.operationId),Lf({irOperation:a,operation:r}),a},Vf=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a})=>{let i=Df({context:e,method:t,operation:r,path:n,state:a});if(r.parameters&&(i.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=ct({content:p.content}),m=c.find(f=>f.type==="json")||c[0];if(m){let f=Xt({context:e,name:"",schema:m.schema&&"$ref"in m.schema?{allOf:[{...m.schema}],description:p.description}:{description:p.description,...m.schema}});i.body={mediaType:m.mediaType,schema:pe({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:p.description}:m.schema&&"$ref"in m.schema?{allOf:[{...m.schema}],description:p.description}:{description:p.description,...m.schema},state:void 0})},f&&(i.body.pagination=f),p.required&&(i.body.required=p.required),m.type&&(i.body.type=m.type);}}for(let p in r.responses){i.responses||(i.responses={});let c=r.responses[p],m="$ref"in c?e.resolveRef(c.$ref):c,f=ct({content:m.content}),l=f.find(u=>u.type==="json")||f[0];l?i.responses[p]={mediaType:l.mediaType,schema:pe({context:e,schema:{description:m.description,...Sa({content:l})},state:void 0})}:i.responses[p]={schema:{description:m.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let c of r.security)for(let m in c){let f=o.get(m);f&&p.push(f);}p.length&&(i.security=p);}return i},mt=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=Vf({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a});};var _f=e=>{switch(e){case "query":return  false;default:return}},Bf=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},zf=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Ue=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let o="$ref"in n?e.dereference(n):n;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=Ia({context:e,parameter:o});}return r},Ia=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=ct({content:t.content}),f=m.find(l=>l.type==="json")||m[0];f&&(r=f.schema);}let n=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},o=Xt({context:e,name:t.name,schema:n}),a=t.style||zf(t.in),i=t.explode!==void 0?t.explode:Bf(a),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:_f(t.in),explode:i,location:t.in,name:t.name,schema:pe({context:e,schema:n,state:void 0}),style:a};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},Aa=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[_(e)]=Ia({context:t,parameter:r});};var Kf=({context:e,requestBody:t})=>{let r=ct({content:t.content}),n=r.find(p=>p.type==="json")||r[0],o=n?n.schema:void 0,a={description:t.description,...o},i={schema:pe({context:e,schema:a,state:void 0})};return t.description&&(i.description=t.description),t.required&&(i.required=t.required),i},Pa=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[_(e)]=Kf({context:t,requestBody:r});};var Ea=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=ze(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var ja=e=>{let t=[],r=new Map;if(e.paths)for(let n of Object.entries(e.paths)){let o=n[0],a=n[1];for(let i of oe){let p=a[i];if(!p)continue;let c=v({method:i,path:o});p.operationId&&(r.has(p.operationId)?t.push({code:"duplicate_key",context:{key:"operationId",value:p.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",o,i,"operationId"],severity:"error"}):r.set(p.operationId,c));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&t.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let n=0;n<e.servers.length;n++){let o=e.servers[n];!o||typeof o!="object"?t.push({code:"invalid_type",context:{actual:typeof o,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",n],severity:"error"}):o.url||t.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",n],severity:"error"});}}return {issues:t,valid:!t.some(n=>n.severity==="error")}};var uo=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=ja(e.spec);Or({context:e,result:o});}if(gr(e.config.parser.filters)){let o=yr(e.config.parser.filters,e.spec),{graph:a}=Et(e.spec),{resourceMetadata:i}=xr(a),p=hr({filters:o,resourceMetadata:i});Oa({...p,preserveOrder:o.preserveOrder,spec:e.spec});}br({context:e});let r={ids:new Map},n=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[o],i="$ref"in a?e.resolveRef(a.$ref):a;n.set(o,i);}for(let o in e.spec.components.parameters){let a=`#/components/parameters/${o}`,i=e.spec.components.parameters[o],p="$ref"in i?e.resolveRef(i.$ref):i;Aa({$ref:a,context:e,parameter:p});}for(let o in e.spec.components.requestBodies){let a=`#/components/requestBodies/${o}`,i=e.spec.components.requestBodies[o],p="$ref"in i?e.resolveRef(i.$ref):i;Pa({$ref:a,context:e,requestBody:p});}for(let o in e.spec.components.schemas){let a=`#/components/schemas/${o}`,i=e.spec.components.schemas[o];Ra({$ref:a,context:e,schema:i});}}Ea({context:e});for(let o in e.spec.paths){let a=e.spec.paths[o],i=a.$ref?{...e.resolveRef(a.$ref),...a}:a,p={context:e,operation:{description:i.description,parameters:Ue({context:e,parameters:i.parameters}),security:e.spec.security,servers:i.servers,summary:i.summary},path:o,securitySchemesMap:n,state:r};i.delete&&mt({...p,method:"delete",operation:{...p.operation,...i.delete,parameters:L({source:Ue({context:e,parameters:i.delete.parameters}),target:p.operation.parameters})}}),i.get&&mt({...p,method:"get",operation:{...p.operation,...i.get,parameters:L({source:Ue({context:e,parameters:i.get.parameters}),target:p.operation.parameters})}}),i.head&&mt({...p,method:"head",operation:{...p.operation,...i.head,parameters:L({source:Ue({context:e,parameters:i.head.parameters}),target:p.operation.parameters})}}),i.options&&mt({...p,method:"options",operation:{...p.operation,...i.options,parameters:L({source:Ue({context:e,parameters:i.options.parameters}),target:p.operation.parameters})}}),i.patch&&mt({...p,method:"patch",operation:{...p.operation,...i.patch,parameters:L({source:Ue({context:e,parameters:i.patch.parameters}),target:p.operation.parameters})}}),i.post&&mt({...p,method:"post",operation:{...p.operation,...i.post,parameters:L({source:Ue({context:e,parameters:i.post.parameters}),target:p.operation.parameters})}}),i.put&&mt({...p,method:"put",operation:{...p.operation,...i.put,parameters:L({source:Ue({context:e,parameters:i.put.parameters}),target:p.operation.parameters})}}),i.trace&&mt({...p,method:"trace",operation:{...p.operation,...i.trace,parameters:L({source:Ue({context:e,parameters:i.trace.parameters}),target:p.operation.parameters})}});}};var Na=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:o,schemas:a,spec:i})=>{if(i.components){if(i.components.parameters){let p={};if(r)for(let[c,m]of Object.entries(i.components.parameters))t.has(E("parameter",c))&&(p[c]=m);else for(let c of t){let{name:m}=ne(c),f=i.components.parameters[m];f&&(p[m]=f);}i.components.parameters=p;}if(i.components.requestBodies){let p={};if(r)for(let[c,m]of Object.entries(i.components.requestBodies))n.has(E("body",c))&&(p[c]=m);else for(let c of n){let{name:m}=ne(c),f=i.components.requestBodies[m];f&&(p[m]=f);}i.components.requestBodies=p;}if(i.components.responses){let p={};if(r)for(let[c,m]of Object.entries(i.components.responses))o.has(E("response",c))&&(p[c]=m);else for(let c of o){let{name:m}=ne(c),f=i.components.responses[m];f&&(p[m]=f);}i.components.responses=p;}if(i.components.schemas){let p={};if(r)for(let[c,m]of Object.entries(i.components.schemas))a.has(E("schema",c))&&(p[c]=m);else for(let c of a){let{name:m}=ne(c),f=i.components.schemas[m];f&&(p[m]=f);}i.components.schemas=p;}}if(i.paths)for(let p of Object.entries(i.paths)){let c=p[0],m=p[1];for(let f of oe){if(!m[f])continue;let u=E("operation",v({method:f,path:c}));e.has(u)||delete m[f];}Object.keys(m).length||delete i.paths[c];}};var Ca=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&at({mediaType:t})?{...r,format:"binary"}:r:at({mediaType:t})?{format:"binary",type:"string"}:void 0},ft=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:Sr({mediaType:r})});return t};var Qe=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],Wf=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.example&&(e.example=t.example),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},kn=({irSchema:e,schema:t})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum!==void 0&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum!==void 0&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?e.accessScope="read":t.writeOnly&&(e.accessScope="write");},Hf=({context:e,irSchema:t={},schema:r,state:n})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let o=[];for(let a of r.prefixItems??[]){let i=se({context:e,schema:a,state:n});o.push(i);}if(r.items){let a=se({context:e,schema:r.items,state:n});if(!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(a);else {let i=r.items.allOf||r.items.anyOf||r.items.oneOf;i&&i.length>1&&!Qe({schema:r.items}).includes("null")?t={...t,...a}:o.push(a);}}return t=B({items:o,schema:t}),t},Zf=({irSchema:e={}})=>(e.type="boolean",e),Uf=({irSchema:e={}})=>(e.type="null",e),Qf=({irSchema:e={},schema:t})=>(e.type=t.type,e),Xf=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let a in r.properties){let i=r.properties[a];if(typeof i!="boolean"){let p=se({context:e,schema:i,state:{...n,isProperty:true}});o[a]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")n.inAllOf&&r.additionalProperties===false&&(!r.properties||Object.keys(r.properties).length===0)||(t.additionalProperties={type:r.additionalProperties?"unknown":"never"});else {let a=se({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=a;}return r.propertyNames&&(t.propertyNames=se({context:e,schema:r.propertyNames,state:n})),r.required&&(t.required=r.required),t},Gf=({irSchema:e={}})=>(e.type="string",e),lt=({schema:e})=>{let t={};return Wf({irSchema:t,schema:e}),t},Jf=({context:e,schema:t,state:r})=>{let n=lt({schema:t}),o=[],a=Qe({schema:t}),i=t.allOf;for(let p of i){let m="$ref"in p?r:{...r,inAllOf:true},f=se({context:e,schema:p,state:m});if(t.required&&(f.required?f.required=[...f.required,...t.required]:f.required=t.required),o.push(f),p.$ref){let l=e.resolveRef(p.$ref);if(l.discriminator&&r.$ref){let y=Ze(r.$ref,l.discriminator.mapping).map(x=>({const:x,type:"string"})),g={properties:{[l.discriminator.propertyName]:y.length>1?{items:y,logicalOperator:"or"}:y[0]},type:"object"};l.required?.includes(l.discriminator.propertyName)&&(g.required=[l.discriminator.propertyName]),o.push(g);}r.circularReferenceTracker.has(p.$ref)||se({context:e,schema:l,state:{...r,$ref:p.$ref}});}}if(a.includes("object")){let p=Gt({context:e,schema:{...t,type:"object"},state:r});if(p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of i){let f=m.$ref?e.resolveRef(m.$ref):m;if(Qe({schema:f}).includes("object")){let l=Gt({context:e,schema:{...f,type:"object"},state:r});if(l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(n=B({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),a.includes("null")){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"};}return n},Yf=({context:e,schema:t,state:r})=>{let n=lt({schema:t}),o=[],a=Qe({schema:t}),i=t.anyOf;for(let p of i){let c=se({context:e,schema:p,state:r});if(t.discriminator&&p.$ref){let f=Ze(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(a.includes("null")&&o.push({type:"null"}),n=B({items:o,mutateSchemaOneItem:true,schema:n}),a.includes("object")){let p=Gt({context:e,schema:{...t,type:"object"},state:r});p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},el=({context:e,schema:t,state:r})=>{let n=lt({schema:t});n.type="enum";let o=[],a=Qe({schema:t});for(let[i,p]of t.enum.entries()){let c=typeof p,m;if(c==="string"||c==="number"||c==="boolean"?m=c:c==="object"&&Array.isArray(p)?m="array":p===null?a.includes("null")&&(m="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${p}" for enum`,t.enum),!m)continue;let f=Gt({context:e,schema:{const:p,description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:m},state:r});o.push(f);}return n=B({items:o,schema:n}),n},tl=({context:e,schema:t,state:r})=>{let n=lt({schema:t}),o=[],a=Qe({schema:t}),i=t.oneOf;for(let p of i){let c=se({context:e,schema:p,state:r});if(t.discriminator&&p.$ref){let f=Ze(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(a.includes("null")&&o.push({type:"null"}),n=B({items:o,mutateSchemaOneItem:true,schema:n}),a.includes("object")){let p=Gt({context:e,schema:{...t,type:"object"},state:r});p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},rl=({context:e,schema:t,state:r})=>{let n=lt({schema:t}),o={};if(o.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let i=e.resolveRef(t.$ref);se({context:e,schema:i,state:{...r,$ref:t.$ref,isProperty:false}});}let a=[];return a.push(o),t.type&&typeof t.type!="string"&&t.type.includes("null")&&a.push({type:"null"}),n=B({items:a,mutateSchemaOneItem:true,schema:n}),n},Gt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=lt({schema:r}),kn({irSchema:t,schema:r})),r.type){case "array":return Hf({context:e,irSchema:t,schema:r,state:n});case "boolean":return Zf({irSchema:t});case "integer":case "number":return Qf({irSchema:t,schema:r});case "null":return Uf({irSchema:t});case "object":return Xf({context:e,irSchema:t,schema:r,state:n});case "string":return Gf({irSchema:t});default:return ka({irSchema:t,schema:r})}},nl=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=lt({schema:r}));let o={};kn({irSchema:o,schema:r}),r.type.includes("null")&&o.default===null&&delete o.default;let a=[];for(let i of r.type)if(i==="null")a.push({type:"null"});else {let p=Gt({context:e,irSchema:o,schema:{...r,type:i},state:n});a.push(p);}return t=B({items:a,schema:t}),t},sl=({context:e,schema:t,state:r})=>{let n=lt({schema:t});kn({irSchema:n,schema:t});let o=Qe({schema:t});return o.length===1?Gt({context:e,irSchema:n,schema:{...t,type:o[0]},state:r}):nl({context:e,irSchema:n,schema:{...t,type:o},state:r})},ka=({irSchema:e,schema:t})=>(e||(e=lt({schema:t})),e.type="unknown",kn({irSchema:e,schema:t}),e),se=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?rl({context:e,schema:t,state:r}):t.enum?el({context:e,schema:t,state:r}):t.allOf?Jf({context:e,schema:t,state:r}):t.anyOf?Yf({context:e,schema:t,state:r}):t.oneOf?tl({context:e,schema:t,state:r}):t.type||t.properties?sl({context:e,schema:t,state:r}):ka({schema:t})),va=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[_(e)]=se({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var wa=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),Jt=({context:e,name:t,schema:r})=>{if(xe(e.config.parser.pagination).test(t))return  true;if(r.$ref){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let a;if("in"in o&&(a=o.schema),!a){let i=ft({content:o.content}),p=i.find(c=>c.type==="json")||i[0];p?.schema&&(a=p.schema);}return a?Jt({context:e,name:t,schema:a}):false}return Jt({context:e,name:t,schema:o})}for(let o in r.properties)if(xe(e.config.parser.pagination).test(o)){let i=r.properties[o];if(typeof i!="boolean"){let p=Qe({schema:i});if(!p.length){let m=(i.anyOf??i.oneOf??[]).filter(f=>f.type!=="null");if(m.length===1){let f=Qe({schema:m[0]});if(wa(f))return o}}if(wa(p))return o}}for(let o of r.allOf??[]){let a=Jt({context:e,name:t,schema:o});if(a)return a}return  false};var ol=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},il=({context:e,method:t,operation:r,path:n,state:o})=>{let a={id:Ht({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(a.operationId=r.operationId),ol({irOperation:a,operation:r}),a},al=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a})=>{let i=il({context:e,method:t,operation:r,path:n,state:a});if(r.parameters&&(i.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=ft({content:p.content}),m=c.find(f=>f.type==="json")||c[0];if(m){let f=Jt({context:e,name:"",schema:{description:p.description,...m.schema}});i.body={mediaType:m.mediaType,schema:se({context:e,schema:{description:p.description,..."$ref"in r.requestBody?r.requestBody:m.schema},state:void 0})},f&&(i.body.pagination=f),p.required&&(i.body.required=p.required),m.type&&(i.body.type=m.type);}}for(let p in r.responses){i.responses||(i.responses={});let c=r.responses[p],m="$ref"in c?e.resolveRef(c.$ref):c,f=ft({content:m.content}),l=f.find(u=>u.type==="json")||f[0];l?i.responses[p]={mediaType:l.mediaType,schema:se({context:e,schema:{description:m.description,...Ca({content:l})},state:void 0})}:i.responses[p]={schema:{description:m.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let c of r.security)for(let m in c){let f=o.get(m);f&&p.push(f);}p.length&&(i.security=p);}return i},ut=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=al({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:a});};var pl=e=>{switch(e){case "query":return  false;default:return}},cl=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},ml=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Xe=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let o="$ref"in n?e.dereference(n):n;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=qa({context:e,parameter:o});}return r},qa=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=ft({content:t.content}),f=m.find(l=>l.type==="json")||m[0];f&&(r=f.schema);}let n={deprecated:t.deprecated,description:t.description,...r},o=Jt({context:e,name:t.name,schema:n}),a=t.style||ml(t.in),i=t.explode!==void 0?t.explode:cl(a),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:pl(t.in),explode:i,location:t.in,name:t.name,schema:se({context:e,schema:n,state:void 0}),style:a};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},$a=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[_(e)]=qa({context:t,parameter:r});};var fl=({context:e,requestBody:t})=>{let r=ft({content:t.content}),n=r.find(p=>p.type==="json")||r[0],o=n?n.schema:void 0,a={description:t.description,...o},i={schema:se({context:e,schema:a,state:void 0})};return t.description&&(i.description=t.description),t.required&&(i.required=t.required),i},Ma=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[_(e)]=fl({context:t,requestBody:r});};var Fa=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=ze(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var La=e=>{let t=[],r=new Map;if(e.paths)for(let n of Object.entries(e.paths)){let o=n[0],a=n[1];for(let i of oe){let p=a[i];if(!p)continue;let c=v({method:i,path:o});p.operationId&&(r.has(p.operationId)?t.push({code:"duplicate_key",context:{key:"operationId",value:p.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",o,i,"operationId"],severity:"error"}):r.set(p.operationId,c));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&t.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let n=0;n<e.servers.length;n++){let o=e.servers[n];!o||typeof o!="object"?t.push({code:"invalid_type",context:{actual:typeof o,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",n],severity:"error"}):o.url||t.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",n],severity:"error"});}}return {issues:t,valid:!t.some(n=>n.severity==="error")}};var yo=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=La(e.spec);Or({context:e,result:o});}if(gr(e.config.parser.filters)){let o=yr(e.config.parser.filters,e.spec),{graph:a}=Et(e.spec),{resourceMetadata:i}=xr(a),p=hr({filters:o,resourceMetadata:i});Na({...p,preserveOrder:o.preserveOrder,spec:e.spec});}br({context:e});let r={ids:new Map},n=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[o],i="$ref"in a?e.resolveRef(a.$ref):a;n.set(o,i);}for(let o in e.spec.components.parameters){let a=`#/components/parameters/${o}`,i=e.spec.components.parameters[o],p="$ref"in i?e.resolveRef(i.$ref):i;$a({$ref:a,context:e,parameter:p});}for(let o in e.spec.components.requestBodies){let a=`#/components/requestBodies/${o}`,i=e.spec.components.requestBodies[o],p="$ref"in i?e.resolveRef(i.$ref):i;Ma({$ref:a,context:e,requestBody:p});}for(let o in e.spec.components.schemas){let a=`#/components/schemas/${o}`,i=e.spec.components.schemas[o];va({$ref:a,context:e,schema:i});}}Fa({context:e});for(let o in e.spec.paths){let a=e.spec.paths[o],i=a.$ref?{...e.resolveRef(a.$ref),...a}:a,p={context:e,operation:{description:i.description,parameters:Xe({context:e,parameters:i.parameters}),security:e.spec.security,servers:i.servers,summary:i.summary},path:o,securitySchemesMap:n,state:r};i.delete&&ut({...p,method:"delete",operation:{...p.operation,...i.delete,parameters:L({source:Xe({context:e,parameters:i.delete.parameters}),target:p.operation.parameters})}}),i.get&&ut({...p,method:"get",operation:{...p.operation,...i.get,parameters:L({source:Xe({context:e,parameters:i.get.parameters}),target:p.operation.parameters})}}),i.head&&ut({...p,method:"head",operation:{...p.operation,...i.head,parameters:L({source:Xe({context:e,parameters:i.head.parameters}),target:p.operation.parameters})}}),i.options&&ut({...p,method:"options",operation:{...p.operation,...i.options,parameters:L({source:Xe({context:e,parameters:i.options.parameters}),target:p.operation.parameters})}}),i.patch&&ut({...p,method:"patch",operation:{...p.operation,...i.patch,parameters:L({source:Xe({context:e,parameters:i.patch.parameters}),target:p.operation.parameters})}}),i.post&&ut({...p,method:"post",operation:{...p.operation,...i.post,parameters:L({source:Xe({context:e,parameters:i.post.parameters}),target:p.operation.parameters})}}),i.put&&ut({...p,method:"put",operation:{...p.operation,...i.put,parameters:L({source:Xe({context:e,parameters:i.put.parameters}),target:p.operation.parameters})}}),i.trace&&ut({...p,method:"trace",operation:{...p.operation,...i.trace,parameters:L({source:Xe({context:e,parameters:i.trace.parameters}),target:p.operation.parameters})}});}};var vn=["connect","delete","get","head","options","patch","post","put","trace"];function wn(e="1.0"){return String(e).replace(/^v/gi,"")}var Rr="#/components/parameters/",qn="#/components/schemas/";var Ir=({config:e,name:t})=>{let r=e.plugins["@hey-api/sdk"];if(r?.config.classNameBuilder){let n="";return typeof r.config.classNameBuilder=="function"?n=r.config.classNameBuilder(t):n=r.config.classNameBuilder.replace("{{name}}",t),n}return t},go=e=>R().plugins["@hey-api/typescript"]?.config.style==="PascalCase"?j({case:"PascalCase",value:e}):e,Da=e=>{let t=go(e);return ve(t).replace(le,"_$1")};var Va=(e,t)=>{if(e.enum&&!t.includes("boolean"))return "enum"},ho=e=>Ar(e).includes("null"),kt=e=>e.nullable===true||ho(e),Ar=({type:e})=>Array.isArray(e)?e:e?[e]:[];var Hr=e=>e.trim().replace(/^#\/definitions\//,"").replace(/^#\/parameters\//,"").replace(/^#\/responses\//,"").replace(/^#\/securityDefinitions\//,"").replace(/^#\/components\/schemas\//,"").replace(/^#\/components\/responses\//,"").replace(/^#\/components\/parameters\//,"").replace(/^#\/components\/examples\//,"").replace(/^#\/components\/requestBodies\//,"").replace(/^#\/components\/headers\//,"").replace(/^#\/components\/securitySchemes\//,"").replace(/^#\/components\/links\//,"").replace(/^#\/components\/callbacks\//,"");var _a=(e,t)=>{if(t==="binary")return "binary";switch(e){case "any":case "object":case "unknown":return "unknown";case "array":return "unknown[]";case "boolean":return "boolean";case "byte":case "double":case "float":case "int":case "integer":case "long":case "number":case "short":return "number";case "char":case "date":case "date-time":case "password":case "string":return "string";case "file":return "binary";case "null":return "null";case "void":return "void";default:return}},Ba=/(?<!`1)\[.*\]$/g,P=({debug:e,format:t,type:r="unknown"})=>{let n={$refs:[],base:"unknown",imports:[],isNullable:false,template:null,type:"unknown"};if(Array.isArray(r)){let i=r.filter(p=>p!=="null").map(p=>_a(p,t)).filter(Boolean).join(" | ");return n.type=i,n.base=i,n.isNullable=ho({type:r}),n}let o=_a(r,t);if(o)return n.type=o,n.base=o,n;let a=decodeURIComponent(Hr(r));if(Ba.lastIndex=0,Ba.test(a)){let i=a.match(/(.*?)\[(.*)\]$/);if(i?.length){let p=P({debug:e,type:ve(i[1])}),c=P({debug:e,type:ve(i[2])});return p.type==="unknown[]"?(n.type=`${c.type}[]`,n.base=`${c.type}`,p.$refs=[],p.imports=[]):c.type?(n.type=`${p.type}<${c.type}>`,n.base=p.type,n.template=c.type):(n.type=p.type,n.base=p.type,n.template=p.type),n.$refs=[...n.$refs,...p.$refs,...c.$refs],n.imports=[...n.imports,...p.imports,...c.imports],n}}if(a){let i=go(ve(a));return r.startsWith(Rr)&&(i=`Parameter${i}`),n.type=i,n.base=i,r.startsWith("#")&&(n.$refs=[...n.$refs,decodeURIComponent(r)]),n.imports=[...n.imports,i],n}return n};function Ge(e,t,r){return r.indexOf(e)===t}var Pr=(e,t)=>{if(!Array.isArray(t))return [];let r=(e["x-enum-descriptions"]??[]).filter(o=>typeof o=="string"),n=(e["x-enum-varnames"]??e["x-enumNames"]??[]).filter(o=>typeof o=="string");return t.filter(Ge).filter(o=>typeof o=="number"||typeof o=="string").map((o,a)=>({customDescription:r[a],customName:n[a],description:void 0,value:o}))};var te=e=>e?.replace(/\\/g,"\\\\").replace(/'/g,"\\'");var $n=({definition:e,getModel:t,openApi:r,types:n})=>{let o=[];return Object.entries(e.properties??{}).forEach(([a,i])=>{let p=!!e.required?.includes(a);if(i.$ref){let c=P({type:i.$ref});o.push({$refs:[],base:c.base,description:i.description||null,enum:[],enums:[],exclusiveMaximum:i.exclusiveMaximum,exclusiveMinimum:i.exclusiveMinimum,export:"reference",format:i.format,imports:c.imports,in:"",isDefinition:false,isNullable:i["x-nullable"]===true,isReadOnly:i.readOnly===true,isRequired:p,link:null,maxItems:i.maxItems,maxLength:i.maxLength,maxProperties:i.maxProperties,maximum:i.maximum,minItems:i.minItems,minLength:i.minLength,minProperties:i.minProperties,minimum:i.minimum,multipleOf:i.multipleOf,name:Oe(a),pattern:te(i.pattern),properties:[],template:c.template,type:c.type,uniqueItems:i.uniqueItems});}else {let c=t({definition:i,openApi:r,types:n});o.push({$refs:[],base:c.base,description:i.description||null,enum:c.enum,enums:c.enums,exclusiveMaximum:i.exclusiveMaximum,exclusiveMinimum:i.exclusiveMinimum,export:c.export,format:i.format,imports:c.imports,in:"",isDefinition:false,isNullable:i["x-nullable"]===true,isReadOnly:i.readOnly===true,isRequired:p,link:c.link,maxItems:i.maxItems,maxLength:i.maxLength,maxProperties:i.maxProperties,maximum:i.maximum,minItems:i.minItems,minLength:i.minLength,minProperties:i.minProperties,minimum:i.minimum,multipleOf:i.multipleOf,name:Oe(a),pattern:te(i.pattern),properties:c.properties,template:c.template,type:c.type,uniqueItems:i.uniqueItems});}}),o};var ll=/~1/g,ul=/~0/g;function W(e,t){if(t.$ref){let r=t.$ref.replace(/^#/g,"").split("/").filter(Boolean),n=e;return r.forEach(o=>{let a=decodeURIComponent(o.replace(ll,"/").replace(ul,"~"));if(n.hasOwnProperty(a))n=n[a];else throw new Error(`Could not find reference: "${t.$ref}"`)}),n}return t}var za=({definitions:e,getModel:t,openApi:r,required:n,types:o})=>e.reduce((a,i)=>{if(i.$ref){let p=W(r,i);return [...a,...t({definition:p,openApi:r,types:o}).properties]}return [...a,...t({definition:i,openApi:r,types:o}).properties]},[]).filter(a=>!a.isRequired&&n.includes(a.name)).map(a=>({...a,isRequired:true}));var Ka=({definition:e,definitions:t,getModel:r,openApi:n,type:o,types:a})=>{let i={$refs:[],enums:[],export:o,imports:[],properties:[]},p=[];if(t.map(c=>r({definition:c,openApi:n,types:a})).filter(c=>{let m=c.properties.length,f=c.enums.length;return !(c.type==="unknown"&&!m&&!f)}).forEach(c=>{i.imports.push(...c.imports),i.enums.push(...c.enums),i.properties.push(c);}),e.required&&o==="all-of"){let c=za({definitions:t,getModel:r,openApi:n,required:e.required,types:a});c.forEach(m=>{i.imports.push(...m.imports),i.enums.push(...m.enums);}),p.push(...c);}if(e.properties){let c=$n({definition:e,getModel:r,openApi:n,types:a});c.forEach(m=>{i.imports.push(...m.imports),i.enums.push(...m.enums),m.export==="enum"&&i.enums.push(m);}),p.push(...c);}return p.length&&i.properties.push({$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:p,template:null,type:"unknown"}),i};var Je=({definition:e,isDefinition:t=false,meta:r,openApi:n,types:o})=>{let a={$refs:[],base:"unknown",description:e.description||null,enum:[],enums:[],exclusiveMaximum:e.exclusiveMaximum,exclusiveMinimum:e.exclusiveMinimum,export:"interface",format:e.format,imports:[],in:"",isDefinition:t,isNullable:e["x-nullable"]===true,isReadOnly:e.readOnly===true,isRequired:false,link:null,maxItems:e.maxItems,maxLength:e.maxLength,maxProperties:e.maxProperties,maximum:e.maximum,meta:r,minItems:e.minItems,minLength:e.minLength,minProperties:e.minProperties,minimum:e.minimum,multipleOf:e.multipleOf,name:r?.name??"",pattern:te(e.pattern),properties:[],template:null,type:"unknown",uniqueItems:e.uniqueItems};if(e.$ref){let i=P({type:e.$ref});return a.export="reference",a.type=i.type,a.base=i.base,a.template=i.template,a.imports.push(...i.imports),a}if(e.enum&&e.type!=="boolean"){let i=Pr(e,e.enum);if(i.length)return a.base="string",a.enum=[...a.enum,...i],a.export="enum",a.type="string",a}if(e.type==="array"&&e.items)if(e.items.$ref){let i=P({type:e.items.$ref});return a.export="array",a.type=i.type,a.base=i.base,a.template=i.template,a.imports.push(...i.imports),a}else {let i=Je({definition:e.items,openApi:n,types:o});return a.export="array",a.type=i.type,a.base=i.base,a.template=i.template,a.link=i,a.imports.push(...i.imports),a}if(e.type==="object"&&typeof e.additionalProperties=="object")if(e.additionalProperties.$ref){let i=P({type:e.additionalProperties.$ref});return a.export="dictionary",a.type=i.type,a.base=i.base,a.template=i.template,a.imports.push(...i.imports),a}else {let i=Je({definition:e.additionalProperties,openApi:n,types:o});return a.export="dictionary",a.type=i.type,a.base=i.base,a.template=i.template,a.link=i,a.imports.push(...i.imports),a}if(e.allOf?.length){let i=Ka({definition:e,definitions:e.allOf,getModel:Je,openApi:n,type:"all-of",types:o});return a.export=i.export,a.imports.push(...i.imports),a.properties.push(...i.properties),a.enums=[...a.enums,...i.enums],a}if(e.type==="object")return a.export="interface",a.type="unknown",a.base="unknown",e.properties&&$n({definition:e,getModel:Je,openApi:n,types:o}).forEach(p=>{a.imports.push(...p.imports),a.enums=[...a.enums,...p.enums],a.properties.push(p),p.export==="enum"&&(a.enums=[...a.enums,p]);}),a;if(e.type){let i=P({format:e.format,type:e.type});return a.export="generic",a.type=i.type,a.base=i.base,a.template=i.template,a.imports.push(...i.imports),a}return a};var Wa=e=>{let t={},r=[];return Object.entries(e.definitions??{}).forEach(([n,o])=>{let i=P({type:n}).base.replace(le,"_$1"),p={$ref:`#/definitions/${n}`,name:i};t[i]=p;let c=Je({definition:o,isDefinition:true,meta:p,openApi:e,types:t});r=[...r,c];}),{models:r,types:t}};function xo(e,t){let r=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return r.localeCompare(n,"en")}var Zr=(e,t)=>xo(e.name,t.name);function Ha(e){return e.sort(Zr)}var dl=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},Za=e=>e.map(t=>Mn(t.value,true)).filter(Ge).join(" | "),Mn=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,Fn=e=>{let t=dl(e.value,e.customName),r=Mn(e.value);return {key:t,value:r}},Ln=e=>{let t=e.enum.map(r=>Fn(r)).sort((r,n)=>xo(r.key,n.key)).map(r=>`${r.key}=${r.value}`).join("&");return {$ref:`enum/${e.name}/${t}`,name:ve(ar(e.name))}};var Ua=e=>{let r=`Parameter${P({type:e}).base.replace(le,"_$1")}`;return {$ref:Rr+e,name:r}},Dn=e=>{let t=Da(e);return {$ref:qn+e,name:t}};var Ur=e=>e.format==="date"||e.format==="date-time",bo=e=>{let t=R();return e.base==="binary"?s.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.config.dates&&Ur(e)?s.typeNode("Date"):s.typeNode(e.base)},yl=e=>{let t=e.base==="null"?false:e.isNullable,r=bo(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(qn)){let o=Dn(e.base);r=s.typeNode(o.name);}return s.typeUnionNode({isNullable:t,types:[r]})},gl=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(n=>Ae(n));return s.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(Ae(e.link));return s.typeTupleNode({isNullable:e.isNullable,types:t})}return s.typeArrayNode([Ae(e.link)],e.isNullable)}return s.typeArrayNode([bo(e)],e.isNullable)},hl=e=>{let t=e.enum.map(r=>Mn(r.value));return s.typeUnionNode({isNullable:e.isNullable,types:t})},xl=e=>{let t=e.link&&!Array.isArray(e.link)?Ae(e.link):bo(e);return s.typeRecordNode(["string"],[t],e.isNullable,true)},Qa=({model:e,style:t})=>{let r=e.properties.map(o=>s.nodeToString({node:Ae(o),unescape:true})).filter(Ge),n=t==="union"?s.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(o=>o.isNullable),types:r}):s.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?n:s.typeParenthesizedNode({type:n})},bl=e=>{if(!e.properties.length)return s.typeNode("unknown");let t=R(),r=U(t),n=e.properties.map(o=>{let a=o.isRequired?"":"?",i=Ae(o),p=r?/^\dXX$/.test(o.name)?Oe(o.name):o.name:Oe(ar(Oo(o.name)));return o.name==="[key: string]"&&(p=o.name,a&&(a="",i=s.typeUnionNode({types:[i,"undefined"]}))),{comment:[o.description&&K(o.description),o.deprecated&&"@deprecated"],isReadOnly:o.isReadOnly,isRequired:a==="",name:p,type:i}});return s.typeInterfaceNode({isNullable:e.isNullable,properties:n,useLegacyResolution:true})},Ae=e=>{switch(e.export){case "all-of":return Qa({model:e,style:"intersection"});case "any-of":case "one-of":return Qa({model:e,style:"union"});case "array":return gl(e);case "dictionary":return xl(e);case "enum":return hl(e);case "interface":return bl(e);case "const":case "generic":case "reference":default:return yl(e)}},Pe=({client:e,count:t=1,create:r=false,meta:n,nameTransformer:o})=>{let a={created:false,name:""},i=n.name;o&&(i=o(i)),t>1&&(i=`${i}${t}`);let p=e.types[i];return p?p.$ref===n.$ref?a={created:false,name:i}:a=Pe({client:e,count:t+1,create:r,meta:n,nameTransformer:o}):r&&(e.types[i]=n,a={created:true,name:i}),a},Xa=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},Oo=e=>{let t=R();return U(t)?j({case:"camelCase",value:io(e)}).replace(le,"_$1"):e};var Vn=e=>{let t=e.find(r=>r.in==="header");return t?t.name:null},Ye=e=>e.some(r=>r.isRequired),_n=e=>{if(e==="default")return "default";if(e==="1XX")return "1XX";if(e==="2XX")return "2XX";if(e==="3XX")return "3XX";if(e==="4XX")return "4XX";if(e==="5XX")return "5XX";if(/\d{3}/g.test(e)){let t=Number.parseInt(e,10);if(t>=100&&t<600)return t}return null},Bn=(e,t)=>e.code>t.code?1:e.code<t.code?-1:0,Ol=e=>e==="3XX"||e==="4XX"||e==="5XX"||typeof e=="number"&&e>=300,Ga=e=>e==="2XX"||typeof e=="number"&&e>=200&&e<300,Sl=(e,t)=>{let r=[],n=m=>{r.includes(m)||(r=[...r,m]);};t.some(({code:m})=>Ga(m))||n("success");let a=(e.description??"").toLocaleLowerCase(),i=e.$refs.join("|").toLocaleLowerCase(),p=["error","problem"];return ["success"].some(m=>a.includes(m)||i.includes(m))&&n("success"),p.some(m=>a.includes(m)||i.includes(m))&&n("error"),r.length||n("error"),r},zn=({config:e,operationKey:t})=>{let r=e.plugins["@hey-api/sdk"]?.config.filter?new RegExp(e.plugins["@hey-api/sdk"]?.config.filter):void 0;return !r||r.test(t)},Kn=({config:e,method:t,operationId:r,path:n})=>{if(e.plugins["@hey-api/sdk"]?.config.operationId&&r)return j({case:"camelCase",value:it(r)});let o=n;return U(e)&&(o=o.replace(/[^/]*?{api-version}.*?\//g,"")),o=o.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-"),j({case:"camelCase",value:`${t}-${o}`})},Wn=e=>{let t=R();return !U(t)||e.prop!=="api-version"},Hn=e=>{let t=R();return U(t)?Oo(e.prop):e.prop},Zn=e=>e.map(t=>{let{code:r}=t;return r==="default"?t.responseTypes=Sl(t,e):Ga(r)?t.responseTypes=["success"]:Ol(r)&&(t.responseTypes=["error"]),t});var H=(e,t)=>{if(e.default===void 0||e.default===null)return e.default;switch(Ar(e).find(o=>o!=="null")||typeof e.default){case "int":case "integer":case "number":if(t?.export==="enum"&&t.enum?.[e.default]){let{value:o}=t.enum[e.default];return o}return e.default;case "array":case "boolean":case "object":case "string":return e.default;default:return}};var Ja=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:t.in,isDefinition:false,isNullable:t["x-nullable"]===true,isReadOnly:false,isRequired:t.required===true,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maximum:t.maximum,mediaType:null,minItems:t.minItems,minLength:t.minLength,minimum:t.minimum,multipleOf:t.multipleOf,pattern:te(t.pattern),prop:t.name,properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems},o={...n,name:Hn(n)};if(t.$ref){let i=P({type:t.$ref});return o={...o,$refs:[...o.$refs,...i.$refs],base:i.base,export:"reference",imports:[...o.imports,...i.imports],template:i.template,type:i.type},o.default=H(t,o),o}if(t.enum){let i=Pr(t,t.enum);if(i.length)return o={...o,base:"string",enum:[...o.enum,...i],export:"enum",type:"string"},o.default=H(t,o),o}if(t.type==="array"&&t.items){let i=P({format:t.items.format,type:t.items.type});return o={...o,$refs:[...o.$refs,...i.$refs],base:i.base,export:"array",imports:[...o.imports,...i.imports],template:i.template,type:i.type},o.default=H(t,o),o}if(t.type==="object"&&t.items){let i=P({format:t.items.format,type:t.items.type});return o={...o,$refs:[...o.$refs,...i.$refs],base:i.base,export:"dictionary",imports:[...o.imports,...i.imports],template:i.template,type:i.type},o.default=H(t,o),o}let a=t.schema;if(a){if(a.$ref?.startsWith("#/parameters/")&&(a=W(e,a)),a.$ref){let p=P({type:a.$ref});return o={...o,$refs:[...o.$refs,...p.$refs],base:p.base,export:"reference",imports:[...o.imports,...p.imports],template:p.template,type:p.type},o.default=H(t,o),o}let i=Je({definition:a,openApi:e,types:r});return o={...o,$refs:[...o.$refs,...i.$refs],base:i.base,enum:[...o.enum,...i.enum],enums:[...o.enums,...i.enums],export:i.export,imports:[...o.imports,...i.imports],link:i.link,properties:[...o.properties,...i.properties],template:i.template,type:i.type},o.default=H(t,o),o}if(t.type){let i=P({format:t.format,type:t.type});return o={...o,$refs:[...o.$refs,...i.$refs],base:i.base,export:"generic",imports:[...o.imports,...i.imports],template:i.template,type:i.type},o.default=H(t,o),o}return o};var Tl=["body","formData","header","path","query"],Un=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(o=>{let a=W(e,o),i=Ja({openApi:e,parameter:a,types:r}),p=!Wn(i);if(!(!Tl.includes(a.in)||p)){switch(a.in){case "body":n.parametersBody=i;break;case "formData":n.parametersForm=[...n.parametersForm,i];break;case "header":n.parametersHeader=[...n.parametersHeader,i];break;case "path":n.parametersPath=[...n.parametersPath,i];break;case "query":n.parametersQuery=[...n.parametersQuery,i];break}n.$refs=[...n.$refs,...i.$refs],n.imports=[...n.imports,...i.imports],n.parameters=[...n.parameters,i];}}),n};function Qn(e){return e.sort((t,r)=>{let n=t.isRequired&&t.default===void 0,o=r.isRequired&&r.default===void 0;return n&&!o?-1:o&&!n?1:0})}var Ya=({code:e,openApi:t,response:r,types:n})=>{let o={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"},a=r.schema;if(a){if(a.$ref?.startsWith("#/responses/")&&(a=W(t,a)),a.$ref){let p=P({type:a.$ref});return o.export="reference",o.type=p.type,o.base=p.base,o.template=p.template,o.imports=[...o.imports,...p.imports],o}let i=Je({definition:a,openApi:t,types:n});return o.export=i.export,o.type=i.type,o.base=i.base,o.template=i.template,o.link=i.link,o.isReadOnly=i.isReadOnly,o.isRequired=i.isRequired,o.isNullable=i.isNullable,o.format=i.format,o.maximum=i.maximum,o.exclusiveMaximum=i.exclusiveMaximum,o.minimum=i.minimum,o.exclusiveMinimum=i.exclusiveMinimum,o.multipleOf=i.multipleOf,o.maxLength=i.maxLength,o.minLength=i.minLength,o.maxItems=i.maxItems,o.minItems=i.minItems,o.uniqueItems=i.uniqueItems,o.maxProperties=i.maxProperties,o.minProperties=i.minProperties,o.pattern=te(i.pattern),o.imports=[...o.imports,...i.imports],o.enum=[...o.enum,...i.enum],o.enums=[...o.enums,...i.enums],o.properties=[...o.properties,...i.properties],o}if(r.headers)for(let i in r.headers)return o.in="header",o.name=i,o.type="string",o.base="string",o;return o};var ep=({openApi:e,responses:t,types:r})=>{let n=[];return Object.entries(t).forEach(([o,a])=>{let i=_n(o);if(!i)return;let p=W(e,a),c=Ya({code:i,openApi:e,response:p,types:r});n=[...n,c];}),n=Zn(n),n.sort(Bn)};var tp=({method:e,op:t,openApi:r,pathParams:n,types:o,url:a})=>{let i={$refs:[],deprecated:t.deprecated===true,description:t.description||null,id:t.operationId||null,imports:[],method:e.toUpperCase(),parameters:[...n.parameters],parametersBody:n.parametersBody,parametersCookie:[...n.parametersCookie],parametersForm:[...n.parametersForm],parametersHeader:[...n.parametersHeader],parametersPath:[...n.parametersPath],parametersQuery:[...n.parametersQuery],path:a,responseHeader:null,responses:[],summary:t.summary||null,tags:t.tags||null},p={...i,name:Kn({config:R(),method:i.method,operationId:t.operationId,path:i.path})};if(t.parameters){let c=Un({openApi:r,parameters:t.parameters,types:o});p.$refs=[...p.$refs,...c.$refs],p.imports=[...p.imports,...c.imports],p.parameters=[...p.parameters,...c.parameters],p.parametersBody=c.parametersBody,p.parametersCookie=[...p.parametersCookie,...c.parametersCookie],p.parametersForm=[...p.parametersForm,...c.parametersForm],p.parametersHeader=[...p.parametersHeader,...c.parametersHeader],p.parametersPath=[...p.parametersPath,...c.parametersPath],p.parametersQuery=[...p.parametersQuery,...c.parametersQuery];}if(t.responses){p.responses=ep({openApi:r,responses:t.responses,types:o});let c=p.responses.filter(m=>m.responseTypes.includes("success"));p.responseHeader=Vn(c),c.forEach(m=>{p.$refs=[...p.$refs,...m.$refs],p.imports=[...p.imports,...m.imports];});}return p.parameters=Qn(p.parameters),p};var rp=({openApi:e,types:t})=>{let r=new Map,n=[],o=R();for(let a in e.paths){let i=e.paths[a],p=Un({openApi:e,parameters:i.parameters??[],types:t});for(let c in i){let m=c,f=v({method:m,path:a});if(vn.includes(m)){let l=i[m];if(l.operationId&&(r.has(l.operationId)?o.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${l.operationId} in ${f}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(l.operationId,f)),zn({config:o,operationKey:f})){let u=tp({method:m,op:l,openApi:e,pathParams:p,types:t,url:a});n.push(u);}}}}return n};var np=e=>{let t=e.schemes?.[0]||"http",r=e.host,n=e.basePath||"";return (r?`${t}://${r}${n}`:n).replace(/\/$/g,"")};var sp=e=>{let t=wn(e.info.version),r=np(e),{models:n,types:o}=Wa(e),a=rp({openApi:e,types:o});return {models:n,operations:a,server:r,types:o,version:t}};var Rl=e=>{let t={};for(let r in e)t[e[r]]=r;return t},op=(e,t)=>{if(e.components&&t){for(let r in e.components.schemas)if(e.components.schemas.hasOwnProperty(r)){let n=e.components.schemas[r];if(n.discriminator&&n.oneOf?.length&&n.oneOf.some(o=>o.$ref&&Hr(o.$ref)==t.name))return n.discriminator}}},ip=(e,t)=>{if(e.mapping){let r=Rl(e.mapping),n=Object.keys(r).find(o=>Hr(o)==t.name);if(n&&r[n])return r[n]}return t.name};var So=({debug:e,definition:t,getModel:r,model:n,openApi:o,types:a})=>{let i=typeof t.additionalProperties=="object"?t.additionalProperties:{},p=r({debug:e,definition:i,openApi:o,parentDefinition:t,types:a});if(i.$ref){let c=P({type:i.$ref});return n.base=c.base,n.default=H(t,n),n.export="dictionary",n.imports.push(...c.imports),n.template=c.template,n.type=c.type,n}if(t.additionalProperties&&t.properties&&Object.keys(t.properties).length>0){let c=typeof t.additionalProperties=="object"&&t.additionalProperties.type&&!Array.isArray(t.additionalProperties.type)?t.additionalProperties.type:p.base,m=[P({type:c}).base,...n.properties.map(f=>f.base)];return p.base=m.filter(Ge).join(" | "),p.default=H(t,n),p.export="generic",p.isRequired=t.additionalProperties===true,p.name="[key: string]",p}return n.base=p.base,n.default=H(t,n),n.export="dictionary",n.imports.push(...p.imports),n.link=p,n.template=p.template,n.type=p.type,n},Xn=({debug:e,definition:t,getModel:r,openApi:n,parent:o,types:a})=>{let i=[],p=op(n,o);return Object.entries(t.properties??{}).forEach(([c,m])=>{let f=!!t.required?.includes(c),l={default:m.default,deprecated:m.deprecated===true,description:m.description||null,exclusiveMaximum:m.exclusiveMaximum,exclusiveMinimum:m.exclusiveMinimum,format:m.type==="array"?m.items?.format??m.format:m.format,in:"",isDefinition:false,isReadOnly:m.readOnly===true,isRequired:f,maxItems:m.maxItems,maxLength:m.maxLength,maxProperties:m.maxProperties,maximum:m.maximum,minItems:m.minItems,minLength:m.minLength,minProperties:m.minProperties,minimum:m.minimum,multipleOf:m.multipleOf,name:Oe(c),pattern:te(m.pattern),uniqueItems:m.uniqueItems};if(o&&p?.propertyName==c){i=[...i,{...l,$refs:[],base:`'${ip(p,o)}'`,enum:[],enums:[],export:"reference",imports:[],isNullable:kt(m),link:null,properties:[],template:null,type:"string"}];return}if(m.$ref){let y=P({type:m.$ref});i=[...i,{...l,$refs:y.$refs,base:y.base,enum:[],enums:[],export:"reference",imports:y.imports,isNullable:y.isNullable||kt(m),link:null,properties:[],template:y.template,type:y.type}];return}let u=r({debug:e,definition:m,initialValues:l,openApi:n,parentDefinition:t,types:a});u.isNullable=u.isNullable||kt(m),i=[...i,u];}),i};var ap=({debug:e,definitions:t,getModel:r,openApi:n,required:o,types:a})=>t.reduce((p,c)=>{if(c.$ref){let m=P({type:c.$ref}),f={$ref:c.$ref,name:m.base};a[m.base]=f;let l=W(n,c);return [...p,...r({debug:e,definition:l,meta:f,openApi:n,types:a}).properties]}return [...p,...r({debug:e,definition:c,openApi:n,parentDefinition:c,types:a}).properties]},[]).filter(p=>!p.isRequired&&o.includes(p.name)).map(p=>({...p,isRequired:true}));var Gn=e=>[{definitions:e.allOf,type:"all-of"},{definitions:e.anyOf,type:"any-of"},{definitions:e.oneOf,type:"one-of"}].find(r=>r.definitions?.length),pp=({debug:e,definition:t,definitions:r,getModel:n,model:o,openApi:a,type:i,types:p})=>{let c={$refs:o.$refs,enums:o.enums,export:i,imports:o.imports,properties:o.properties},m=[];if(r.map(f=>n({debug:e,definition:f,openApi:a,parentDefinition:t,types:p})).forEach(f=>{c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.enums=[...c.enums,...f.enums],c.properties=[...c.properties,f];}),t.required&&i==="all-of"){let f=ap({debug:e,definitions:r,getModel:n,openApi:a,required:t.required,types:p});f.forEach(l=>{c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.enums=[...c.enums,...l.enums];}),m=[...m,...f];}if(t.properties){let f=Xn({definition:t,getModel:n,openApi:a,types:p});f.forEach(l=>{c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.enums=[...c.enums,...l.enums],l.export==="enum"&&(c.enums=[...c.enums,l]);}),m=[...m,...f];}if(m.length){let f=Gn(t);if(f){let l={$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:m,template:null,type:"unknown"};f.type==="one-of"?(c.properties=[{...c,base:"",description:null,enum:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:true,link:null,name:"",template:null,type:""},l],c.export="all-of"):c.properties=[...c.properties,l];}}return c};var ce=({debug:e,definition:t,initialValues:r={},isDefinition:n=false,meta:o,openApi:a,parentDefinition:i=null,types:p})=>{let c=Ar(t),m=Va(t,c),f={$refs:[],base:"unknown",deprecated:!!t.deprecated,description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:"",isDefinition:n,isNullable:kt(t),isReadOnly:t.readOnly===true,isRequired:false,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maxProperties:t.maxProperties,maximum:t.maximum,meta:o,minItems:t.minItems,minLength:t.minLength,minProperties:t.minProperties,minimum:t.minimum,multipleOf:t.multipleOf,name:o?.name??"",pattern:te(t.pattern),properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems,...r};if(t.$ref){let u=P({debug:e,type:t.$ref});return f.$refs=[...f.$refs,decodeURIComponent(t.$ref)],f.base=u.base,f.export="reference",f.imports=[...f.imports,...u.imports],f.template=u.template,f.type=u.type,f.default=H(t,f),f}if(m==="enum"){let u=Pr(t,t.enum);if(u.length)return f.base="string",f.enum=[...f.enum,...u],f.export="enum",f.type="string",f.default=H(t,f),f.meta||(f.meta=Ln(f)),f}if(c.includes("array")&&(t.items||t.prefixItems)){if(t.prefixItems){let g=t.prefixItems.map(x=>ce({definition:x,openApi:a,parentDefinition:t,types:p}));return f.export="array",f.$refs=[...f.$refs,...g.reduce((x,S)=>[...x,...S.$refs],[])],f.imports=[...f.imports,...g.reduce((x,S)=>[...x,...S.imports],[])],f.link=g,f.default=H(t,f),f}if(!t.items)return f;if(t.items.$ref){let g=P({type:t.items.$ref});return f.$refs=[...f.$refs,decodeURIComponent(t.items.$ref)],f.base=g.base,f.export="array",f.imports=[...f.imports,...g.imports],f.template=g.template,f.type=g.type,f.default=H(t,f),f}if(t.items.anyOf&&i&&i.type){let g=Gn(i);if(g&&g.definitions.some(x=>!Ar(x).includes("array")))return ce({definition:t.items,openApi:a,parentDefinition:t,types:p})}let u=Array.isArray(t.items)?{anyOf:t.items}:t.items,y=ce({definition:u,openApi:a,parentDefinition:t,types:p});return f.base=y.base,f.export="array",f.$refs=[...f.$refs,...y.$refs],f.imports=[...f.imports,...y.imports],f.link=y,f.template=y.template,f.type=y.type,f.default=H(t,f),f}let l=Gn(t);if(l){let u=pp({...l,debug:e,definition:t,getModel:ce,model:f,openApi:a,types:p});return {...f,...u}}if(c.includes("object")||t.properties||t.additionalProperties){if(t.properties&&(Object.keys(t.properties).length>0||!t.additionalProperties)){if(f.base="unknown",f.export="interface",f.type="unknown",f.default=H(t,f),Xn({debug:e,definition:t,getModel:ce,openApi:a,parent:f,types:p}).forEach(g=>{f.$refs=[...f.$refs,...g.$refs],f.enums=[...f.enums,...g.enums],f.imports=[...f.imports,...g.imports],f.properties=[...f.properties,g],g.export==="enum"&&(f.enums=[...f.enums,g]);}),t.additionalProperties){let g=So({debug:e,definition:t,getModel:ce,model:f,openApi:a,types:p});f.properties=[...f.properties,g];}return !f.properties.length&&f.base==="unknown"&&f.type==="unknown"&&(f.export="dictionary",f.name||(f.name="[key: string]")),f}return So({debug:e,definition:t,getModel:ce,model:f,openApi:a,types:p})}if(t.const!==void 0){let u=t.const,y=typeof u=="string"?`"${u}"`:`${u}`;return f.base=y,f.export="const",f.type=y,f}if(c.length){let u=P({format:t.format,type:t.type});return f.base=u.base,f.export="generic",f.$refs=[...f.$refs,...u.$refs],f.imports=[...f.imports,...u.imports],f.isNullable=u.isNullable||f.isNullable,f.template=u.template,f.type=u.type,f.default=H(t,f),f}return f};var Jn=e=>{if(e.schema)return e.schema;if(e.content){let t=Object.entries(e.content);for(let[r,n]of t)if(n.schema){let o=r;return e.content[o].schema}}};var cp=e=>{let t={},r=[];return e.components?(Object.entries(e.components.schemas??{}).forEach(([n,o])=>{let a=Dn(n);t[a.name]=a;let i=ce({definition:o,isDefinition:true,meta:a,openApi:e,types:t});r=[...r,i];}),Object.entries(e.components.parameters??{}).forEach(([n,o])=>{let a=Jn(o);if(!a)return;let i=Ua(n);t[i.name]=i;let p=ce({definition:a,isDefinition:true,meta:i,openApi:e,types:t});p.deprecated=o.deprecated,p.description=o.description||null,r=[...r,p];}),{models:r,types:t}):{models:r,types:t}};var mp=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",deprecated:t.deprecated===true,description:t.description||null,enum:[],enums:[],export:"interface",imports:[],in:t.in,isDefinition:false,isNullable:kt(t),isReadOnly:false,isRequired:t.required===true,link:null,mediaType:null,prop:t.name,properties:[],template:null,type:"unknown"},o={...n,name:Hn(n)};if(t.$ref){let i=P({type:t.$ref});return o={...o,$refs:[...o.$refs,...i.$refs],base:i.base,export:"reference",imports:[...o.imports,...i.imports],template:i.template,type:i.type},o}let a=Jn(t);if(a){if(a.$ref?.startsWith(Rr)&&(a=W(e,a)),a.$ref){let p=P({type:a.$ref});return o={...o,$refs:[...o.$refs,...p.$refs],base:p.base,export:"reference",imports:[...o.imports,...p.imports],template:p.template,type:p.type},o.default=H(a),o}let i=ce({definition:a,openApi:e,types:r});return o={...o,$refs:[...o.$refs,...i.$refs],base:i.base,enum:[...o.enum,...i.enum],enums:[...o.enums,...i.enums],exclusiveMaximum:i.exclusiveMaximum,exclusiveMinimum:i.exclusiveMinimum,export:i.export,format:i.format,imports:[...o.imports,...i.imports],isNullable:o.isNullable||i.isNullable,isReadOnly:i.isReadOnly,isRequired:o.isRequired||i.isRequired,link:i.link,maxItems:i.maxItems,maxLength:i.maxLength,maxProperties:i.maxProperties,maximum:i.maximum,minItems:i.minItems,minLength:i.minLength,minProperties:i.minProperties,minimum:i.minimum,multipleOf:i.multipleOf,pattern:te(i.pattern),properties:[...o.properties,...i.properties],template:i.template,type:i.type,uniqueItems:i.uniqueItems},(o.enum.length||o.enums.length)&&!o.meta&&(o.meta=Ln(o)),o.default=i.default,o}return o};var Il=["cookie","formData","header","path","query"],Yn=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(o=>{let a=W(e,o),i=mp({openApi:e,parameter:a,types:r}),p=!Wn(i);if(!(!Il.includes(a.in)||p)){switch(a.in){case "cookie":n.parametersCookie=[...n.parametersCookie,i];break;case "formData":n.parametersForm=[...n.parametersForm,i];break;case "header":n.parametersHeader=[...n.parametersHeader,i];break;case "path":n.parametersPath=[...n.parametersPath,i];break;case "query":n.parametersQuery=[...n.parametersQuery,i];break}n.$refs=[...n.$refs,...i.$refs],n.imports=[...n.imports,...i.imports],n.parameters=[...n.parameters,i];}}),n};var Al=["application/json-patch+json","application/json","application/ld+json","application/x-www-form-urlencoded","multipart/batch","multipart/form-data","multipart/mixed","multipart/related","text/json","text/plain"],es=(e,t)=>{let r=Object.keys(t).filter(o=>{let a=o.split(";")[0].trim();return Al.includes(a)}).find(o=>!!t[o]?.schema);if(r)return {mediaType:r,schema:t[r].schema};let n=Object.keys(t).find(o=>!!t[o]?.schema);if(n)return {mediaType:n,schema:t[n].schema}};var fp=({body:e,debug:t,openApi:r,types:n})=>{let o=e["x-body-name"]??"requestBody",a={$refs:[],base:"unknown",default:void 0,description:e.description||null,enum:[],enums:[],export:"interface",imports:[],in:"body",isDefinition:false,isNullable:e.nullable===true,isReadOnly:false,isRequired:e.required===true,link:null,mediaType:null,name:o,prop:o,properties:[],template:null,type:"unknown"};if(!e.content)return a;let i=es(r,e.content);if(!i)return a;switch(a.mediaType=i.mediaType,a.mediaType){case "application/x-www-form-urlencoded":case "multipart/form-data":a.in="formData",a.name="formData",a.prop="formData";break}if(i.schema.$ref){let c=P({type:i.schema.$ref});return a.export="reference",a.type=c.type,a.base=c.base,a.template=c.template,a.$refs=[...a.$refs,...c.$refs],a.imports=[...a.imports,...c.imports],a}let p=ce({debug:t,definition:i.schema,openApi:r,types:n});return a.$refs=[...a.$refs,...p.$refs],a.base=p.base,a.enum=[...a.enum,...p.enum],a.enums=[...a.enums,...p.enums],a.exclusiveMaximum=p.exclusiveMaximum,a.exclusiveMinimum=p.exclusiveMinimum,a.export=p.export,a.format=p.format,a.imports=[...a.imports,...p.imports],a.isNullable=a.isNullable||p.isNullable,a.isReadOnly=p.isReadOnly,a.isRequired=a.isRequired||p.isRequired,a.link=p.link,a.maximum=p.maximum,a.maxItems=p.maxItems,a.maxLength=p.maxLength,a.maxProperties=p.maxProperties,a.minimum=p.minimum,a.minItems=p.minItems,a.minLength=p.minLength,a.minProperties=p.minProperties,a.multipleOf=p.multipleOf,a.pattern=te(p.pattern),a.properties=[...a.properties,...p.properties],a.template=p.template,a.type=p.type,a.uniqueItems=p.uniqueItems,a};var lp=({code:e,openApi:t,response:r,types:n})=>{let o={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"};if(r.content){let a=es(t,r.content);if(a){if(a.schema.$ref?.startsWith("#/components/responses/")&&(a.schema=W(t,a.schema)),a.schema.$ref){let p=P({type:a.schema.$ref});return o.base=p.base,o.export="reference",o.$refs=[...o.$refs,...p.$refs],o.imports=[...o.imports,...p.imports],o.template=p.template,o.type=p.type,o}let i=ce({definition:a.schema,openApi:t,types:n});return o.export=i.export,o.type=i.type,o.base=i.base,o.template=i.template,o.link=i.link,o.isReadOnly=i.isReadOnly,o.isRequired=i.isRequired,o.isNullable=i.isNullable,o.format=i.format,o.maximum=i.maximum,o.exclusiveMaximum=i.exclusiveMaximum,o.minimum=i.minimum,o.exclusiveMinimum=i.exclusiveMinimum,o.multipleOf=i.multipleOf,o.maxLength=i.maxLength,o.minLength=i.minLength,o.maxItems=i.maxItems,o.minItems=i.minItems,o.uniqueItems=i.uniqueItems,o.maxProperties=i.maxProperties,o.minProperties=i.minProperties,o.pattern=te(i.pattern),o.$refs=[...o.$refs,...i.$refs],o.imports=[...o.imports,...i.imports],o.enum=[...o.enum,...i.enum],o.enums=[...o.enums,...i.enums],o.properties=[...o.properties,...i.properties],o}}if(r.headers)for(let a in r.headers)return o.in="header",o.name=a,o.type="string",o.base="string",o;return o};var up=({openApi:e,responses:t,types:r})=>{let n=[];return Object.entries(t).forEach(([o,a])=>{let i=_n(o);if(!i)return;let p=W(e,a),c=lp({code:i,openApi:e,response:p,types:r});n=[...n,c];}),n=Zn(n),n.sort(Bn)};var Er=(e,t)=>{let r=[...e],n=[...t];for(;n.length>0;){let o=n[0];n=n.slice(1),r.every(i=>i.in!==o.in||i.name!==o.name)&&(r=[...r,o]);}return r},dp=({debug:e,method:t,op:r,openApi:n,pathParams:o,types:a,url:i})=>{let p={$refs:[],deprecated:!!r.deprecated,description:r.description||null,id:r.operationId||null,imports:[],method:t.toUpperCase(),parameters:[],parametersBody:o.parametersBody,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[],path:i,responseHeader:null,responses:[],summary:r.summary||null,tags:r.tags||null},c={...p,name:Kn({config:R(),method:p.method,operationId:r.operationId,path:p.path})};if(r.parameters){let m=Yn({openApi:n,parameters:r.parameters,types:a});c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports],c.parameters=[...c.parameters,...m.parameters],c.parametersBody=m.parametersBody,c.parametersCookie=[...c.parametersCookie,...m.parametersCookie],c.parametersForm=[...c.parametersForm,...m.parametersForm],c.parametersHeader=[...c.parametersHeader,...m.parametersHeader],c.parametersPath=[...c.parametersPath,...m.parametersPath],c.parametersQuery=[...c.parametersQuery,...m.parametersQuery];}if(r.requestBody){let m=W(n,r.requestBody),f=fp({body:m,debug:e,openApi:n,types:a});c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.parameters=[...c.parameters,f],c.parametersBody=f;}if(r.responses){c.responses=up({openApi:n,responses:r.responses,types:a});let m=c.responses.filter(f=>f.responseTypes.includes("success"));c.responseHeader=Vn(m),m.forEach(f=>{c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports];});}return c.parameters=Er(c.parameters,o.parameters),c.parametersCookie=Er(c.parametersCookie,o.parametersCookie),c.parametersForm=Er(c.parametersForm,o.parametersForm),c.parametersHeader=Er(c.parametersHeader,o.parametersHeader),c.parametersPath=Er(c.parametersPath,o.parametersPath),c.parametersQuery=Er(c.parametersQuery,o.parametersQuery),c.parameters=Qn(c.parameters),c};var yp=({openApi:e,types:t})=>{let r=new Map,n=[],o=R();for(let a in e.paths){let i=e.paths[a],p=Yn({openApi:e,parameters:i.parameters??[],types:t});for(let c in i){let m=c,f=v({method:m,path:a});if(vn.includes(m)){let l=i[m];if(l.operationId&&(r.has(l.operationId)?o.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${l.operationId} in ${f}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(l.operationId,f)),zn({config:o,operationKey:f})){let u=dp({method:m,op:l,openApi:e,pathParams:p,types:t,url:a});n.push(u);}}}}return n};var gp=e=>{let t=e.servers?.[0],r=t?.variables||{},n=t?.url||"";return Object.entries(r).forEach(([o,a])=>{n=n.replace(`{${o}}`,a.default);}),n.replace(/\/$/g,"")};var hp=e=>{let t=wn(e.info.version),r=gp(e),{models:n,types:o}=cp(e),a=yp({openApi:e,types:o});return {models:n,operations:a,server:r,types:o,version:t}};function OI({openApi:e}){let t=e;if("openapi"in t)return hp(t);if("swagger"in t)return sp(t);throw new Error(`Unsupported OpenAPI specification: ${JSON.stringify(t,null,2)}`)}var SI=({config:e,dependencies:t,spec:r})=>{let n=new Rn({config:e,dependencies:t,spec:r});if("swagger"in n.spec)return lo(n),n;switch(n.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return uo(n),n;case "3.1.0":case "3.1.1":return yo(n),n;}throw new Error("Unsupported OpenAPI specification")};var ts={...St,config:{...Ot,throwOnError:false},handler:It,name:"@hey-api/client-axios"};var rs={...St,config:{...Ot,throwOnError:false},handler:It,name:"@hey-api/client-fetch"};var ns={...St,config:{...Ot,throwOnError:false},handler:It,name:"@hey-api/client-next"};var ss={...St,config:Ot,handler:It,name:"@hey-api/client-nuxt"};var os={config:{},handler:()=>{},name:"legacy/angular",output:"client",tags:["client"]};var is={config:{},handler:()=>{},name:"legacy/axios",output:"client",tags:["client"]};var as={config:{},handler:()=>{},name:"legacy/fetch",output:"client",tags:["client"]};var ps={config:{},handler:()=>{},name:"legacy/node",output:"client",tags:["client"]};var cs={config:{},handler:()=>{},name:"legacy/xhr",output:"client",tags:["client"]};var ms="schemas",To=({plugin:e,schema:t})=>{e.config.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},jr=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>jr({context:e,plugin:t,schema:o}));let n=structuredClone(r);if(n.$ref)return n.$ref=decodeURI(n.$ref),n;if(To({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=jr({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>jr({context:e,plugin:t,schema:o}))),n.items&&(n.items=jr({context:e,plugin:t,schema:n.items})),n.properties)for(let o in n.properties){let a=n.properties[o];typeof a!="boolean"&&(n.properties[o]=jr({context:e,plugin:t,schema:a}));}return n},vt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>vt({context:e,plugin:t,schema:o}));let n=structuredClone(r);if("$ref"in n)return n.$ref=decodeURI(n.$ref),n;if(To({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=vt({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>vt({context:e,plugin:t,schema:o}))),n.anyOf&&(n.anyOf=n.anyOf.map(o=>vt({context:e,plugin:t,schema:o}))),n.items&&(n.items=vt({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(o=>vt({context:e,plugin:t,schema:o}))),n.properties)for(let o in n.properties){let a=n.properties[o];typeof a!="boolean"&&(n.properties[o]=vt({context:e,plugin:t,schema:a}));}return n},dt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>dt({context:e,plugin:t,schema:o}));let n=structuredClone(r);if(To({plugin:t,schema:n}),n.$ref&&(n.$ref=decodeURI(n.$ref)),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=dt({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>dt({context:e,plugin:t,schema:o}))),n.anyOf&&(n.anyOf=n.anyOf.map(o=>dt({context:e,plugin:t,schema:o}))),n.items&&(n.items=dt({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(o=>dt({context:e,plugin:t,schema:o}))),n.prefixItems&&(n.prefixItems=n.prefixItems.map(o=>dt({context:e,plugin:t,schema:o}))),n.properties)for(let o in n.properties){let a=n.properties[o];typeof a!="boolean"&&(n.properties[o]=dt({context:e,plugin:t,schema:a}));}return n},Ro=({name:e,plugin:t,schema:r})=>{let n="";return t.config.nameBuilder&&(typeof t.config.nameBuilder=="function"?n=t.config.nameBuilder(e,r):n=t.config.nameBuilder.replace("{{name}}",e)),n||(n=`${e}Schema`),Re(n)},$l=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let n=e.spec.definitions[r],o=jr({context:e,plugin:t,schema:n}),a=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:o}),name:Ro({name:r,plugin:t,schema:n})});e.file({id:ms}).add(a);}},Ml=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],o=vt({context:e,plugin:t,schema:n}),a=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:o}),name:Ro({name:r,plugin:t,schema:n})});e.file({id:ms}).add(a);}},Fl=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],o=dt({context:e,plugin:t,schema:n}),a=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:o}),name:Ro({name:r,plugin:t,schema:n})});e.file({id:ms}).add(a);}},xp=({plugin:e})=>{if(e.createFile({id:ms,path:e.output}),"swagger"in e.context.spec){$l({context:e.context,plugin:e});return}switch(e.context.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":Ml({context:e.context,plugin:e});break;case "3.1.0":case "3.1.1":Fl({context:e.context,plugin:e});break;default:throw new Error("Unsupported OpenAPI specification")}};var Io=(e,t)=>{let r=R();if(Array.isArray(e))return e.map(o=>Io(o));if(typeof e!="object"||e===null)return e;let n={...e};return Object.entries(n).forEach(([o,a])=>{if(r.plugins["@hey-api/schemas"]?.config.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(o)&&t!=="properties"){delete n[o];return}o==="$ref"&&typeof a=="string"&&(n[o]=decodeURIComponent(a)),a&&typeof a=="object"&&(n[o]=Io(a,o));}),n},Ll=(e,t)=>{let r=R(),n=ve(e),o=r.plugins["@hey-api/schemas"];return o?.config.nameBuilder?typeof o.config.nameBuilder=="function"?o.config.nameBuilder(n,t):o.config.nameBuilder.replace("{{name}}",n):`${n}Schema`},bp=({files:e,openApi:t,plugin:r})=>{let n=R();e.schemas=new Be({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"schemas",name:"schemas.ts"});let o=(a,i)=>{let p=Io(i),c=s.objectExpression({obj:p}),m=s.constVariable({assertion:"const",exportConst:true,expression:c,name:Ll(a,i)});e.schemas.add(m);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([a,i])=>{o(a,i);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([a,i])=>{o(a,i);});};var fs={config:{exportFromIndex:false,nameBuilder:e=>`${e}Schema`,type:"json"},handler:xp,handlerLegacy:bp,name:"@hey-api/schemas",output:"schemas"};var yt=({operation:e})=>{let t=[];return e.summary&&t.push(K(e.summary)),e.description&&t.push(K(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0},Yt=({context:e,operation:t})=>{let n=C(e.config).name==="@hey-api/client-nuxt",o=e.config.plugins["@hey-api/sdk"];return o&&!o.config.client&&!o.config.instance||n||An(t)};var Nr="TComposable",et="DefaultT",Ao="ResT",de="sdk";var Op=({dataExpression:e,schema:t})=>{if(t.type!=="integer"||t.format!=="int64")return;let r=e!==void 0?s.callExpression({functionName:"BigInt",parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(r){if(typeof e=="string")return [r];if(e)return [s.assignment({left:e,right:r})]}},Sp=({dataExpression:e,schema:t})=>{if(t.type!=="string"||!(t.format==="date"||t.format==="date-time"))return;let r=s.identifier({text:"Date"});if(typeof e=="string")return [s.newExpression({argumentsArray:[s.identifier({text:e})],expression:r})];if(e)return [s.assignment({left:e,right:s.newExpression({argumentsArray:[e],expression:r})})]};var ls=({id:e,type:t})=>{let r="";switch(t){case "data":r="DataResponseTransformer";break;case "error":r="ErrorResponseTransformer";break;case "response":r="ResponseTransformer";break}return `#/ir/${j({case:"camelCase",value:e})}${r}`},Vl=({$ref:e,type:t})=>{let r="";switch(t){case "response":r="SchemaResponseTransformer";break}let n=e.split("/");return `${n.slice(0,n.length-1).join("/")}/${j({case:"camelCase",value:n[n.length-1]})}${r}`},Tp=({$ref:e})=>Vl({$ref:e,type:"response"}),Gr="transformers",us="data",Qr=e=>e.map(t=>b.isStatement(t)?t:s.expressionToStatement({expression:t})),Ip=({node:e})=>e.kind===b.SyntaxKind.ReturnStatement,Ap=({plugin:e,schema:t})=>{let r=s.identifier({text:us}),n=Xr({dataExpression:r,plugin:e,schema:t});return n.length&&!Ip({node:n[n.length-1]})&&n.push(s.returnStatement({expression:r})),n},Xr=({dataExpression:e,plugin:t,schema:r})=>{let n=t.context.file({id:Gr});if(r.$ref){let o=n.identifier({$ref:Tp({$ref:r.$ref}),create:true,namespace:"value"});if(o.created&&o.name){let a=t.context.resolveIrRef(r.$ref),i=Ap({plugin:t,schema:a});if(i.length){let p=s.constVariable({expression:s.arrowFunction({async:false,multiLine:true,parameters:[{name:us,type:s.keywordTypeNode({keyword:"any"})}],statements:Qr(i)}),name:o.name});n.add(p);}else o=n.blockIdentifier({$ref:Tp({$ref:r.$ref}),namespace:"value"});}if(o.name){let a=s.callExpression({functionName:o.name,parameters:[e]});if(e)return typeof e=="string"&&e==="item"?[s.returnStatement({expression:a})]:[typeof e=="string"?a:s.assignment({left:e,right:a})]}return []}if(r.type==="array"){if(!e||typeof e=="string")return [];let o=r.items?Xr({dataExpression:"item",plugin:t,schema:r.items?.[0]?r.items[0]:{...r,type:void 0}}):[];if(!o.length)return [];let a=Qr(o);return a.some(p=>Ip({node:p}))||a.push(s.returnStatement({expression:s.identifier({text:"item"})})),[s.assignment({left:e,right:s.callExpression({functionName:s.propertyAccessExpression({expression:e,name:"map"}),parameters:[s.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:a})]})})]}if(r.type==="object"){let o=[],a=r.required??[];for(let i in r.properties){let p=r.properties[i],c=s.propertyAccessExpression({expression:e||us,name:i}),m=Xr({dataExpression:c,plugin:t,schema:p});if(!m.length)continue;let f=!p.items?.find(u=>u.type==="null");a.includes(i)&&f?o=o.concat(m):o.push(s.ifStatement({expression:c,thenStatement:s.block({statements:Qr(m)})}));}return o}if(r.items){if(r.items.length===1)return Xr({dataExpression:"item",plugin:t,schema:r.items[0]});let o=[];if(r.logicalOperator==="and"||r.items.length===2&&r.items.find(a=>a.type==="null"||a.type==="void")){for(let a of r.items){let i=Xr({dataExpression:e||"item",plugin:t,schema:a});if(i.length)if(e)o=o.concat(i);else {let p=s.identifier({text:"item"});o.push(s.ifStatement({expression:p,thenStatement:s.block({statements:Qr(i)})}),s.returnStatement({expression:p}));}}return o}r.type!=="enum"&&((r.items??[]).every(a=>["boolean","integer","null","number","string"].includes(a.type))||console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(r)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`));}for(let o of t.config.transformers??[]){let a=o({config:t.config,dataExpression:e,file:n,schema:r});if(a)return a}return []},Pp=({plugin:e})=>{let t=e.createFile({id:Gr,path:e.output});e.config.dates&&(e.config.transformers=[...e.config.transformers??[],Sp]),e.config.bigInt&&(e.config.transformers=[...e.config.transformers??[],Op]),e.forEach("operation",({operation:r})=>{let{response:n}=We(r);if(!n)return;if(n.items&&n.items.length>1){e.context.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${v(r)} has ${n.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let o=e.getPlugin("@hey-api/typescript"),i=e.context.file({id:T}).getName(o.api.getId({operation:r,type:"response"}));if(!i)return;let p=t.identifier({$ref:ls({id:r.id,type:"response"}),create:true,namespace:"value"});if(!p.name)return;let c=Ap({plugin:e,schema:n});if(c.length){t.import({asType:true,module:t.relativePathToFile({context:e.context,id:T}),name:i});let m=s.constVariable({exportConst:true,expression:s.arrowFunction({async:true,multiLine:true,parameters:[{name:us,type:s.keywordTypeNode({keyword:"any"})}],returnType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:i})],typeName:"Promise"}),statements:Qr(c)}),name:p.name});t.add(m);}else p=t.blockIdentifier({$ref:ls({id:r.id,type:"response"}),namespace:"value"});});};var _l=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Ep=({operation:e,plugin:t})=>{if(!e.security||!t.config.auth)return [];let r=[];for(let n of e.security){let o=_l({securitySchemeObject:n});o?r.push(o):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(n,null,2)}`);}return r};var jp=({operation:e,plugin:t})=>{if(!t.config.validator.request)return;let r=t.getPlugin(t.config.validator.request);if(!(!r||!r.api.createRequestValidator))return r.api.createRequestValidator({file:t.context.file({id:de}),operation:e,plugin:r})},Np=({operation:e,plugin:t})=>{if(!t.config.validator.response)return;let r=t.getPlugin(t.config.validator.response);if(!(!r||!r.api.createResponseValidator))return r.api.createResponseValidator({file:t.context.file({id:de}),operation:e,plugin:r})};var Cp=({context:e,value:t})=>{let r=j({case:"PascalCase",value:it(t)});return Ir({config:e.config,name:r})},Bl=({operation:e,plugin:t})=>t.config.methodNameBuilder?t.config.methodNameBuilder(e):!t.config.asClass&&e.id.match(le)?`${e.id}_`:e.id,ds=({context:e,operation:t,plugin:r})=>{let n=new Map,o,a,i=[];if(r.config.classStructure==="auto"&&t.operationId&&(i=t.operationId.split(/[./]/).filter(Boolean),i.length>1)){let c=i.pop();a=j({case:"camelCase",value:it(c)}),o=i.pop();}let p=r.config.instance?[r.config.instance]:t.tags??["default"];for(let c of p){let m=Cp({context:e,value:o||c});n.set(c,{className:m,methodName:a||Bl({operation:t,plugin:r}),path:(o?[c,...i,o]:[c]).map(f=>Cp({context:e,value:f}))});}return n},Po=({file:e,operation:t,plugin:r,throwOnError:n})=>{let a=C(r.context.config).name==="@hey-api/client-nuxt",i=r.getPlugin("@hey-api/typescript"),p=r.context.file({id:T}),c=e.import({asType:true,module:e.relativePathToFile({context:r.context,id:T}),name:p.getName(i.api.getId({operation:t,type:"data"}))}),m=Q.Options.name;if(a){let f=e.import({asType:true,module:e.relativePathToFile({context:r.context,id:T}),name:p.getName(i.api.getId({operation:t,type:a?"response":"responses"}))});return `${m}<${Nr}, ${c.name||"unknown"}, ${f.name||"unknown"}, ${et}>`}return n?`${m}<${c.name||"unknown"}, ${n}>`:c.name?`${m}<${c.name}>`:m},Eo=({file:e,isRequiredOptions:t,operation:r,plugin:n})=>{let o={argNames:[],fields:[],parameters:[]},a=n.getPlugin("@hey-api/typescript"),i={usedTypeIDs:new Set},c=C(n.context.config).name==="@hey-api/client-nuxt";if(n.config.params_EXPERIMENTAL==="experiment"){let m=n.context.file({id:T});if(r.parameters?.path)for(let f in r.parameters.path){let l=r.parameters.path[f],u=Re(l.name);o.argNames.push(u),o.fields.push({in:"path",key:u}),o.parameters.push({isRequired:l.required,name:u,type:a.api.schemaToType({onRef:y=>{e.import({asType:true,module:e.relativePathToFile({context:n.context,id:T}),name:m.getName(y)});},plugin:a,schema:l.schema,state:i})});}if(r.parameters?.query)for(let f in r.parameters.query){let l=r.parameters.query[f],u=Re(l.name);o.argNames.push(u),o.fields.push({in:"path",key:u}),o.parameters.push({isRequired:l.required,name:u,type:a.api.schemaToType({onRef:y=>{e.import({asType:true,module:e.relativePathToFile({context:n.context,id:T}),name:m.getName(y)});},plugin:a,schema:l.schema,state:i})});}if(r.body){let f="body";o.argNames.push(f),o.fields.push({in:"body"}),o.parameters.push({isRequired:r.body.required,name:f,type:a.api.schemaToType({onRef:l=>{e.import({asType:true,module:e.relativePathToFile({context:n.context,id:T}),name:m.getName(l)});},plugin:a,schema:r.body.schema,state:i})});}}return o.parameters.push({isRequired:t,name:"options",type:Po({file:e,operation:r,plugin:n,throwOnError:c?void 0:"ThrowOnError"})}),o},zl=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},jo=({isRequiredOptions:e,opParameters:t,operation:r,plugin:n})=>{let o=n.context.file({id:de}),a=o.nameWithoutExtension(),i=C(n.context.config),p=i.name==="@hey-api/client-nuxt",c=n.getPlugin("@hey-api/typescript"),m=n.context.file({id:T}),f=o.import({asType:true,module:o.relativePathToFile({context:n.context,id:T}),name:m.getName(c.api.getId({operation:r,type:p?"response":"responses"}))}),l=o.import({asType:true,module:o.relativePathToFile({context:n.context,id:T}),name:m.getName(c.api.getId({operation:r,type:p?"error":"errors"}))}),u=[];if(r.body)switch(r.body.type){case "form-data":{let $=o.import({module:ee({config:n.context.config,sourceOutput:a}),name:"formDataBodySerializer"});u.push({spread:$.name});break}case "json":break;case "text":case "octet-stream":u.push({key:"bodySerializer",value:null});break;case "url-search-params":{let $=o.import({module:ee({config:n.context.config,sourceOutput:a}),name:"urlSearchParamsBodySerializer"});u.push({spread:$.name});break}}for(let $ in r.parameters?.query){let J=r.parameters.query[$];if((J.schema.type==="array"||J.schema.type==="tuple")&&(J.style!=="form"||!J.explode)){u.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}let y=jp({operation:r,plugin:n});if(y&&u.push({key:"requestValidator",value:y}),n.config.transformer==="@hey-api/transformers"){let $=n.context.file({id:Gr}).identifier({$ref:ls({id:r.id,type:"response"}),namespace:"value"});$.name&&(o.import({module:o.relativePathToFile({context:n.context,id:Gr}),name:$.name}),u.push({key:"responseTransformer",value:$.name}));}if(i.name==="@hey-api/client-axios"){for(let $ in r.responses)if(oo({statusCode:$})==="2XX"){let J=r.responses[$],je=zl(J?.mediaType);if(je){u.push({key:"responseType",value:je});break}}}let g=Np({operation:r,plugin:n});g&&u.push({key:"responseValidator",value:g}),n.config.responseStyle==="data"&&u.push({key:"responseStyle",value:n.config.responseStyle});let x=Ep({context:n.context,operation:r,plugin:n});x.length&&u.push({key:"security",value:s.arrayLiteralExpression({elements:x})}),u.push({key:"url",value:r.path}),u.push({spread:"options"});let S=[],O=t.argNames.length;if(O){let $=[],J=[];for(let $e of t.argNames)$.push(s.identifier({text:$e}));for(let $e of t.fields){let rr=[];"in"in $e&&(rr.push({key:"in",value:$e.in}),$e.key&&rr.push({key:"key",value:$e.key}),$e.map&&rr.push({key:"map",value:$e.map})),J.push(s.objectExpression({obj:rr}));}let je=o.import({module:ee({config:n.context.config,sourceOutput:a}),name:"buildClientParams"});S.push(s.constVariable({expression:s.callExpression({functionName:je.name,parameters:[s.arrayLiteralExpression({elements:$}),s.arrayLiteralExpression({elements:J})]}),name:"params"})),u.push({spread:"params"});}if(r.body){let $=r.parameters?.header?.["content-type"];if(!!!$?.required){let je=[{key:$?.name??"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:!e,name:"headers"})}];O&&je.push({spread:s.propertyAccessExpression({expression:s.identifier({text:"params"}),name:"headers"})}),u.push({key:"headers",value:je});}}let w=f.name||"unknown",N=l.name||"unknown",z=n.config.client?o.import({alias:"_heyApiClient",module:o.relativePathToFile({context:n.context,id:Fe}),name:"client"}):void 0,V=s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:!e,name:"client"}),Z;n.config.instance?Z=s.binaryExpression({left:V,operator:"??",right:s.propertyAccessExpression({expression:s.this(),name:"_client"})}):z?.name?Z=s.binaryExpression({left:V,operator:"??",right:s.identifier({text:z.name})}):Z=V;let D=[];return p?D.push(Nr,`${w} | ${et}`,N,et):D.push(w,N,"ThrowOnError"),n.config.responseStyle==="data"&&D.push(s.stringLiteral({text:n.config.responseStyle})),S.push(s.returnFunctionCall({args:[s.objectExpression({identifiers:["responseTransformer"],obj:u})],name:s.propertyAccessExpression({expression:Z,name:s.identifier({text:r.method})}),types:D})),S};var er=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:n,name:o}=Pe({meta:e,...r});return o&&t(o),{created:n,name:o}},$p=e=>`${e}ModelResponseTransformer`,tr=e=>`${j({case:"PascalCase",value:e})}Data`,Cr=e=>`${j({case:"PascalCase",value:e})}Error`,No=e=>`${e}Transformer`,tt=e=>`${j({case:"PascalCase",value:e})}Response`,Co=({importedType:e,throwOnError:t})=>{let r=Q.OptionsLegacyParser.name;return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},kp=(e,t)=>{let r=R(),{name:n}=Pe({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:tr}),o=Ye(t.parameters);if(!U(r))return [{isRequired:o,name:"options",type:Co({importedType:n,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let a=i=>{if(i.default!==void 0)return JSON.stringify(i.default,null,4)};return r.useOptions?[{default:o?void 0:{},name:"data",type:n}]:t.parameters.map(i=>{let p=`${n}['${i.name}']`;return {default:i?.default,isRequired:(!i.isRequired&&!a(i)?"?":"")=="",name:i.name,type:p}})},vp=(e,t)=>{let r=R(),n=s.typeNode("void");if(t.responses.filter(i=>i.responseTypes.includes("success")).length){let{name:i}=Pe({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:tt});n=s.typeUnionNode({types:[i]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.config.response==="response"&&(n=s.typeNode("ApiResult",[n])),C(r).name==="legacy/angular"?n=s.typeNode("Observable",[n]):n=s.typeNode("CancelablePromise",[n]),n},wp=e=>{let t=R();if(!U(t))return [e.deprecated&&"@deprecated",e.summary&&K(e.summary),e.description&&K(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(a=>`@param data.${a.name} ${a.description?K(a.description):""}`)]:r=e.parameters.map(a=>`@param ${a.name} ${a.description?K(a.description):""}`));let n=e.responses.filter(a=>a.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&K(e.summary),e.description&&K(e.description),...r,...n.map(a=>`@returns ${a.type} ${a.description?K(a.description):""}`),"@throws ApiError"]},Kl=({client:e,onClientImport:t,onImport:r,operation:n})=>{let o=R(),a=tt(n.name),{name:i}=Pe({client:e,meta:{$ref:`transformers/${a}`,name:a},nameTransformer:No});if(i&&r(i),!U(o)){let f=[{spread:"options"}],u=n.parameters.filter(y=>y.in==="body"||y.in==="formData").map(y=>y.mediaType||(y.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(Ge);return u.length===1&&(u[0]==="multipart/form-data"&&(f=[...f,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),u[0]==="application/x-www-form-urlencoded"&&(f=[...f,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:u[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),f=[...f,{key:"url",value:n.path}],i&&(f=[...f,{key:"responseTransformer",value:i}]),s.objectExpression({identifiers:["responseTransformer"],obj:f})}let p=f=>f.reduce((l,u)=>{let y=u.prop,g=o.useOptions?`data.${u.name}`:u.name;return y===g?l[y]=y:Oe(y)===y?l[y]=g:l[`'${y}'`]=g,l},{}),c={method:n.method,url:n.path};n.parametersPath.length&&(c.path=p(n.parametersPath)),n.parametersCookie.length&&(c.cookies=p(n.parametersCookie)),n.parametersHeader.length&&(c.headers=p(n.parametersHeader)),n.parametersQuery.length&&(c.query=p(n.parametersQuery)),n.parametersForm.length&&(c.formData=p(n.parametersForm)),n.parametersBody&&(n.parametersBody.in==="formData"&&(o.useOptions?c.formData=`data.${n.parametersBody.name}`:c.formData=n.parametersBody.name),n.parametersBody.in==="body"&&(o.useOptions?c.body=`data.${n.parametersBody.name}`:c.body=n.parametersBody.name)),n.parametersBody?.mediaType&&(c.mediaType=n.parametersBody?.mediaType),n.responseHeader&&(c.responseHeader=n.responseHeader),i&&(c.responseTransformer=i);let m=n.responses.filter(f=>f.responseTypes.includes("error"));if(m.length>0){let f={};m.forEach(l=>{f[l.code]=l.description??"";}),c.errors=f;}return s.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},Ee=({config:e,handleIllegal:t,id:r,operation:n})=>e.plugins["@hey-api/sdk"]?.config.methodNameBuilder?e.plugins["@hey-api/sdk"].config.methodNameBuilder(n):t&&r.match(le)?`${r}_`:r,qp=({client:e,onClientImport:t,onImport:r,operation:n})=>{let o=R(),a=Kl({client:e,onClientImport:t,onImport:r,operation:n});if(!U(o)){let p=Pe({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:Cr}).name,m=n.responses.filter(f=>f.responseTypes.includes("success")).length?Pe({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:tt}).name:"void";return [s.returnFunctionCall({args:[a],name:`(options?.client ?? client).${n.method.toLocaleLowerCase()}`,types:p&&m?[m,p,"ThrowOnError"]:p?["unknown",p,"ThrowOnError"]:m?[m,"unknown","ThrowOnError"]:[]})]}return Vt(o)?[s.returnFunctionCall({args:[a],name:"this.httpRequest.request"})]:C(o).name==="legacy/angular"?[s.returnFunctionCall({args:["OpenAPI","this.http",a],name:"__request"})]:[s.returnFunctionCall({args:["OpenAPI",a],name:"__request"})]},Wl=({client:e,onClientImport:t,onImport:r,onNode:n,service:o})=>{let a=R(),i=C(a),p=U(a);for(let u of o.operations)u.parameters.length&&er({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:tr,onImport:r}),p||er({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Cr,onImport:r}),u.responses.filter(g=>g.responseTypes.includes("success")).length&&er({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:tt,onImport:r});let c={default:("throwOnError"in i.config?i.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!a.plugins["@hey-api/sdk"]?.config.asClass&&!Vt(a)){for(let u of o.operations){let y={parameters:kp(e,u),returnType:p?vp(e,u):void 0,statements:qp({client:e,onClientImport:t,onImport:r,operation:u}),types:p?void 0:[c]},g=i.name==="legacy/angular"?s.anonymousFunction(y):s.arrowFunction(y),x=s.constVariable({comment:wp(u),exportConst:true,expression:g,name:Ee({config:a,handleIllegal:true,id:u.name,operation:u})});n(x);}return}let m=o.operations.map(u=>s.methodDeclaration({accessLevel:"public",comment:wp(u),isStatic:Vt(a)===void 0&&i.name!=="legacy/angular",name:Ee({config:a,id:u.name,operation:u}),parameters:kp(e,u),returnType:p?vp(e,u):void 0,statements:qp({client:e,onClientImport:t,onImport:r,operation:u}),types:p?void 0:[c]}));if(!m.length)return;Vt(a)?m=[s.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...m]:i.name==="legacy/angular"&&(m=[s.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...m]);let f=[];m.forEach((u,y)=>{y&&f.push(s.identifier({text:`
`})),f.push(u);});let l=s.classDeclaration({decorator:i.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:true,name:Ir({config:a,name:o.name}),nodes:f});n(l);},Mp=({client:e,files:t,plugin:r})=>{let n=R(),o=U(n),a="sdk";if(t.sdk=new Be({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"sdk",name:`${a}.ts`}),!o)t.sdk.import({module:ee({config:n,sourceOutput:a}),name:"createClient"}),t.sdk.import({module:ee({config:n,sourceOutput:a}),name:"createConfig"}),t.sdk.import({...Q.OptionsLegacyParser,module:ee({config:n,sourceOutput:a})});else if(C(n).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),Vt(n)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),n.plugins["@hey-api/sdk"]?.config.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),Vt(n)){let p=C(n);t.sdk.import({asType:p.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!o){let i=C(n),p=s.constVariable({exportConst:true,expression:s.callExpression({functionName:"createClient",parameters:[s.callExpression({functionName:"createConfig",parameters:["throwOnError"in i&&i.throwOnError?s.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(p);}for(let i of e.services)Wl({client:e,onClientImport:p=>{t.sdk.import({module:ee({config:n,sourceOutput:a}),name:p});},onImport:p=>{t.sdk.import({asType:!p.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:p});},onNode:p=>{t.sdk.add(p);},service:i});};var Fp=({clientOptions:e,plugin:t})=>{let r=t.context.file({id:de}),o=C(t.context.config).name==="@hey-api/client-nuxt",a=ee({config:t.context.config,sourceOutput:r.nameWithoutExtension()}),i=r.import({asType:true,module:a,name:"TDataShape"}),p=r.import({asType:true,module:a,name:"Client"}),c=s.typeAliasDeclaration({exportType:true,name:"Options",type:s.typeIntersectionNode({types:[s.typeReferenceNode({typeArguments:o?[s.typeReferenceNode({typeName:"TComposable"}),s.typeReferenceNode({typeName:"TData"}),s.typeReferenceNode({typeName:Ao}),s.typeReferenceNode({typeName:et})]:[s.typeReferenceNode({typeName:"TData"}),s.typeReferenceNode({typeName:"ThrowOnError"})],typeName:e.name}),s.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!t.config.client,name:"client",type:s.typeReferenceNode({typeName:p.name})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:s.typeReferenceNode({typeArguments:[s.keywordTypeNode({keyword:"string"}),s.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:o?[s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:"Composable"}),name:"TComposable"}),s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:i.name}),defaultType:s.typeReferenceNode({typeName:i.name}),name:"TData"}),s.typeParameterDeclaration({defaultType:s.keywordTypeNode({keyword:"unknown"}),name:Ao}),s.typeParameterDeclaration({defaultType:s.keywordTypeNode({keyword:"undefined"}),name:et})]:[s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:i.name}),defaultType:s.typeReferenceNode({typeName:i.name}),name:"TData"}),s.typeParameterDeclaration({constraint:s.keywordTypeNode({keyword:"boolean"}),defaultType:s.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});r.add(c);};var Zl=({plugin:e})=>{let t=s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:s.this(),name:"_client"}),operator:"=",right:s.propertyAccessExpression({expression:s.identifier({text:"args"}),name:"client"})})});return [s.propertyDeclaration({initializer:e.config.client?s.identifier({text:"_heyApiClient"}):void 0,modifier:"protected",name:"_client",type:b.factory.createTypeReferenceNode("Client")}),s.identifier({text:`
`}),s.constructorDeclaration({multiLine:true,parameters:[{isRequired:!e.config.client,name:"args",type:s.typeInterfaceNode({properties:[{isRequired:!e.config.client,name:"client",type:"Client"}],useLegacyResolution:false})}],statements:[e.config.client?s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"args"}),isOptional:true,name:"client"}),thenStatement:s.block({statements:[t]})}):t]})]},Ul=({plugin:e})=>{let t=C(e.context.config),r=t.name==="@hey-api/client-nuxt",n=e.context.file({id:de}),o=new Map,a=new Set,i=e.config.instance?Zl({plugin:e}):[];e.forEach("operation",({operation:c})=>{let m=Yt({context:e.context,operation:c}),f=e.getPlugin("@hey-api/typescript"),l=e.context.file({id:T}),u=n.import({asType:true,module:n.relativePathToFile({context:e.context,id:T}),name:r?l.getName(f.api.getId({operation:c,type:"response"})):void 0}),y=ds({context:e.context,operation:c,plugin:e});for(let g of y.values())g.path.forEach((x,S)=>{o.has(x)||o.set(x,{className:x,classes:new Set,methods:new Set,nodes:[],root:!S});let O=g.path[S-1];if(O&&O!==x){let D=o.get(O);D.classes.add(x),o.set(O,D);}if(!(g.path.length===S+1))return;let N=o.get(x);if(N.methods.has(g.methodName))return;let z=Eo({file:n,isRequiredOptions:m,operation:c,plugin:e}),V=jo({isRequiredOptions:m,opParameters:z,operation:c,plugin:e}),Z=s.methodDeclaration({accessLevel:"public",comment:yt({operation:c}),isStatic:!e.config.instance,name:g.methodName,parameters:z.parameters,returnType:void 0,statements:V,types:r?[{extends:s.typeNode("Composable"),name:Nr},{default:u.name?s.typeReferenceNode({typeName:u.name}):s.typeNode("undefined"),extends:u.name?s.typeReferenceNode({typeName:u.name}):void 0,name:et}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]});N.nodes.length?N.nodes.push(s.identifier({text:`
`}),Z):N.nodes.push(Z),N.methods.add(g.methodName),o.set(x,N);});});let p=c=>{if(a.has(c.className))return;if(c.classes.size)for(let f of c.classes){let l=o.get(f);p(l),c.nodes.push(s.propertyDeclaration({initializer:e.config.instance?s.newExpression({argumentsArray:e.config.instance?[s.objectExpression({multiLine:false,obj:[{key:"client",value:s.propertyAccessExpression({expression:s.this(),name:"_client"})}]})]:[],expression:s.identifier({text:l.className})}):s.identifier({text:l.className}),modifier:e.config.instance?void 0:"static",name:j({case:"camelCase",value:l.className})}));}let m=s.classDeclaration({exportClass:c.root,extendedClasses:e.config.instance?["_HeyApiClient"]:void 0,name:c.className,nodes:c.nodes});n.add(m),a.add(c.className);};if(i.length){let c=s.classDeclaration({exportClass:false,name:"_HeyApiClient",nodes:i});n.add(c);}for(let c of o.values())p(c);},Ql=({plugin:e})=>{let t=C(e.context.config),r=t.name==="@hey-api/client-nuxt",n=e.context.file({id:de});e.forEach("operation",({operation:o})=>{let a=Yt({context:e.context,operation:o}),i=e.getPlugin("@hey-api/typescript"),p=e.context.file({id:T}),c=n.import({asType:true,module:n.relativePathToFile({context:e.context,id:T}),name:r?p.getName(i.api.getId({operation:o,type:"response"})):void 0}),m=Eo({file:n,isRequiredOptions:a,operation:o,plugin:e}),f=jo({isRequiredOptions:a,opParameters:m,operation:o,plugin:e}),l=s.constVariable({comment:yt({operation:o}),exportConst:true,expression:s.arrowFunction({parameters:m.parameters,returnType:void 0,statements:f,types:r?[{extends:s.typeNode("Composable"),name:Nr},{default:c.name?s.typeReferenceNode({typeName:c.name}):s.typeNode("undefined"),extends:c.name?s.typeReferenceNode({typeName:c.name}):void 0,name:et}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:Ee({config:e.context.config,handleIllegal:true,id:o.id,operation:o})});n.add(l);});},Lp=({plugin:e})=>{let t=e.createFile({id:de,path:e.output}),r=ee({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({...Q.Options,alias:"ClientOptions",module:r});C(e.context.config).name==="@hey-api/client-nuxt"&&t.import({asType:true,module:r,name:"Composable"}),Fp({clientOptions:n,plugin:e}),e.config.asClass?Ul({plugin:e}):Ql({plugin:e});};var ys={config:{asClass:false,auth:true,classStructure:"auto",client:true,exportFromIndex:true,instance:false,operationId:true,params_EXPERIMENTAL:"default",response:"body",responseStyle:"fields",transformer:false,validator:false},dependencies:["@hey-api/typescript"],handler:Lp,handlerLegacy:Mp,name:"@hey-api/sdk",output:"sdk",resolveConfig:(e,t)=>{e.config.client?(typeof e.config.client=="boolean"&&(e.config.client=t.pluginByTag("client",{defaultPlugin:"@hey-api/client-fetch"})),e.dependencies.add(e.config.client)):e.config.client=false,e.config.transformer?(typeof e.config.transformer=="boolean"&&(e.config.transformer=t.pluginByTag("transformer")),e.dependencies.add(e.config.transformer)):e.config.transformer=false,typeof e.config.validator!="object"&&(e.config.validator={request:e.config.validator,response:e.config.validator}),e.config.validator.request?(typeof e.config.validator.request=="boolean"&&(e.config.validator.request=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.request)):e.config.validator.request=false,e.config.validator.response?(typeof e.config.validator.response=="boolean"&&(e.config.validator.response=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.response)):e.config.validator.response=false,e.config.instance?(typeof e.config.instance!="string"&&(e.config.instance="Sdk"),e.config.asClass=true):e.config.instance=false;}};var Gl="$OpenApiTs",me={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},Jl=({comments:e,leadingComment:t,meta:r,obj:n,onNode:o,...a})=>{if(!r)return;let{created:i,name:p}=Pe({create:true,meta:r,...a});if(i){let c=s.enumDeclaration({comments:e,leadingComment:t,name:p,obj:n});o(c);}},gt=({comment:e,meta:t,onCreated:r,onNode:n,type:o,...a})=>{if(!t)return {created:false,name:""};let i=Pe({create:true,meta:t,...a}),{created:p,name:c}=i;if(p){let m=s.typeAliasDeclaration({comment:e,exportType:true,name:c,type:o});n(m),r?.(c);}return i},Yl=e=>{let t=[];Dp(e),e.model.enums.forEach(r=>tu({...e,model:r,onNode:n=>{t.push(n);}})),t.length&&e.onNode(s.namespaceDeclaration({name:e.model.name,statements:t}));},eu=({client:e,model:t,onNode:r})=>{let n=R(),o={},a={};t.enum.forEach(c=>{let{key:m,value:f}=Fn(c);o[m]=f;let l=c.customDescription||c.description;l&&(a[m]=[K(l)]);});let i=[t.description&&K(t.description),t.deprecated&&"@deprecated"],p=n.plugins["@hey-api/typescript"];if(p?.config&&typeof p.config.enums=="object"&&p.config.enums.enabled&&p.config.enums.mode==="typescript"){Jl({client:e,comments:a,leadingComment:i,meta:t.meta,obj:o,onNode:r});return}gt({client:e,comment:i,meta:t.meta,onCreated:c=>{let m=n.plugins["@hey-api/typescript"];if(m?.config&&typeof m.config.enums=="object"&&m.config.enums.enabled&&m.config.enums.mode==="javascript"){let f=s.objectExpression({multiLine:true,obj:Object.entries(o).map(([u,y])=>({comments:a[u],key:u,value:y})),unescape:true}),l=s.constVariable({assertion:"const",comment:i,exportConst:true,expression:f,name:c});r(l);}},onNode:r,type:Za(t.enum)});},tu=({model:e,onNode:t})=>{let r={},n={};e.enum.forEach(o=>{let{key:a,value:i}=Fn(o);r[a]=i;let p=o.customDescription||o.description;p&&(n[a]=[K(p)]);}),t(s.enumDeclaration({comments:n,leadingComment:[e.description&&K(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},Dp=({client:e,model:t,onNode:r})=>{gt({client:e,comment:[t.description&&K(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:Ae(t)});},ru=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return Yl(e);case "enum":return eu(e);default:return Dp(e)}},nu=({client:e,onNode:t})=>{let r={},n=R();if(!n.plugins["@hey-api/sdk"]&&!n.plugins["@hey-api/typescript"]?.config.tree)return;let o=U(n);for(let i of e.services)for(let p of i.operations){if(!p.parameters.length&&!p.responses.length)continue;r[p.path]||(r[p.path]={});let c=r[p.path];c[p.method]||(c[p.method]={});let m=c[p.method];if(m.$ref=p.name,p.responses.length>0){if(m.res||(m.res={}),Array.isArray(m.res))continue;p.responses.forEach(l=>{m.res[l.code]=l;});}if(p.parameters.length>0){let l={mediaType:null,...me,in:"body",name:"body",prop:"body"},u=p.parameters.filter(O=>O.in==="body");u.length||(u=p.parameters.filter(O=>O.in==="formData")),u.length===1?l={...me,...u[0],in:"body",isRequired:u[0].isRequired,name:"body",prop:"body"}:u.length>1&&(l={...me,in:"body",isRequired:u.some(O=>O.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:u});let y={...me,in:"header",isRequired:Ye(p.parameters.filter(O=>O.in==="header")),mediaType:null,name:o?"header":"headers",prop:o?"header":"headers",properties:p.parameters.filter(O=>O.in==="header").sort(Zr)},g={...me,in:"path",isRequired:Ye(p.parameters.filter(O=>O.in==="path")),mediaType:null,name:"path",prop:"path",properties:p.parameters.filter(O=>O.in==="path").sort(Zr)},x={...me,in:"query",isRequired:Ye(p.parameters.filter(O=>O.in==="query")),mediaType:null,name:"query",prop:"query",properties:p.parameters.filter(O=>O.in==="query").sort(Zr)},S=o?Ha([...p.parameters]):[l,y,g,x].filter(O=>O.properties.length||O.$refs.length||O.mediaType);m.req=S,gt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:tr,onNode:t,type:Ae({...me,properties:S})});}let f=p.responses.filter(l=>l.responseTypes.includes("success"));if(f.length>0){gt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:tt,onNode:t,type:Ae({...me,export:"any-of",properties:f})});let l=p.responses.filter(u=>u.responseTypes.includes("error"));o||gt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Cr,onNode:t,type:Ae(l.length?{...me,export:"one-of",properties:l}:{...me,base:"unknown"})});}}let a=Object.entries(r).map(([i,p])=>{let c=Object.entries(p).map(([f,l])=>{let u=f,y=[];if(l.req){let x=l.$ref,{name:S}=Pe({client:e,meta:{$ref:x,name:x},nameTransformer:tr}),O={...me,base:S,export:"reference",isRequired:true,name:"req",properties:[],type:S};y=[...y,O];}if(l.res){let x=Object.entries(l.res).map(([O,w])=>({...me,...w,isRequired:true,name:String(O)})),S={...me,isRequired:true,name:"res",properties:x};y=[...y,S];}return {...me,isRequired:true,name:u.toLocaleLowerCase(),properties:y}}).filter(Boolean);return {...me,isRequired:true,name:`'${i}'`,properties:c}});n.plugins["@hey-api/typescript"]?.config.tree&&gt({client:e,meta:{$ref:"@hey-api/openapi-ts",name:Gl},onNode:t,type:Ae({...me,properties:a})});},Vp=({client:e,files:t,plugin:r})=>{let n=R();t.types=new Be({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"types",name:"types.ts"});let o=a=>{t.types?.add(a);};for(let a of e.models)ru({client:e,model:a,onNode:o});nu({client:e,onNode:o});};var wt="data",su=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",_p=({client:e,model:t})=>t.$refs.map(n=>{let o=e.models.find(a=>a.meta?.$ref===n);if(!o)throw new Error(`Ref ${n} could not be found. Transformers cannot be generated without having access to all refs.`);return o}),Bp=e=>{let t=e.model.meta.name,{name:r}=gt({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:$p,onCreated:o=>{let a=gs({...e,meta:{$ref:`transformers/${t}`,name:o},path:[wt]});zp({...e,async:false,name:o,statements:a});},type:`(${wt}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},ou=e=>{let{model:t}=e,r=_p(e);if(r.length===1){let{created:n,name:o}=Bp({...e,model:r[0]});return n?[s.transformArrayMutation({path:e.path,transformerName:o})]:[]}return Ur(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(n=>Ur(n))?[s.transformArrayMap({path:e.path,transformExpression:s.conditionalExpression({condition:s.identifier({text:"item"}),whenFalse:s.identifier({text:"item"}),whenTrue:s.transformNewDate({parameterName:"item"})})})]:[]},iu=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&Ur(t)?[s.transformDateMutation({path:r})]:gs({...e,model:t,path:r})},gs=e=>{let{model:t}=e;switch(t.export){case "array":return ou(e);case "interface":return t.properties.flatMap(r=>iu({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=_p(e),{created:n,name:o}=Bp({...e,model:r[0]});return n?t.in==="response"?[s.expressionToStatement({expression:s.callExpression({functionName:o,parameters:[wt]})})]:s.transformFunctionMutation({path:e.path,transformerName:o}):[]}default:return []}},zp=({async:e,client:t,name:r,onNode:n,onRemoveNode:o,statements:a})=>{let i={created:false,name:r};if(!a.length)return Xa({client:t,name:r}),o?.(),i;let p=s.arrowFunction({async:e,multiLine:true,parameters:[{name:wt}],statements:[...a,s.returnVariable({expression:wt})]}),c=s.constVariable({exportConst:true,expression:p,name:r,typeName:r});return n(c),{created:true,name:r}},Kp=({client:e,files:t})=>{let r=R(),n=a=>{t.types?.add(a);},o=()=>{t.types?.removeNode_LEGACY();};for(let a of e.services)for(let i of a.operations){let p=i.responses.filter(f=>f.responseTypes.includes("success"));if(!p.length)continue;let c=p.filter(f=>!su(f));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${v(i)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let m=tt(i.name);gt({client:e,meta:{$ref:`transformers/${m}`,name:m},nameTransformer:No,onCreated:f=>{let l=p.length>1?p.flatMap(u=>{let y=gs({client:e,meta:{$ref:`transformers/${m}`,name:m},model:u,onNode:n,onRemoveNode:o,path:[wt]});return y.length?[s.ifStatement({expression:s.safeAccessExpression(["data"]),thenStatement:s.block({statements:y})})]:[]}):gs({client:e,meta:{$ref:`transformers/${m}`,name:m},model:p[0],onNode:n,onRemoveNode:o,path:[wt]});zp({async:true,client:e,name:f,onNode:n,onRemoveNode:o,statements:l});},onNode:n,type:`(${wt}: any) => Promise<${m}>`});}};var hs={config:{bigInt:true,dates:true,exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:Pp,handlerLegacy:Kp,name:"@hey-api/transformers",output:"transformers",tags:["transformer"]};var Hp=({context:e,name:t})=>(re.lastIndex=0,re.test(t)?t.startsWith("-")?b.factory.createStringLiteral(t):b.factory.createNumericLiteral(t):j({case:e.config.output.case,value:t}));var we=({schema:e})=>{let t=[];return e.title&&t.push(K(e.title)),e.description&&t.push(K(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0};var xs=s.keywordTypeNode({keyword:"string"}),cu=({server:e})=>{let t=ze(e.url);return t.protocol&&t.host?s.literalTypeNode({literal:s.stringLiteral({text:e.url})}):s.templateLiteralType({value:[t.protocol||xs,"://",t.host||xs,t.port?`:${t.port}`:"",t.path||""]})},Zp=({nodeInfo:e,plugin:t,servers:r})=>{let n=t.context.file({id:T}),o=C(t.context.config),a=r.map(c=>cu({server:c}));r.length?"strictBaseUrl"in o.config&&o.config.strictBaseUrl||a.push(s.typeIntersectionNode({types:[xs,b.factory.createTypeLiteralNode([])]})):a.push(xs);let i=s.typeInterfaceNode({properties:[{name:Ce(t.context.config),type:s.typeUnionNode({types:a})}],useLegacyResolution:false}),p=s.typeAliasDeclaration({exportType:e.exported,name:e.node,type:i});n.add(p);};var ko=({parameters:e})=>{let t={type:"object"};if(e){let r={},n=[];for(let o in e){let a=e[o];r[a.name]=G({detectFormat:false,schema:a.schema}),a.required&&n.push(a.name);}t.properties=r,n.length&&(t.required=n);}return t},mu=({operation:e,plugin:t,state:r})=>{let n=t.context.file({id:T}),o={type:"object"},a=[];o.properties||(o.properties={}),e.body?(o.properties.body=e.body.schema,e.body.required&&a.push("body")):o.properties.body={type:"never"},e.parameters?.header&&(o.properties.headers=ko({parameters:e.parameters.header}),o.properties.headers.required&&a.push("headers")),e.parameters?.path?(o.properties.path=ko({parameters:e.parameters.path}),o.properties.path.required&&a.push("path")):o.properties.path={type:"never"},e.parameters?.query?(o.properties.query=ko({parameters:e.parameters.query}),o.properties.query.required&&a.push("query")):o.properties.query={type:"never"},o.properties.url={const:e.path,type:"string"},a.push("url"),o.required=a;let i=q({config:t.config.requests,name:e.id}),p=n.updateNode(t.api.getId({operation:e,type:"data"}),{exported:true,name:i}),c=fe({onRef:void 0,plugin:t,schema:o,state:r}),m=s.typeAliasDeclaration({exportType:p.exported,name:p.node,type:c});n.add(m);},Up=({operation:e,plugin:t,state:r})=>{mu({operation:e,plugin:t,state:r});let n=t.context.file({id:T}),{error:o,errors:a,response:i,responses:p}=We(e);if(a){let c=q({config:t.config.errors,name:e.id}),m=n.updateNode(t.api.getId({operation:e,type:"errors"}),{exported:true,name:c}),f=fe({onRef:void 0,plugin:t,schema:a,state:r}),l=s.typeAliasDeclaration({exportType:m.exported,name:m.node,type:f});if(n.add(l),o){let u=q({config:{case:t.config.errors.case,name:t.config.errors.error},name:e.id}),y=n.updateNode(t.api.getId({operation:e,type:"error"}),{exported:true,name:u}),g=s.indexedAccessTypeNode({indexType:b.factory.createTypeOperatorNode(b.SyntaxKind.KeyOfKeyword,m.node),objectType:m.node}),x=s.typeAliasDeclaration({exportType:y.exported,name:y.node,type:g});n.add(x);}}if(p){let c=q({config:t.config.responses,name:e.id}),m=n.updateNode(t.api.getId({operation:e,type:"responses"}),{exported:true,name:c}),f=fe({onRef:void 0,plugin:t,schema:p,state:r}),l=s.typeAliasDeclaration({exportType:m.exported,name:m.node,type:f});if(n.add(l),i){let u=q({config:{case:t.config.responses.case,name:t.config.responses.response},name:e.id}),y=n.updateNode(t.api.getId({operation:e,type:"response"}),{exported:true,name:u}),g=s.indexedAccessTypeNode({indexType:b.factory.createTypeOperatorNode(b.SyntaxKind.KeyOfKeyword,m.node),objectType:m.node}),x=s.typeAliasDeclaration({exportType:y.exported,name:y.node,type:g});n.add(x);}}};var fu=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((o,a)=>{let i=typeof o.const;r.includes(i)||r.push(i);let p;return o.title?p=o.title:i==="number"||i==="string"?p=`${o.const}`:i==="boolean"?p=o.const?"true":"false":o.const===null?p="null":p=`${a}`,p&&(p=j({case:e.config.enums.case,stripLeadingSeparators:false,value:p}),re.lastIndex=0,re.test(p)&&e.config.enums.enabled&&e.config.enums.mode==="typescript"&&(p=`_${p}`)),{comments:we({schema:o}),key:p,value:o.const}}),typeofItems:r}},lu=({onRef:e,plugin:t,schema:r,state:n})=>{if(!r.items)return s.typeArrayNode(s.keywordTypeNode({keyword:"unknown"}));r=G({detectFormat:false,schema:r});let o=[];for(let a of r.items){let i=fe({onRef:e,plugin:t,schema:a,state:n});o.push(i);}return o.length===1?s.typeArrayNode(o[0]):r.logicalOperator==="and"?s.typeArrayNode(s.typeIntersectionNode({types:o})):s.typeArrayNode(s.typeUnionNode({types:o}))},uu=({schema:e})=>e.const!==void 0?s.literalTypeNode({literal:s.ots.boolean(e.const)}):s.keywordTypeNode({keyword:"boolean"}),du=({onRef:e,plugin:t,schema:r,state:n})=>fe({onRef:e,plugin:t,schema:{...r,type:void 0},state:n}),yu=({plugin:e,schema:t})=>t.const!==void 0?s.literalTypeNode({literal:s.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.getPlugin("@hey-api/transformers")?.config.bigInt?s.typeReferenceNode({typeName:"bigint"}):s.keywordTypeNode({keyword:"number"}),gu=({onRef:e,plugin:t,schema:r,state:n})=>{let o,a,i=[],p=[],c=r.required??[],m=false;for(let f in r.properties){let l=r.properties[f],u=fe({onRef:e,plugin:t,schema:l,state:n}),y=c.includes(f);i.push({comment:we({schema:l}),isReadOnly:l.accessScope==="read",isRequired:y,name:Hp({context:t.context,name:f}),type:u}),p.push(l),y||(m=true);}return r.additionalProperties&&(r.additionalProperties.type!=="never"||!p.length)&&(r.additionalProperties.type==="never"?p=[r.additionalProperties]:p.unshift(r.additionalProperties),m&&p.push({type:"undefined"}),a={isRequired:!r.propertyNames,name:"key",type:fe({onRef:e,plugin:t,schema:p.length===1?p[0]:{items:p,logicalOperator:"or"},state:n})},r.propertyNames?.$ref&&(o=fe({onRef:e,plugin:t,schema:{$ref:r.propertyNames.$ref},state:n}))),s.typeInterfaceNode({indexKey:o,indexProperty:a,properties:i,useLegacyResolution:false})},hu=({plugin:e,schema:t,state:r})=>{if(t.const!==void 0)return s.literalTypeNode({literal:s.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return s.typeUnionNode({types:[s.typeReferenceNode({typeName:"Blob"}),s.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.getPlugin("@hey-api/transformers")?.config.dates)return s.typeReferenceNode({typeName:"Date"});if(t.format==="typeid"&&typeof t.example=="string"){let n=String(t.example).split("_");n.pop();let o=n.join("_");r.usedTypeIDs.add(o);let a=Re(j({case:e.config.case,value:o+"_id"}));return s.typeReferenceNode({typeName:a})}}return s.keywordTypeNode({keyword:"string"})},xu=({onRef:e,plugin:t,schema:r,state:n})=>{let o=[];if(r.const&&Array.isArray(r.const))o=r.const.map(a=>s.valueToExpression({value:a})??s.identifier({text:"unknown"}));else if(r.items)for(let a of r.items){let i=fe({onRef:e,plugin:t,schema:a,state:n});o.push(i);}return s.typeTupleNode({types:o})},Xp=({onRef:e,plugin:t,schema:r,state:n})=>{let o=t.getPlugin("@hey-api/transformers");if(o?.config.typeTransformers)for(let a of o.config.typeTransformers){let i=t.context.file({id:T}),p=a({file:i,schema:r});if(p)return p}switch(r.type){case "array":return lu({onRef:e,plugin:t,schema:r,state:n});case "boolean":return uu({schema:r});case "enum":return du({onRef:e,plugin:t,schema:r,state:n});case "integer":case "number":return yu({plugin:t,schema:r});case "never":return s.keywordTypeNode({keyword:"never"});case "null":return s.literalTypeNode({literal:s.null()});case "object":return gu({onRef:e,plugin:t,schema:r,state:n});case "string":return hu({plugin:t,schema:r,state:n});case "tuple":return xu({onRef:e,plugin:t,schema:r,state:n});case "undefined":return s.keywordTypeNode({keyword:"undefined"});case "unknown":return s.keywordTypeNode({keyword:"unknown"});case "void":return s.keywordTypeNode({keyword:"void"})}},fe=({onRef:e,plugin:t,schema:r,state:n})=>{let o=t.context.file({id:T});if(r.$ref)return e&&e(t.api.getId({type:"ref",value:r.$ref})),o.getNode(t.api.getId({type:"ref",value:r.$ref})).node;if(r.type)return Xp({onRef:e,plugin:t,schema:r,state:n});if(r.items){if(r=G({detectFormat:false,schema:r}),r.items){let a=[];for(let i of r.items){let p=fe({onRef:e,plugin:t,schema:i,state:n});a.push(p);}return r.logicalOperator==="and"?s.typeIntersectionNode({types:a}):s.typeUnionNode({types:a})}return fe({onRef:e,plugin:t,schema:r,state:n})}return Xp({onRef:e,plugin:t,schema:{type:"unknown"},state:n})},bu=({id:e,plugin:t,schema:r,type:n})=>{let o=t.context.file({id:T}),a=o.getNode(t.api.getId({type:"ref",value:e}));if(r.type==="enum"&&t.config.enums.enabled){let p=fu({plugin:t,schema:r});if(t.config.enums.mode==="javascript"){t.config.enums.constantsIgnoreNull&&p.typeofItems.includes("object")&&(p.obj=p.obj.filter(u=>u.value!==null));let c=s.constVariable({assertion:"const",comment:we({schema:r}),exportConst:a.exported,expression:s.objectExpression({multiLine:true,obj:p.obj}),name:a.node});o.add(c);let m=s.typeOfExpression({text:a.node.typeName}),f=b.factory.createTypeOperatorNode(b.SyntaxKind.KeyOfKeyword,m),l=s.typeAliasDeclaration({comment:we({schema:r}),exportType:a.exported,name:a.node,type:s.indexedAccessTypeNode({indexType:f,objectType:m})});o.add(l);return}else if(t.config.enums.mode==="typescript"&&!p.typeofItems.some(m=>m!=="number"&&m!=="string")){let m=s.enumDeclaration({leadingComment:we({schema:r}),name:a.node,obj:p.obj});o.add(m);return}}let i=s.typeAliasDeclaration({comment:we({schema:r}),exportType:a.exported,name:a.node,type:n});o.add(i);},vo=({id:e,plugin:t,schema:r,state:n})=>{let o=t.context.file({id:T}),a=fe({onRef:void 0,plugin:t,schema:r,state:n}),i=q({config:t.config.definitions,name:_(e)});o.updateNode(t.api.getId({type:"ref",value:e}),{exported:true,name:i}),bu({id:e,plugin:t,schema:r,type:a});},Gp=({plugin:e})=>{let t={usedTypeIDs:new Set},r=e.createFile({case:e.config.case,id:T,path:e.output}),n=q({config:{case:e.config.case},name:"ClientOptions"}),o=r.updateNode(e.api.getId({type:"ClientOptions"}),{exported:true,name:n}),a=[];if(e.forEach("operation","parameter","requestBody","schema","server",i=>{i.type==="operation"?Up({operation:i.operation,plugin:e,state:t}):i.type==="parameter"?vo({id:i.$ref,plugin:e,schema:i.parameter.schema,state:t}):i.type==="requestBody"?vo({id:i.$ref,plugin:e,schema:i.requestBody.schema,state:t}):i.type==="schema"?vo({id:i.$ref,plugin:e,schema:i.schema,state:t}):i.type==="server"&&a.push(i.server);}),t.usedTypeIDs.size){let i=s.typeParameterDeclaration({constraint:s.keywordTypeNode({keyword:"string"}),name:"T"}),p=s.typeAliasDeclaration({exportType:true,name:"TypeID",type:s.templateLiteralType({value:[s.typeReferenceNode({typeName:"T"}),"_",s.keywordTypeNode({keyword:"string"})]}),typeParameters:[i]});r.add(p);for(let c of t.usedTypeIDs.values()){let m=Re(j({case:e.config.case,value:c+"_id"})),f=s.typeAliasDeclaration({exportType:true,name:m,type:s.typeReferenceNode({typeArguments:[s.literalTypeNode({literal:s.stringLiteral({text:c})})],typeName:"TypeID"})});r.add(f);}}Zp({nodeInfo:o,plugin:e,servers:a});};var Ou=e=>{switch(e.type){case "data":case "error":case "errors":case "response":case "responses":return `${e.operation.id}-${e.type}`;case "ref":return e.value;default:return e.type}},Jp={getId:Ou,schemaToType:e=>fe({onRef:void 0,...e})};var Os={api:Jp,config:{case:"PascalCase",exportFromIndex:true,style:"preserve",tree:false},handler:Gp,handlerLegacy:Vp,name:"@hey-api/typescript",output:"types",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.definitions}),e.config.enums=t.valueToObject({defaultValue:{case:"SCREAMING_SNAKE_CASE",constantsIgnoreNull:false,enabled:!!e.config.enums,mode:"javascript"},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.config.enums}),e.config.errors=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",error:"{{name}}Error",name:"{{name}}Errors"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.errors}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}Data"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"PascalCase",name:"{{name}}Responses",response:"{{name}}Response"},mappers:{function:r=>({name:r}),string:r=>({name:r})},value:e.config.responses});}};var kr=(e,t,r)=>{let n=e.config[r].meta;if(typeof n!="function")return;let o=n(t);return s.valueToExpression({value:o})};var qt=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name}),n=t.getPlugin("@hey-api/sdk");return Po({file:r,operation:e,plugin:n})},Ss=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name}),n=t.getPlugin("@hey-api/typescript"),o=t.context.file({id:T}),i={asType:true,name:r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:o.getName(n.api.getId({operation:e,type:"error"}))}).name||""};if(i.name||(i=r.import({asType:true,module:t.name,name:"DefaultError"})),C(t.context.config).name==="@hey-api/client-axios"){let c=r.import({asType:true,module:"axios",name:"AxiosError"});i={...c,name:`${c.name}<${i.name}>`};}return i},Ts=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name}),n=t.getPlugin("@hey-api/typescript"),o=t.context.file({id:T});return r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:o.getName(n.api.getId({operation:e,type:"response"}))}).name||"unknown"};var ec="createQueryKey",Is="QueryKey",Jr="TOptions",Yp=s.identifier({text:"infinite"}),Rs=s.identifier({text:"options"}),As=({plugin:e})=>{let t=e.context.file({id:e.name}),r=t.identifier({$ref:`#/tanstack-query-create-query-key/${ec}`,case:e.config.case,create:true,namespace:"value"});if(r.name){let n=s.indexedAccessTypeNode({indexType:s.literalTypeNode({literal:s.ots.number(0)}),objectType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:Jr})],typeName:Is})}),o=Ce(e.context.config),a=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:s.typeReferenceNode({typeName:Jr})},{isRequired:false,name:"infinite",type:s.typeReferenceNode({typeName:"boolean"})},{isRequired:false,name:"tags",type:s.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],returnType:s.typeTupleNode({types:[n]}),statements:[s.constVariable({assertion:n,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:o,value:s.identifier({text:`options?.${o} || (options?.client ?? _heyApiClient).getConfig().${o}`})}]}),name:"params",typeName:n}),s.ifStatement({expression:Yp,thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"_infinite"}),right:Yp})})]})}),s.ifStatement({expression:s.identifier({text:"tags"}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"tags"}),right:s.identifier({text:"tags"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Rs,isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Rs,isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Rs,isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Rs,isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.propertyAccessExpression({expression:"options",name:"query"})})})]})}),s.returnStatement({expression:s.arrayLiteralExpression({elements:[s.identifier({text:"params"})]})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:Q.Options.name})}),name:Jr}]}),name:r.name});t.add(a);}},Tu=({id:e,isInfinite:t,operation:r,plugin:n})=>{let a=n.context.file({id:n.name}).identifier({$ref:`#/tanstack-query-create-query-key/${ec}`,case:n.config.case,namespace:"value"}),i=t?n.config.infiniteQueryKeys:n.config.queryKeys,p;return i.tags&&r.tags&&r.tags.length>0&&(p=s.arrayLiteralExpression({elements:r.tags.map(m=>s.stringLiteral({text:m}))})),s.callExpression({functionName:a.name||"",parameters:[s.ots.string(e),"options",t||p?s.ots.boolean(!!t):void 0,p||void 0]})},Ps=({plugin:e})=>{let t=e.context.file({id:e.name}),r=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:s.keywordTypeNode({keyword:"boolean"})},{isRequired:false,name:"tags",type:s.typeReferenceNode({typeName:"ReadonlyArray<string>"})}],n=s.typeAliasDeclaration({exportType:true,name:Is,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${Jr}, '${Ce(e.context.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),s.typeInterfaceNode({properties:r,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:Q.Options.name})}),name:Jr}]});t.add(n);},Es=({isInfinite:e,operation:t,plugin:r,typeQueryKey:n})=>{let o=r.context.file({id:r.name}),a=qt({operation:t,plugin:r}),i=e?o.identifier({$ref:`#/tanstack-query-infinite-query-key/${t.id}`,case:r.config.infiniteQueryKeys.case,create:true,nameTransformer:r.config.infiniteQueryKeys.name,namespace:"value"}):o.identifier({$ref:`#/tanstack-query-query-key/${t.id}`,case:r.config.queryKeys.case,create:true,nameTransformer:r.config.queryKeys.name,namespace:"value"});return s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:An(t),name:"options",type:a}],returnType:e?n:void 0,statements:Tu({id:t.id,isInfinite:e,operation:t,plugin:r})}),name:i.name||""})};var rc="createInfiniteParams",tc="infiniteQueryOptions",Iu=({plugin:e})=>{let t=e.context.file({id:e.name}),r=t.identifier({$ref:`#/tanstack-query-create-infinite-params/${rc}`,case:e.config.case,create:true,namespace:"value"}),n=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:s.typeReferenceNode({typeName:`QueryKey<${Q.Options.name}>`})},{name:"page",type:s.typeReferenceNode({typeName:"K"})}],statements:[s.constVariable({expression:s.objectExpression({obj:[{spread:s.propertyAccessExpression({expression:"queryKey",name:0})}]}),name:"params"}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),s.returnVariable({expression:s.asExpression({expression:s.asExpression({expression:s.identifier({text:"params"}),type:s.keywordTypeNode({keyword:"unknown"})}),type:b.factory.createTypeQueryNode(s.identifier({text:"page"}))})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:`Pick<QueryKey<${Q.Options.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:r.name||""});t.add(n);},nc=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.infiniteQueryOptions||!["get","post"].includes(e.method))return n;let o=na({context:t.context,operation:e});if(!o)return n;let a=t.context.file({id:t.name}),i=Yt({context:t.context,operation:e});n.hasInfiniteQueries||(n.hasInfiniteQueries=true,n.hasCreateQueryKeyParamsFunction||(Ps({plugin:t}),As({plugin:t}),n.hasCreateQueryKeyParamsFunction=true),n.hasCreateInfiniteParamsFunction||(Iu({plugin:t}),n.hasCreateInfiniteParamsFunction=true),a.import({module:t.name,name:tc}),n.typeInfiniteData=a.import({asType:true,module:t.name,name:"InfiniteData"})),n.hasUsedQueryFn=true;let p=qt({operation:e,plugin:t}),c=Ss({operation:e,plugin:t}),m=Ts({operation:e,plugin:t}),f=`${Is}<${p}>`,l=`Pick<${f}[0], 'body' | 'headers' | 'path' | 'query'>`,u=t.getPlugin("@hey-api/typescript"),y={usedTypeIDs:new Set},g=u.api.schemaToType({plugin:u,schema:o.schema,state:y}),x=`${Le({node:g,unescape:true})} | ${l}`,S=Es({isInfinite:true,operation:e,plugin:t,typeQueryKey:f});a.add(S);let O=a.identifier({$ref:`#/tanstack-query-infinite-query-key/${e.id}`,case:t.config.infiniteQueryKeys.case,nameTransformer:t.config.infiniteQueryKeys.name,namespace:"value"}),w=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),N=a.identifier({$ref:`#/tanstack-query-create-infinite-params/${rc}`,case:t.config.case,namespace:"value"}),z=[s.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:s.conditionalExpression({condition:s.binaryExpression({left:s.typeOfExpression({text:"pageParam"}),operator:"===",right:s.ots.string("object")}),whenFalse:s.objectExpression({multiLine:true,obj:[{key:o.in,value:s.objectExpression({multiLine:true,obj:[{key:o.name,value:s.identifier({text:"pageParam"})}]})}]}),whenTrue:s.identifier({text:"pageParam"})}),name:"page",typeName:l}),s.constVariable({expression:s.callExpression({functionName:N.name||"",parameters:["queryKey","page"]}),name:"params"})];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?z.push(s.returnVariable({expression:w})):z.push(s.constVariable({destructure:true,expression:w,name:"data"}),s.returnVariable({expression:"data"}));let V=a.identifier({$ref:`#/tanstack-query-infinite-query-options/${e.id}`,case:t.config.infiniteQueryOptions.case,create:true,nameTransformer:t.config.infiniteQueryOptions.name,namespace:"value"}),Z=[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:z})},{key:"queryKey",value:s.callExpression({functionName:O.name||"",parameters:["options"]})}],D=kr(t,e,"infiniteQueryOptions");D&&Z.push({key:"meta",value:D});let $=s.constVariable({comment:t.config.comments?yt({operation:e}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:i,name:"options",type:p}],statements:[s.returnFunctionCall({args:[s.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:Z})],name:tc,types:[m,c.name||"unknown",`${typeof n.typeInfiniteData=="string"?n.typeInfiniteData:n.typeInfiniteData.name}<${m}>`,f,x]})]}),name:V.name||""});a.add($);};var sc="mutationOptions",oc=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.mutationOptions.enabled||!["delete","patch","post","put"].includes(e.method))return n;let o=t.name==="@tanstack/angular-query-experimental"||t.name==="@tanstack/svelte-query"||t.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",a=t.context.file({id:t.name});n.hasMutations||(n.hasMutations=true,a.import({asType:true,module:t.name,name:o})),n.hasUsedQueryFn=true;let i=qt({operation:e,plugin:t}),p=Ss({operation:e,plugin:t}),c=Ts({operation:e,plugin:t}),m=`${o}<${c}, ${p.name}, ${i}>`,f=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),l=[];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?l.push(s.returnVariable({expression:f})):l.push(s.constVariable({destructure:true,expression:f,name:"data"}),s.returnVariable({expression:"data"}));let u=a.identifier({$ref:`#/tanstack-query-mutation-options/${e.id}`,case:t.config.mutationOptions.case,create:true,nameTransformer:t.config.mutationOptions.name,namespace:"value"}),y=[{key:"mutationFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:l})}],g=kr(t,e,"mutationOptions");g&&y.push({key:"meta",value:g});let x=s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${i}>`}],returnType:m,statements:[s.constVariable({expression:s.objectExpression({obj:y}),name:sc,typeName:m}),s.returnVariable({expression:sc})]}),S=s.constVariable({comment:t.config.comments?yt({operation:e}):void 0,exportConst:true,expression:x,name:u.name||""});return a.add(S),n};var ic="queryOptions",ac=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.queryOptions||!["get","post"].includes(e.method))return n;let o=t.context.file({id:t.name}),a=Yt({context:t.context,operation:e});n.hasQueries||(n.hasQueries=true,n.hasCreateQueryKeyParamsFunction||(Ps({plugin:t}),As({plugin:t}),n.hasCreateQueryKeyParamsFunction=true),o.import({module:t.name,name:ic})),n.hasUsedQueryFn=true;let i=Es({isInfinite:false,operation:e,plugin:t});o.add(i);let p=qt({operation:e,plugin:t}),c=o.identifier({$ref:`#/tanstack-query-query-key/${e.id}`,case:t.config.queryKeys.case,nameTransformer:t.config.queryKeys.name,namespace:"value"}),m=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),f=[];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?f.push(s.returnVariable({expression:m})):f.push(s.constVariable({destructure:true,expression:m,name:"data"}),s.returnVariable({expression:"data"}));let l=o.identifier({$ref:`#/tanstack-query-query-options/${e.id}`,case:t.config.queryOptions.case,create:true,nameTransformer:t.config.queryOptions.name,namespace:"value"}),u=[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:f})},{key:"queryKey",value:s.callExpression({functionName:c.name||"",parameters:["options"]})}],y=kr(t,e,"queryOptions");y&&u.push({key:"meta",value:y});let g=s.constVariable({comment:t.config.comments?yt({operation:e}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:a,name:"options",type:p}],statements:[s.returnFunctionCall({args:[s.objectExpression({obj:u})],name:ic})]}),name:l.name||""});return o.add(g),n};var rt=({plugin:e})=>{let t=e.createFile({case:e.config.case,id:e.name,path:e.output}),r={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false,typeInfiniteData:void 0};t.import({...Q.Options,module:t.relativePathToFile({context:e.context,id:de})}),e.forEach("operation",({operation:n})=>{r.hasUsedQueryFn=false;let o=e.getPlugin("@hey-api/sdk"),a=o?.config.asClass?ds({context:e.context,operation:n,plugin:o}):void 0,i=a?a.values().next().value:void 0,p=(i?[i.path[0],...i.path.slice(1).map(c=>j({case:"camelCase",value:c})),i.methodName].filter(Boolean):[Ee({config:e.context.config,handleIllegal:true,id:n.id,operation:n})]).join(".");ac({operation:n,plugin:e,queryFn:p,state:r}),nc({operation:n,plugin:e,queryFn:p,state:r}),oc({operation:n,plugin:e,queryFn:p,state:r}),r.hasUsedQueryFn&&t.import({module:t.relativePathToFile({context:e.context,id:de}),name:p.split(".")[0]});}),(r.hasQueries||r.hasInfiniteQueries)&&t.import({alias:"_heyApiClient",module:t.relativePathToFile({context:e.context,id:Fe}),name:"client"});};var Au=e=>`${Ee({config:R(),id:e.name,operation:e})}InfiniteOptions`,Pu=e=>`${Ee({config:R(),id:e.name,operation:e})}Mutation`,Eu=({config:e,id:t,operation:r})=>`${Ee({config:e,id:t,operation:r})}Options`,js=({config:e,id:t,isInfinite:r,operation:n})=>`${Ee({config:e,id:t,operation:n})}${r?"Infinite":""}QueryKey`,ju=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},Nu="createInfiniteParams",gc="createQueryKey",pc="infiniteQueryOptions",cc="mutationOptions",qo="QueryKey",mc="queryOptions",en="TOptions",Cu=({file:e})=>{let t=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:s.typeNode(`QueryKey<${Q.OptionsLegacyParser.name}>`)},{name:"page",type:s.typeNode("K")}],statements:[s.constVariable({expression:s.identifier({text:"queryKey[0]"}),name:"params"}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),s.returnVariable({expression:b.factory.createAsExpression(b.factory.createAsExpression(s.identifier({text:"params"}),b.factory.createKeywordTypeNode(b.SyntaxKind.UnknownKeyword)),b.factory.createTypeQueryNode(s.identifier({text:"page"})))})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:`Pick<QueryKey<${Q.OptionsLegacyParser.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:Nu});e.add(t);},fc=({file:e})=>{let t=s.indexedAccessTypeNode({indexType:s.typeNode(0),objectType:s.typeNode(qo,[s.typeNode(en)])}),r=s.identifier({text:"infinite"}),n=Ce(R()),o=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeNode("string")},{isRequired:false,name:"options",type:s.typeNode(en)},{isRequired:false,name:"infinite",type:s.typeNode("boolean")}],returnType:t,statements:[s.constVariable({assertion:t,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:n,value:s.identifier({text:`options?.${n} || (options?.client ?? _heyApiClient).getConfig().${n}`})}]}),name:"params",typeName:t}),s.ifStatement({expression:r,thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.propertyAccessExpression({expression:"options",name:"query"})})})]})}),s.returnVariable({expression:"params"})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:Q.OptionsLegacyParser.name})}),name:en}]}),name:gc});e.add(o);},lc=({file:e})=>{let t=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:s.keywordTypeNode({keyword:"boolean"})}],r=s.typeAliasDeclaration({name:qo,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${en}, '${Ce(R())}' | 'body' | 'headers' | 'path' | 'query'>`}),s.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:Q.OptionsLegacyParser.name})}),name:en}]});e.add(r);},wo=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:o}=er({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:tr,onImport:i=>{t.import({asType:true,module:n,name:i});}});return {typeData:Co({importedType:o})}},uc=({client:e,file:t,operation:r,pluginName:n,typesModulePath:o})=>{let a=R(),{name:i}=er({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Cr,onImport:m=>{t.import({asType:true,module:o,name:m});}}),p={asType:true,name:i};if(p.name||(p=t.import({asType:true,module:n,name:"DefaultError"})),C(a).name==="@hey-api/client-axios"){let m=t.import({asType:true,module:"axios",name:"AxiosError"});p={...m,name:`${m.name}<${p.name}>`};}return {typeError:p}},dc=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:o}=er({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:tt,onImport:i=>{t.import({asType:true,module:n,name:i});}});return {typeResponse:o||"void"}},yc=({id:e,isInfinite:t})=>s.arrayLiteralExpression({elements:[s.callExpression({functionName:gc,parameters:[s.ots.string(e),"options",t?s.ots.boolean(true):void 0]})],multiLine:false}),nt=({client:e,files:t,plugin:r})=>{let n=R();if(U(n))throw new Error("TanStack Query plugin does not support legacy clients");let o=t[r.name];o.import({...Q.OptionsLegacyParser,module:ee({config:n,sourceOutput:r.output})});let a=nr({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),i=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",p,c=false,m=false,f=false,l=false,u=false,y=new Map;for(let g of e.services)for(let x of g.operations){let S=v(x);if(y.has(S))continue;y.set(S,true);let O=[n.plugins["@hey-api/sdk"]?.config.asClass&&Ir({config:n,name:g.name}),Ee({config:n,handleIllegal:!n.plugins["@hey-api/sdk"]?.config.asClass,id:x.name,operation:x})].filter(Boolean).join("."),w=false;if(r.config.queryOptions&&["GET","POST"].includes(x.method)){u||(u=true,m||(lc({file:o}),fc({file:o}),m=true),o.import({module:r.name,name:mc})),w=true;let{typeData:N}=wo({client:e,file:o,operation:x,typesModulePath:a}),z=Ye(x.parameters),V=s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:z,name:"options",type:N}],statements:yc({id:x.name})}),name:js({config:n,id:x.name,operation:x})});o.add(V);let Z=s.constVariable({comment:[],exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:z,name:"options",type:N}],statements:[s.returnFunctionCall({args:[s.objectExpression({obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:O,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})},{key:"queryKey",value:s.callExpression({functionName:js({config:n,id:x.name,operation:x}),parameters:["options"]})}]})],name:mc})]}),name:Eu({config:n,id:x.name,operation:x})});o.add(Z);}if(r.config.infiniteQueryOptions&&["GET","POST"].includes(x.method)){let N,z=x.parameters.find(V=>{if(xe(n.parser.pagination).test(V.name))return N=V,true;if(V.in==="body"){if(V.export==="reference"){let D=V.$refs[0];return e.models.find(J=>J.meta?.$ref===D)?.properties.find(J=>{if(xe(n.parser.pagination).test(J.name))return N=J,true})}return V.properties.find(D=>{if(xe(n.parser.pagination).test(D.name))return N=D,true})}});if(z&&N){f||(f=true,m||(lc({file:o}),fc({file:o}),m=true),c||(Cu({file:o}),c=true),o.import({module:r.name,name:pc}),p=o.import({asType:true,module:r.name,name:"InfiniteData"})),w=true;let{typeData:V}=wo({client:e,file:o,operation:x,typesModulePath:a}),{typeError:Z}=uc({client:e,file:o,operation:x,pluginName:r.name,typesModulePath:a}),{typeResponse:D}=dc({client:e,file:o,operation:x,typesModulePath:a}),$=Ye(x.parameters),J=`${qo}<${V}>`,je=`Pick<${J}[0], 'body' | 'headers' | 'path' | 'query'>`,$e=`${N.base} | ${je}`,rr=s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:$,name:"options",type:V}],returnType:J,statements:yc({id:x.name,isInfinite:true})}),name:js({config:n,id:x.name,isInfinite:true,operation:x})});o.add(rr);let Bc=s.constVariable({comment:[],exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:$,name:"options",type:V}],statements:[s.returnFunctionCall({args:[s.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[s.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:s.conditionalExpression({condition:s.binaryExpression({left:s.typeOfExpression({text:"pageParam"}),operator:"===",right:s.ots.string("object")}),whenFalse:s.objectExpression({multiLine:true,obj:[{key:ju(z),value:s.objectExpression({multiLine:true,obj:[{key:N.name,value:s.identifier({text:"pageParam"})}]})}]}),whenTrue:s.identifier({text:"pageParam"})}),name:"page",typeName:je}),s.constVariable({expression:s.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:O,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})},{key:"queryKey",value:s.callExpression({functionName:js({config:n,id:x.name,isInfinite:true,operation:x}),parameters:["options"]})}]})],name:pc,types:[D,Z.name,`${typeof p=="string"?p:p.name}<${D}>`,J,$e]})]}),name:Au(x)});o.add(Bc);}}if(r.config.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(x.method)){l||(l=true,o.import({asType:true,module:r.name,name:i})),w=true;let{typeData:N}=wo({client:e,file:o,operation:x,typesModulePath:a}),{typeError:z}=uc({client:e,file:o,operation:x,pluginName:r.name,typesModulePath:a}),{typeResponse:V}=dc({client:e,file:o,operation:x,typesModulePath:a}),Z=s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${N}>`}],statements:[s.constVariable({expression:s.objectExpression({obj:[{key:"mutationFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:O,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})}]}),name:cc,typeName:`${i}<${V}, ${z.name}, ${N}>`}),s.returnVariable({expression:cc})]}),D=s.constVariable({comment:[],exportConst:true,expression:Z,name:Pu(x)});o.add(D);}(u||f)&&o.import({alias:"_heyApiClient",module:nr({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),w&&o.import({module:nr({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:O.split(".")[0]});}};var Ns={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:rt,handlerLegacy:nt,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var Cs={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:rt,handlerLegacy:nt,name:"@tanstack/react-query",output:"@tanstack/react-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var ks={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:rt,handlerLegacy:nt,name:"@tanstack/solid-query",output:"@tanstack/solid-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var vs={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:rt,handlerLegacy:nt,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var ws={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:rt,handlerLegacy:nt,name:"@tanstack/vue-query",output:"@tanstack/vue-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey",tags:false},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,meta:false,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.queryOptions});}};var hc="fastify",Mu=({operation:e,plugin:t})=>{let r=t.context.file({id:hc}),n=[],o=t.getPlugin("@hey-api/typescript"),a=t.context.file({id:T}),i=a.getName(o.api.getId({operation:e,type:"data"}));i&&(e.body&&(r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:i}),n.push({isRequired:e.body.required,name:"Body",type:`${i}['body']`})),e.parameters&&(e.parameters.header&&(r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:i}),n.push({isRequired:At(e.parameters.header),name:"Headers",type:`${i}['headers']`})),e.parameters.path&&(r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:i}),n.push({isRequired:At(e.parameters.path),name:"Params",type:`${i}['path']`})),e.parameters.query&&(r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:i}),n.push({isRequired:At(e.parameters.query),name:"Querystring",type:`${i}['query']`}))));let{errors:p,responses:c}=We(e),m,f=a.getName(o.api.getId({operation:e,type:"errors"}));if(f&&p&&p.properties){let x=Object.keys(p.properties);if(x.length){if(!x.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:f}),m=s.typeReferenceNode({typeName:f});else if(x.length>1){r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:f});let O=s.typeReferenceNode({typeName:f}),w=s.literalTypeNode({literal:s.stringLiteral({text:"default"})});m=s.typeReferenceNode({typeArguments:[O,w],typeName:"Omit"});}}}let l,u=a.getName(o.api.getId({operation:e,type:"responses"}));if(u&&c&&c.properties){let x=Object.keys(c.properties);if(x.length){if(!x.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:u}),l=s.typeReferenceNode({typeName:u});else if(x.length>1){r.import({asType:true,module:r.relativePathToFile({context:t.context,id:T}),name:u});let O=s.typeReferenceNode({typeName:u}),w=s.literalTypeNode({literal:s.stringLiteral({text:"default"})});l=s.typeReferenceNode({typeArguments:[O,w],typeName:"Omit"});}}}let y=[m,l].filter(Boolean);return y.length&&n.push({name:"Reply",type:s.typeIntersectionNode({types:y})}),n.length?{name:e.id,type:s.typeNode("RouteHandler",[s.typeInterfaceNode({properties:n,useLegacyResolution:false})])}:void 0},xc=({plugin:e})=>{let t=e.createFile({id:hc,path:e.output}),r=[];e.forEach("operation",({operation:o})=>{let a=Mu({operation:o,plugin:e});a&&r.push(a);});let n=t.identifier({$ref:"RouteHandlers",create:true,namespace:"type"});n.name&&(r.length&&t.import({asType:true,module:"fastify",name:"RouteHandler"}),t.add(s.typeAliasDeclaration({exportType:true,name:n.name,type:s.typeInterfaceNode({properties:r,useLegacyResolution:false})})));};var qs={config:{exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:xc,name:"fastify",output:"fastify"};var h={actions:{args:s.identifier({text:"args"}),base64:s.identifier({text:"base64"}),bic:s.identifier({text:"bic"}),brand:s.identifier({text:"brand"}),bytes:s.identifier({text:"bytes"}),check:s.identifier({text:"check"}),checkItems:s.identifier({text:"checkItems"}),creditCard:s.identifier({text:"creditCard"}),cuid2:s.identifier({text:"cuid2"}),decimal:s.identifier({text:"decimal"}),description:s.identifier({text:"description"}),digits:s.identifier({text:"digits"}),email:s.identifier({text:"email"}),emoji:s.identifier({text:"emoji"}),empty:s.identifier({text:"empty"}),endsWith:s.identifier({text:"endsWith"}),entries:s.identifier({text:"entries"}),everyItem:s.identifier({text:"everyItem"}),excludes:s.identifier({text:"excludes"}),filterItems:s.identifier({text:"filterItems"}),findItem:s.identifier({text:"findItem"}),finite:s.identifier({text:"finite"}),flavor:s.identifier({text:"flavor"}),graphemes:s.identifier({text:"graphemes"}),gtValue:s.identifier({text:"gtValue"}),hash:s.identifier({text:"hash"}),hexColor:s.identifier({text:"hexColor"}),hexadecimal:s.identifier({text:"hexadecimal"}),imei:s.identifier({text:"imei"}),includes:s.identifier({text:"includes"}),integer:s.identifier({text:"integer"}),ip:s.identifier({text:"ip"}),ipv4:s.identifier({text:"ipv4"}),ipv6:s.identifier({text:"ipv6"}),isoDate:s.identifier({text:"isoDate"}),isoDateTime:s.identifier({text:"isoDateTime"}),isoTime:s.identifier({text:"isoTime"}),isoTimeSecond:s.identifier({text:"isoTimeSecond"}),isoTimestamp:s.identifier({text:"isoTimestamp"}),isoWeek:s.identifier({text:"isoWeek"}),length:s.identifier({text:"length"}),ltValue:s.identifier({text:"ltValue"}),mac:s.identifier({text:"mac"}),mac48:s.identifier({text:"mac48"}),mac64:s.identifier({text:"mac64"}),mapItems:s.identifier({text:"mapItems"}),maxBytes:s.identifier({text:"maxBytes"}),maxEntries:s.identifier({text:"maxEntries"}),maxGraphemes:s.identifier({text:"maxGraphemes"}),maxLength:s.identifier({text:"maxLength"}),maxSize:s.identifier({text:"maxSize"}),maxValue:s.identifier({text:"maxValue"}),maxWords:s.identifier({text:"maxWords"}),metadata:s.identifier({text:"metadata"}),mimeType:s.identifier({text:"mimeType"}),minBytes:s.identifier({text:"minBytes"}),minEntries:s.identifier({text:"minEntries"}),minGraphemes:s.identifier({text:"minGraphemes"}),minLength:s.identifier({text:"minLength"}),minSize:s.identifier({text:"minSize"}),minValue:s.identifier({text:"minValue"}),minWords:s.identifier({text:"minWords"}),multipleOf:s.identifier({text:"multipleOf"}),nanoid:s.identifier({text:"nanoid"}),nonEmpty:s.identifier({text:"nonEmpty"}),normalize:s.identifier({text:"normalize"}),notBytes:s.identifier({text:"notBytes"}),notEntries:s.identifier({text:"notEntries"}),notGraphemes:s.identifier({text:"notGraphemes"}),notLength:s.identifier({text:"notLength"}),notSize:s.identifier({text:"notSize"}),notValue:s.identifier({text:"notValue"}),notValues:s.identifier({text:"notValues"}),notWords:s.identifier({text:"notWords"}),octal:s.identifier({text:"octal"}),parseJson:s.identifier({text:"parseJson"}),partialCheck:s.identifier({text:"partialCheck"}),rawCheck:s.identifier({text:"rawCheck"}),rawTransform:s.identifier({text:"rawTransform"}),readonly:s.identifier({text:"readonly"}),reduceItems:s.identifier({text:"reduceItems"}),regex:s.identifier({text:"regex"}),returns:s.identifier({text:"returns"}),rfcEmail:s.identifier({text:"rfcEmail"}),safeInteger:s.identifier({text:"safeInteger"}),size:s.identifier({text:"size"}),slug:s.identifier({text:"slug"}),someItem:s.identifier({text:"someItem"}),sortItems:s.identifier({text:"sortItems"}),startsWith:s.identifier({text:"startsWith"}),stringifyJson:s.identifier({text:"stringifyJson"}),title:s.identifier({text:"title"}),toLowerCase:s.identifier({text:"toLowerCase"}),toMaxValue:s.identifier({text:"toMaxValue"}),toMinValue:s.identifier({text:"toMinValue"}),toUpperCase:s.identifier({text:"toUpperCase"}),transform:s.identifier({text:"transform"}),trim:s.identifier({text:"trim"}),trimEnd:s.identifier({text:"trimEnd"}),trimStart:s.identifier({text:"trimStart"}),ulid:s.identifier({text:"ulid"}),url:s.identifier({text:"url"}),uuid:s.identifier({text:"uuid"}),value:s.identifier({text:"value"}),values:s.identifier({text:"values"}),words:s.identifier({text:"words"})},async:{argsAsync:s.identifier({text:"argsAsync"}),arrayAsync:s.identifier({text:"arrayAsync"}),awaitAsync:s.identifier({text:"awaitAsync"}),checkAsync:s.identifier({text:"checkAsync"}),checkItemsAsync:s.identifier({text:"checkItemsAsync"}),customAsync:s.identifier({text:"customAsync"}),exactOptionalAsync:s.identifier({text:"exactOptionalAsync"}),fallbackAsync:s.identifier({text:"fallbackAsync"}),forwardAsync:s.identifier({text:"forwardAsync"}),getDefaultsAsync:s.identifier({text:"getDefaultsAsync"}),getFallbacksAsync:s.identifier({text:"getFallbacksAsync"}),intersectAsync:s.identifier({text:"intersectAsync"}),lazyAsync:s.identifier({text:"lazyAsync"}),looseObjectAsync:s.identifier({text:"looseObjectAsync"}),looseTupleAsync:s.identifier({text:"looseTupleAsync"}),mapAsync:s.identifier({text:"mapAsync"}),nonNullableAsync:s.identifier({text:"nonNullableAsync"}),nonNullishAsync:s.identifier({text:"nonNullishAsync"}),nonOptionalAsync:s.identifier({text:"nonOptionalAsync"}),nullableAsync:s.identifier({text:"nullableAsync"}),nullishAsync:s.identifier({text:"nullishAsync"}),objectAsync:s.identifier({text:"objectAsync"}),objectWithRestAsync:s.identifier({text:"objectWithRestAsync"}),optionalAsync:s.identifier({text:"optionalAsync"}),parseAsync:s.identifier({text:"parseAsync"}),parserAsync:s.identifier({text:"parserAsync"}),partialAsync:s.identifier({text:"partialAsync"}),partialCheckAsync:s.identifier({text:"partialCheckAsync"}),pipeAsync:s.identifier({text:"pipeAsync"}),rawCheckAsync:s.identifier({text:"rawCheckAsync"}),rawTransformAsync:s.identifier({text:"rawTransformAsync"}),recordAsync:s.identifier({text:"recordAsync"}),requiredAsync:s.identifier({text:"requiredAsync"}),returnsAsync:s.identifier({text:"returnsAsync"}),safeParseAsync:s.identifier({text:"safeParseAsync"}),safeParserAsync:s.identifier({text:"safeParserAsync"}),setAsync:s.identifier({text:"setAsync"}),strictObjectAsync:s.identifier({text:"strictObjectAsync"}),strictTupleAsync:s.identifier({text:"strictTupleAsync"}),transformAsync:s.identifier({text:"transformAsync"}),tupleAsync:s.identifier({text:"tupleAsync"}),tupleWithRestAsync:s.identifier({text:"tupleWithRestAsync"}),undefinedableAsync:s.identifier({text:"undefinedableAsync"}),unionAsync:s.identifier({text:"unionAsync"}),variantAsync:s.identifier({text:"variantAsync"})},methods:{assert:s.identifier({text:"assert"}),config:s.identifier({text:"config"}),fallback:s.identifier({text:"fallback"}),flatten:s.identifier({text:"flatten"}),forward:s.identifier({text:"forward"}),getDefault:s.identifier({text:"getDefault"}),getDefaults:s.identifier({text:"getDefaults"}),getDescription:s.identifier({text:"getDescription"}),getFallback:s.identifier({text:"getFallback"}),getFallbacks:s.identifier({text:"getFallbacks"}),getMetadata:s.identifier({text:"getMetadata"}),getTitle:s.identifier({text:"getTitle"}),is:s.identifier({text:"is"}),keyof:s.identifier({text:"keyof"}),message:s.identifier({text:"message"}),omit:s.identifier({text:"omit"}),parse:s.identifier({text:"parse"}),parser:s.identifier({text:"parser"}),partial:s.identifier({text:"partial"}),pick:s.identifier({text:"pick"}),pipe:s.identifier({text:"pipe"}),required:s.identifier({text:"required"}),safeParse:s.identifier({text:"safeParse"}),safeParser:s.identifier({text:"safeParser"}),summarize:s.identifier({text:"summarize"}),unwrap:s.identifier({text:"unwrap"})},schemas:{any:s.identifier({text:"any"}),array:s.identifier({text:"array"}),bigInt:s.identifier({text:"bigint"}),blob:s.identifier({text:"blob"}),boolean:s.identifier({text:"boolean"}),custom:s.identifier({text:"custom"}),date:s.identifier({text:"date"}),enum:s.identifier({text:"enum"}),exactOptional:s.identifier({text:"exactOptional"}),file:s.identifier({text:"file"}),function:s.identifier({text:"function"}),instance:s.identifier({text:"instance"}),intersect:s.identifier({text:"intersect"}),lazy:s.identifier({text:"lazy"}),literal:s.identifier({text:"literal"}),looseObject:s.identifier({text:"looseObject"}),looseTuple:s.identifier({text:"looseTuple"}),map:s.identifier({text:"map"}),nan:s.identifier({text:"nan"}),never:s.identifier({text:"never"}),nonNullable:s.identifier({text:"nonNullable"}),nonNullish:s.identifier({text:"nonNullish"}),nonOptional:s.identifier({text:"nonOptional"}),null:s.identifier({text:"null"}),nullable:s.identifier({text:"nullable"}),nullish:s.identifier({text:"nullish"}),number:s.identifier({text:"number"}),object:s.identifier({text:"object"}),objectWithRest:s.identifier({text:"objectWithRest"}),optional:s.identifier({text:"optional"}),picklist:s.identifier({text:"picklist"}),promise:s.identifier({text:"promise"}),record:s.identifier({text:"record"}),set:s.identifier({text:"set"}),strictObject:s.identifier({text:"strictObject"}),strictTuple:s.identifier({text:"strictTuple"}),string:s.identifier({text:"string"}),symbol:s.identifier({text:"symbol"}),tuple:s.identifier({text:"tuple"}),tupleWithRest:s.identifier({text:"tupleWithRest"}),undefined:s.identifier({text:"undefined"}),undefinedable:s.identifier({text:"undefinedable"}),union:s.identifier({text:"union"}),unknown:s.identifier({text:"unknown"}),variant:s.identifier({text:"variant"}),void:s.identifier({text:"void"})},types:{GenericSchema:s.identifier({text:"GenericSchema"})},v:s.identifier({text:"v"})},st="valibot";var Lu=({file:e,operation:t,plugin:r})=>{let{requests:n}=r.config,o=r.context.file({id:st}).identifier({$ref:`#/valibot-response/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!o.name)return;e.import({module:e.relativePathToFile({context:r.context,id:st}),name:o.name}),e.import({alias:h.v.text,module:"valibot",name:"*"});let a="data";return s.arrowFunction({async:true,parameters:[{name:a}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.async.parseAsync}),parameters:[s.identifier({text:o.name}),s.identifier({text:a})]})})})]})},Du=({file:e,operation:t,plugin:r})=>{let{responses:n}=r.config,o=r.context.file({id:st}).identifier({$ref:`#/valibot-response/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!o.name)return;e.import({module:e.relativePathToFile({context:r.context,id:st}),name:o.name}),e.import({alias:h.v.text,module:"valibot",name:"*"});let a="data";return s.arrowFunction({async:true,parameters:[{name:a}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.async.parseAsync}),parameters:[s.identifier({text:o.name}),s.identifier({text:a})]})})})]})},bc={createRequestValidator:Lu,createResponseValidator:Du};var $s={int16:{max:32767,maxError:"Invalid value: Expected int16 to be <= 2^15-1",min:-32768,minError:"Invalid value: Expected int16 to be >= -2^15",needsBigInt:false},int32:{max:2147483647,maxError:"Invalid value: Expected int32 to be <= 2^31-1",min:-2147483648,minError:"Invalid value: Expected int32 to be >= -2^31",needsBigInt:false},int64:{max:"9223372036854775807",maxError:"Invalid value: Expected int64 to be <= 2^63-1",min:"-9223372036854775808",minError:"Invalid value: Expected int64 to be >= -2^63",needsBigInt:true},int8:{max:127,maxError:"Invalid value: Expected int8 to be <= 2^7-1",min:-128,minError:"Invalid value: Expected int8 to be >= -2^7",needsBigInt:false},uint16:{max:65535,maxError:"Invalid value: Expected uint16 to be <= 2^16-1",min:0,minError:"Invalid value: Expected uint16 to be >= 0",needsBigInt:false},uint32:{max:4294967295,maxError:"Invalid value: Expected uint32 to be <= 2^32-1",min:0,minError:"Invalid value: Expected uint32 to be >= 0",needsBigInt:false},uint64:{max:"18446744073709551615",maxError:"Invalid value: Expected uint64 to be <= 2^64-1",min:"0",minError:"Invalid value: Expected uint64 to be >= 0",needsBigInt:true},uint8:{max:255,maxError:"Invalid value: Expected uint8 to be <= 2^8-1",min:0,minError:"Invalid value: Expected uint8 to be >= 0",needsBigInt:false}},$o=e=>e!==void 0&&e in $s,Oc=e=>$o(e)&&$s[e].needsBigInt,vr=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r};var Sc=({operation:e,plugin:t,state:r})=>{let n=t.context.file({id:st});if(t.config.requests.enabled){let o=new Set,a={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let p={},c=[];for(let m in e.parameters.header){let f=e.parameters.header[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("headers"));}Object.keys(p).length&&(a.properties.headers={properties:p,required:c,type:"object"});}if(e.parameters.path){let p={},c=[];for(let m in e.parameters.path){let f=e.parameters.path[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("path"));}Object.keys(p).length&&(a.properties.path={properties:p,required:c,type:"object"});}if(e.parameters.query){let p={},c=[];for(let m in e.parameters.query){let f=e.parameters.query[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("query"));}Object.keys(p).length&&(a.properties.query={properties:p,required:c,type:"object"});}}e.body&&(a.properties.body=e.body.schema,e.body.required&&o.add("body")),a.required=[...o];let i=n.identifier({$ref:`#/valibot-data/${e.id}`,case:t.config.requests.case,create:true,nameTransformer:t.config.requests.name,namespace:"value"});be({$ref:`#/valibot-data/${e.id}`,identifier:i,plugin:t,schema:a,state:r});}if(t.config.responses.enabled&&e.responses){let{response:o}=We(e);if(o){let a=n.identifier({$ref:`#/valibot-response/${e.id}`,case:t.config.responses.case,create:true,nameTransformer:t.config.responses.name,namespace:"value"});be({$ref:`#/valibot-response/${e.id}`,identifier:a,plugin:t,schema:o,state:r});}}};var qe=e=>e.length===1?e[0]:s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.methods.pipe}),parameters:e}),Vu=({plugin:e,schema:t,state:r})=>{let n=s.propertyAccessExpression({expression:h.v,name:h.schemas.array}),o=[];if(t.items){t=G({schema:t});let a=t.items.map(i=>{let p=be({plugin:e,schema:i,state:r});return qe(p)});if(a.length===1){let i=s.callExpression({functionName:n,parameters:a});o.push(i);}else {t.logicalOperator;let i=s.callExpression({functionName:n,parameters:[tn()]});o.push(i);}}else {let a=s.callExpression({functionName:n,parameters:[tn()]});o.push(a);}if(t.minItems===t.maxItems&&t.minItems!==void 0){let a=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.length}),parameters:[s.valueToExpression({value:t.minItems})]});o.push(a);}else {if(t.minItems!==void 0){let a=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.minLength}),parameters:[s.valueToExpression({value:t.minItems})]});o.push(a);}if(t.maxItems!==void 0){let a=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.maxLength}),parameters:[s.valueToExpression({value:t.maxItems})]});o.push(a);}}return qe(o)},_u=({schema:e})=>typeof e.const=="boolean"?s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.literal}),parameters:[s.ots.boolean(e.const)]}):s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.boolean})}),Bu=({schema:e})=>{let t=[],r=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?t.push(s.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(r=true);if(!t.length)return tn();let n=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.picklist}),parameters:[s.arrayLiteralExpression({elements:t,multiLine:false})]});return r&&(n=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.nullable}),parameters:[n]})),n},zu=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.never})}),Ku=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.null})}),Tc=({schema:e})=>{let t=e.format,r=e.type==="integer",n=Oc(t),o=$o(t)?$s[t]:null;if(e.const!==void 0&&e.const!==null){let i=e.const,p;if(typeof i=="number"&&!t)p=s.ots.number(i);else if(typeof i=="number"&&t)n?p=s.callExpression({functionName:"BigInt",parameters:[s.ots.string(i.toString())]}):p=s.ots.number(i);else if(typeof i=="string"&&n){let c=i.endsWith("n")?i.slice(0,-1):i;p=s.callExpression({functionName:"BigInt",parameters:[s.ots.string(c)]});}else if(typeof i=="bigint"){let c=i.toString(),m=c.endsWith("n")?c.slice(0,-1):c;p=s.callExpression({functionName:"BigInt",parameters:[s.ots.string(m)]});}else p=s.valueToExpression({value:i});return s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.literal}),parameters:[p]})}let a=[];if(n){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.union}),parameters:[s.arrayLiteralExpression({elements:[s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.number})}),s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.string})}),s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.bigInt})})],multiLine:false})]});a.push(i);let p=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.transform}),parameters:[s.arrowFunction({parameters:[{name:"x"}],statements:s.callExpression({functionName:"BigInt",parameters:[s.identifier({text:"x"})]})})]});a.push(p);}else {let i=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.number})});a.push(i);}if(!n&&r){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.integer})});a.push(i);}if(o){let i=o.min,p=o.max,c=o.minError,m=o.maxError,f=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.minValue}),parameters:[n?s.callExpression({functionName:"BigInt",parameters:[s.ots.string(i.toString())]}):s.ots.number(i),s.ots.string(c)]});a.push(f);let l=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.maxValue}),parameters:[n?s.callExpression({functionName:"BigInt",parameters:[s.ots.string(p.toString())]}):s.ots.number(p),s.ots.string(m)]});a.push(l);}if(e.exclusiveMinimum!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.gtValue}),parameters:[vr({isBigInt:n,value:e.exclusiveMinimum})]});a.push(i);}else if(e.minimum!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.minValue}),parameters:[vr({isBigInt:n,value:e.minimum})]});a.push(i);}if(e.exclusiveMaximum!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.ltValue}),parameters:[vr({isBigInt:n,value:e.exclusiveMaximum})]});a.push(i);}else if(e.maximum!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.maxValue}),parameters:[vr({isBigInt:n,value:e.maximum})]});a.push(i);}return qe(a)},Wu=({plugin:e,schema:t,state:r})=>{let n=[],o=t.required??[];for(let i in t.properties){let p=t.properties[i],c=o.includes(i),m=be({optional:!c,plugin:e,schema:p,state:r});re.lastIndex=0;let f;re.test(i)?f=i.startsWith("-")?b.factory.createStringLiteral(i):b.factory.createNumericLiteral(i):f=i,(i.match(/^[0-9]/)&&i.match(/\D+/g)||i.match(/\W/g))&&!i.startsWith("'")&&!i.endsWith("'")&&(f=`'${i}'`),n.push(s.propertyAssignment({initializer:qe(m),name:f}));}if(t.additionalProperties&&t.additionalProperties.type==="object"&&!Object.keys(n).length){let i=be({plugin:e,schema:t.additionalProperties,state:r});return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.record}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.string}),parameters:[]}),qe(i)]})}}let a=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.object}),parameters:[b.factory.createObjectLiteralExpression(n,true)]});return {anyType:h.types.GenericSchema.text,expression:a}},Hu=({schema:e})=>{if(typeof e.const=="string")return s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.literal}),parameters:[s.ots.string(e.const)]});let t=[],r=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.string})});if(t.push(r),e.format)switch(e.format){case "date":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.isoDate})}));break;case "date-time":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.isoTimestamp})}));break;case "ipv4":case "ipv6":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.ip})}));break;case "uri":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.url})}));break;case "email":case "time":case "uuid":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:s.identifier({text:e.format})})}));break}if(e.minLength===e.maxLength&&e.minLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.length}),parameters:[s.valueToExpression({value:e.minLength})]});t.push(n);}else {if(e.minLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.minLength}),parameters:[s.valueToExpression({value:e.minLength})]});t.push(n);}if(e.maxLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.maxLength}),parameters:[s.valueToExpression({value:e.maxLength})]});t.push(n);}}if(e.pattern){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.regex}),parameters:[s.regularExpressionLiteral({text:e.pattern})]});t.push(n);}return qe(t)},Zu=({plugin:e,schema:t,state:r})=>{if(t.const&&Array.isArray(t.const)){let n=t.const.map(a=>s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.literal}),parameters:[s.valueToExpression({value:a})]}));return s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.tuple}),parameters:[s.arrayLiteralExpression({elements:n})]})}if(t.items){let n=t.items.map(a=>{let i=be({plugin:e,schema:a,state:r});return qe(i)});return s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.tuple}),parameters:[s.arrayLiteralExpression({elements:n})]})}return tn()},Uu=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.undefined})}),tn=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.unknown})}),Qu=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.void})}),Rc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:Vu({plugin:e,schema:t,state:r})};case "boolean":return {expression:_u({schema:t})};case "enum":return {expression:Bu({schema:t})};case "integer":case "number":return {expression:Tc({schema:t})};case "never":return {expression:zu()};case "null":return {expression:Ku()};case "object":return Wu({plugin:e,schema:t,state:r});case "string":return t.format==="int64"||t.format==="uint64"?{expression:Tc({schema:t})}:{expression:Hu({schema:t})};case "tuple":return {expression:Zu({plugin:e,schema:t,state:r})};case "undefined":return {expression:Uu()};case "unknown":return {expression:tn()};case "void":return {expression:Qu()}}},be=({$ref:e,identifier:t,optional:r,plugin:n,schema:o,state:a})=>{let i=n.context.file({id:st}),p,c=t,m=[];if(e&&(a.circularReferenceTracker.add(e),c||(c=i.identifier({$ref:e,case:a.nameCase,create:true,nameTransformer:a.nameTransformer,namespace:"value"}))),o.$ref){let f=a.circularReferenceTracker.has(o.$ref),l=i.identifier({$ref:o.$ref,case:a.nameCase,nameTransformer:a.nameTransformer,namespace:"value"});if(!l.name){let u=n.context.resolveIrRef(o.$ref),y=be({$ref:o.$ref,plugin:n,schema:u,state:a});m.push(...y),l=i.identifier({$ref:o.$ref,case:a.nameCase,nameTransformer:a.nameTransformer,namespace:"value"});}if(l.name){let u=s.identifier({text:l.name});if(f){let y=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.lazy}),parameters:[s.arrowFunction({statements:[s.returnStatement({expression:u})]})]});m.push(y),a.hasCircularReference=true;}else m.push(u);}}else if(o.type){let f=Rc({plugin:n,schema:o,state:a});if(p=f.anyType,m.push(f.expression),n.config.metadata&&o.description){let l=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.metadata}),parameters:[s.objectExpression({obj:[{key:"description",value:s.stringLiteral({text:o.description})}]})]});m.push(l);}}else if(o.items)if(o=G({schema:o}),o.items){let f=o.items.map(l=>{let u=be({plugin:n,schema:l,state:a});return qe(u)});if(o.logicalOperator==="and"){let l=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.intersect}),parameters:[s.arrayLiteralExpression({elements:f})]});m.push(l);}else {let l=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.union}),parameters:[s.arrayLiteralExpression({elements:f})]});m.push(l);}}else {let f=be({plugin:n,schema:o,state:a});m.push(...f);}else {let f=Rc({plugin:n,schema:{type:"unknown"},state:a});p=f.anyType,m.push(f.expression);}if(e&&a.circularReferenceTracker.delete(e),m.length&&o.accessScope==="read"){let f=s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.actions.readonly})});m.push(f);}if(m.length){let f;if(o.default!==void 0){let l=o.type==="integer"&&o.format==="int64";f=vr({isBigInt:l,value:o.default}),f&&(m=[s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.optional}),parameters:[qe(m),f]})]);}r&&!f&&(m=[s.callExpression({functionName:s.propertyAccessExpression({expression:h.v,name:h.schemas.optional}),parameters:[qe(m)]})]);}if(c&&c.name&&c.created){let f=s.constVariable({comment:n.config.comments?we({schema:o}):void 0,exportConst:true,expression:qe(m),name:c.name,typeName:a.hasCircularReference?s.propertyAccessExpression({expression:h.v,name:p||h.types.GenericSchema.text}):void 0});return i.add(f),[]}return m},Ic=({plugin:e})=>{e.createFile({case:e.config.case,id:st,path:e.output}).import({alias:h.v.text,module:"valibot",name:"*"}),e.forEach("operation","parameter","requestBody","schema",r=>{let n={circularReferenceTracker:new Set,hasCircularReference:false,nameCase:e.config.definitions.case,nameTransformer:e.config.definitions.name};r.type==="operation"?Sc({operation:r.operation,plugin:e,state:n}):r.type==="parameter"?be({$ref:r.$ref,plugin:e,schema:r.parameter.schema,state:n}):r.type==="requestBody"?be({$ref:r.$ref,plugin:e,schema:r.requestBody.schema,state:n}):r.type==="schema"&&be({$ref:r.$ref,plugin:e,schema:r.schema,state:n});});};var Ms={api:bc,config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:Ic,name:"valibot",output:"valibot",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Data"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Response"},mappers:{boolean:r=>({enabled:r}),function:r=>({name:r}),string:r=>({name:r})},value:e.config.responses});},tags:["validator"]};var d={ZodMiniOptional:s.identifier({text:"ZodMiniOptional"}),ZodOptional:s.identifier({text:"ZodOptional"}),_default:s.identifier({text:"_default"}),and:s.identifier({text:"and"}),array:s.identifier({text:"array"}),bigint:s.identifier({text:"bigint"}),boolean:s.identifier({text:"boolean"}),check:s.identifier({text:"check"}),coerce:s.identifier({text:"coerce"}),date:s.identifier({text:"date"}),datetime:s.identifier({text:"datetime"}),default:s.identifier({text:"default"}),describe:s.identifier({text:"describe"}),email:s.identifier({text:"email"}),enum:s.identifier({text:"enum"}),globalRegistry:s.identifier({text:"globalRegistry"}),gt:s.identifier({text:"gt"}),gte:s.identifier({text:"gte"}),infer:s.identifier({text:"infer"}),int:s.identifier({text:"int"}),intersection:s.identifier({text:"intersection"}),ip:s.identifier({text:"ip"}),ipv4:s.identifier({text:"ipv4"}),ipv6:s.identifier({text:"ipv6"}),iso:s.identifier({text:"iso"}),lazy:s.identifier({text:"lazy"}),length:s.identifier({text:"length"}),literal:s.identifier({text:"literal"}),lt:s.identifier({text:"lt"}),lte:s.identifier({text:"lte"}),max:s.identifier({text:"max"}),maxLength:s.identifier({text:"maxLength"}),min:s.identifier({text:"min"}),minLength:s.identifier({text:"minLength"}),never:s.identifier({text:"never"}),null:s.identifier({text:"null"}),nullable:s.identifier({text:"nullable"}),number:s.identifier({text:"number"}),object:s.identifier({text:"object"}),optional:s.identifier({text:"optional"}),parseAsync:s.identifier({text:"parseAsync"}),readonly:s.identifier({text:"readonly"}),record:s.identifier({text:"record"}),regex:s.identifier({text:"regex"}),register:s.identifier({text:"register"}),string:s.identifier({text:"string"}),time:s.identifier({text:"time"}),tuple:s.identifier({text:"tuple"}),undefined:s.identifier({text:"undefined"}),union:s.identifier({text:"union"}),unknown:s.identifier({text:"unknown"}),url:s.identifier({text:"url"}),uuid:s.identifier({text:"uuid"}),void:s.identifier({text:"void"}),z:s.identifier({text:"z"})},X="zod";var Gu=({file:e,operation:t,plugin:r})=>{let o=r.context.file({id:X}).getName(r.api.getId({operation:t,type:"data"}));if(!o)return;e.import({module:e.relativePathToFile({context:r.context,id:X}),name:o});let a="data";return s.arrowFunction({async:true,parameters:[{name:a}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:s.identifier({text:o}),name:d.parseAsync}),parameters:[s.identifier({text:a})]})})})]})},Ju=({file:e,operation:t,plugin:r})=>{let o=r.context.file({id:X}).getName(r.api.getId({operation:t,type:"responses"}));if(!o)return;e.import({module:e.relativePathToFile({context:r.context,id:X}),name:o});let a="data";return s.arrowFunction({async:true,parameters:[{name:a}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:s.identifier({text:o}),name:d.parseAsync}),parameters:[s.identifier({text:a})]})})})]})},Yu=e=>{switch(e.type){case "data":case "responses":case "type-infer-data":case "type-infer-responses":return `${e.operation.id}-${e.type}`;case "ref":case "type-infer-ref":default:return `${e.type}-${e.value}`}},Ac={createRequestValidator:Gu,createResponseValidator:Ju,getId:Yu};var ht=({plugin:e,schema:t,schemaId:r,typeInferId:n,zodSchema:o})=>{let a=e.context.file({id:X}),i=a.addNodeReference(r,{factory:c=>s.typeReferenceNode({typeName:c})}),p=s.constVariable({comment:e.config.comments?we({schema:t}):void 0,exportConst:true,expression:o.expression,name:i,typeName:o.typeName?s.propertyAccessExpression({expression:d.z,name:o.typeName}):void 0});if(a.add(p),n){let c=a.addNodeReference(n,{factory:l=>s.typeReferenceNode({typeName:l})}),m=a.addNodeReference(r,{factory:l=>s.identifier({text:l})}),f=s.typeAliasDeclaration({exportType:true,name:c,type:s.typeReferenceNode({typeArguments:[s.typeOfExpression({text:m})],typeName:s.propertyAccessExpression({expression:d.z,name:d.infer})})});a.add(f);}};var wr=({plugin:e})=>{let t=e.package.getVersion("zod");if(t&&e.package.satisfies(t,"<4.0.0"))switch(e.config.compatibilityVersion){case 3:default:return "zod";case 4:return "zod/v4";case "mini":return "zod/v4-mini"}switch(e.config.compatibilityVersion){case 3:return "zod/v3";case 4:default:return "zod";case "mini":return "zod/mini"}};var qr=({getZodSchema:e,operation:t,plugin:r})=>{let n=r.context.file({id:X});if(r.config.requests.enabled){let o=new Set,a={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(t.parameters){if(t.parameters.header){let m={},f=[];for(let l in t.parameters.header){let u=t.parameters.header[l];m[u.name]=u.schema,u.required&&(f.push(u.name),o.add("headers"));}Object.keys(m).length&&(a.properties.headers={properties:m,required:f,type:"object"});}if(t.parameters.path){let m={},f=[];for(let l in t.parameters.path){let u=t.parameters.path[l];m[u.name]=u.schema,u.required&&(f.push(u.name),o.add("path"));}Object.keys(m).length&&(a.properties.path={properties:m,required:f,type:"object"});}if(t.parameters.query){let m={},f=[];for(let l in t.parameters.query){let u=t.parameters.query[l];m[u.name]=u.schema,u.required&&(f.push(u.name),o.add("query"));}Object.keys(m).length&&(a.properties.query={properties:m,required:f,type:"object"});}}t.body&&(a.properties.body=t.body.schema,t.body.required&&o.add("body")),a.required=[...o];let i=e(a),p=r.api.getId({operation:t,type:"data"}),c=r.config.requests.types.infer.enabled?r.api.getId({operation:t,type:"type-infer-data"}):void 0;ht({plugin:r,schema:a,schemaId:p,typeInferId:c,zodSchema:i}),n.updateNodeReferences(p,q({config:r.config.requests,name:t.id})),c&&n.updateNodeReferences(c,q({config:r.config.requests.types.infer,name:t.id}));}if(r.config.responses.enabled&&t.responses){let{response:o}=We(t);if(o){let a=e(o),i=r.api.getId({operation:t,type:"responses"}),p=r.config.responses.types.infer.enabled?r.api.getId({operation:t,type:"type-infer-responses"}):void 0;ht({plugin:r,schema:o,schemaId:i,typeInferId:p,zodSchema:a}),n.updateNodeReferences(i,q({config:r.config.responses,name:t.id})),p&&n.updateNodeReferences(p,q({config:r.config.responses.types.infer,name:t.id}));}}};var ed=({plugin:e,schema:t,state:r})=>{let n={},o=s.propertyAccessExpression({expression:d.z,name:d.array});if(!t.items)n.expression=s.callExpression({functionName:o,parameters:[Lo().expression]});else {t=G({schema:t});let i=t.items.map(p=>{let c=$t({plugin:e,schema:p,state:r});return c.hasCircularReference&&(n.hasCircularReference=true),c.expression});i.length===1?n.expression=s.callExpression({functionName:o,parameters:i}):(t.logicalOperator,n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.array}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.union}),parameters:[s.arrayLiteralExpression({elements:i})]})]}));}let a=[];return t.minItems===t.maxItems&&t.minItems!==void 0?a.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.length}),parameters:[s.valueToExpression({value:t.minItems})]})):(t.minItems!==void 0&&a.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.minLength}),parameters:[s.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&a.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.maxLength}),parameters:[s.valueToExpression({value:t.maxItems})]}))),a.length&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:d.check}),parameters:a})),n},td=({schema:e})=>{let t={};return typeof e.const=="boolean"?(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.boolean(e.const)]}),t):(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.boolean})}),t)},rd=({schema:e})=>{let t={},r=[],n=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?r.push(s.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(n=true);return r.length?(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.enum}),parameters:[s.arrayLiteralExpression({elements:r,multiLine:false})]}),n&&(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.nullable}),parameters:[t.expression]})),t):Lo()},nd=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.never})}),t},sd=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.null})}),t},rn=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},od=({schema:e})=>{let t={},r=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.number(e.const)]}),t;t.expression=s.callExpression({functionName:r?s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.coerce}),name:d.bigint}):s.propertyAccessExpression({expression:d.z,name:d.number})}),!r&&e.type==="integer"&&(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.int})}));let n=[];return e.exclusiveMinimum!==void 0?n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.gt}),parameters:[rn({isBigInt:r,value:e.exclusiveMinimum})]})):e.minimum!==void 0&&n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.gte}),parameters:[rn({isBigInt:r,value:e.minimum})]})),e.exclusiveMaximum!==void 0?n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.lt}),parameters:[rn({isBigInt:r,value:e.exclusiveMaximum})]})):e.maximum!==void 0&&n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.lte}),parameters:[rn({isBigInt:r,value:e.maximum})]})),n.length&&(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.expression,name:d.check}),parameters:n})),t},id=({plugin:e,schema:t,state:r})=>{let n={},o=[],a=t.required??[];for(let i in t.properties){let p=t.properties[i],c=a.includes(i),m=$t({optional:!c,plugin:e,schema:p,state:r});m.hasCircularReference&&(n.hasCircularReference=true),re.lastIndex=0;let f;re.test(i)?f=i.startsWith("-")?b.factory.createStringLiteral(i):b.factory.createNumericLiteral(i):f=i,(i.match(/^[0-9]/)&&i.match(/\D+/g)||i.match(/\W/g))&&!i.startsWith("'")&&!i.endsWith("'")&&(f=`'${i}'`),m.hasCircularReference?o.push(s.getAccessorDeclaration({name:f,returnType:m.typeName?s.propertyAccessExpression({expression:d.z,name:m.typeName}):void 0,statements:[s.returnStatement({expression:m.expression})]})):o.push(s.propertyAssignment({initializer:m.expression,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let i=$t({plugin:e,schema:t.additionalProperties,state:r});return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.record}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.string}),parameters:[]}),i.expression]}),i.hasCircularReference&&(n.hasCircularReference=true),n}return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.object}),parameters:[b.factory.createObjectLiteralExpression(o,true)]}),n},ad=({plugin:e,schema:t})=>{let r={};if(typeof t.const=="string")return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.string(t.const)]}),r;if(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.string})}),t.format)switch(t.format){case "date":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.iso}),name:d.date})});break;case "date-time":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.iso}),name:d.datetime}),parameters:e.config.dates.offset?[s.objectExpression({obj:[{key:"offset",value:true}]})]:[]});break;case "email":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.email})});break;case "ipv4":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.ipv4})});break;case "ipv6":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.ipv6})});break;case "time":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.iso}),name:d.time})});break;case "uri":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.url})});break;case "uuid":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.uuid})});break}let n=[];return t.minLength===t.maxLength&&t.minLength!==void 0?n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.length}),parameters:[s.valueToExpression({value:t.minLength})]})):(t.minLength!==void 0&&n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.minLength}),parameters:[s.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.maxLength}),parameters:[s.valueToExpression({value:t.maxLength})]}))),t.pattern&&n.push(s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.regex}),parameters:[s.regularExpressionLiteral({text:t.pattern})]})),n.length&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:d.check}),parameters:n})),r},pd=({plugin:e,schema:t,state:r})=>{let n={};if(t.const&&Array.isArray(t.const)){let a=t.const.map(i=>s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.valueToExpression({value:i})]}));return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.tuple}),parameters:[s.arrayLiteralExpression({elements:a})]}),n}let o=[];for(let a of t.items??[]){let i=$t({plugin:e,schema:a,state:r});o.push(i.expression),i.hasCircularReference&&(n.hasCircularReference=true);}return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.tuple}),parameters:[s.arrayLiteralExpression({elements:o})]}),n},cd=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.undefined})}),t},Lo=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.unknown})}),t},md=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.void})}),t},Pc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return ed({plugin:e,schema:t,state:r});case "boolean":return td({schema:t});case "enum":return rd({schema:t});case "integer":case "number":return od({schema:t});case "never":return nd();case "null":return sd();case "object":return id({plugin:e,schema:t,state:r});case "string":return ad({plugin:e,schema:t});case "tuple":return pd({plugin:e,schema:t,state:r});case "undefined":return cd();case "unknown":return Lo();case "void":return md()}},$t=({optional:e,plugin:t,schema:r,state:n})=>{let o=t.context.file({id:X}),a={};if(r.$ref){let i=n.circularReferenceTracker.includes(r.$ref),p=n.currentReferenceTracker.includes(r.$ref);n.circularReferenceTracker.push(r.$ref),n.currentReferenceTracker.push(r.$ref);let c=t.api.getId({type:"ref",value:r.$ref});if(i){let m=o.addNodeReference(c,{factory:f=>s.identifier({text:f})});p?a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.lazy}),parameters:[s.arrowFunction({returnType:s.keywordTypeNode({keyword:"any"}),statements:[s.returnStatement({expression:m})]})]}):a.expression=m,a.hasCircularReference=true;}else if(!o.getName(c)){let m=t.context.resolveIrRef(r.$ref);Fs({id:r.$ref,plugin:t,schema:m,state:n});}if(!i){let m=o.addNodeReference(c,{factory:f=>s.identifier({text:f})});a.expression=m;}n.circularReferenceTracker.pop(),n.currentReferenceTracker.pop();}else if(r.type){let i=Pc({plugin:t,schema:r,state:n});a.expression=i.expression,a.hasCircularReference=i.hasCircularReference,t.config.metadata&&r.description&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.register}),parameters:[s.propertyAccessExpression({expression:d.z,name:d.globalRegistry}),s.objectExpression({obj:[{key:"description",value:s.stringLiteral({text:r.description})}]})]}));}else if(r.items)if(r=G({schema:r}),r.items){let i=r.items.map(p=>$t({plugin:t,schema:p,state:n}).expression);if(r.logicalOperator==="and"){let p=r.items[0];p.logicalOperator==="or"||p.type&&p.type!=="object"?a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.intersection}),parameters:i}):(a.expression=i[0],i.slice(1).forEach(c=>{a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.intersection}),parameters:[a.expression,c]});}));}else a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.union}),parameters:[s.arrayLiteralExpression({elements:i})]});}else a=$t({plugin:t,schema:r,state:n});else {let i=Pc({plugin:t,schema:{type:"unknown"},state:n});a.expression=i.expression;}if(a.expression&&(r.accessScope==="read"&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.readonly}),parameters:[a.expression]})),e&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.optional}),parameters:[a.expression]}),a.typeName=d.ZodMiniOptional),r.default!==void 0)){let i=r.type==="integer"&&r.format==="int64",p=rn({isBigInt:i,value:r.default});p&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d._default}),parameters:[a.expression,p]}));}return a},Fs=({id:e,plugin:t,schema:r,state:n})=>{let o={circularReferenceTracker:[e],hasCircularReference:false,...n,currentReferenceTracker:[e]},a=t.context.file({id:X}),i=t.api.getId({type:"ref",value:e});if(a.getName(i))return;let p=$t({plugin:t,schema:r,state:o}),c=t.config.definitions.types.infer.enabled?t.api.getId({type:"type-infer-ref",value:e}):void 0;ht({plugin:t,schema:r,schemaId:i,typeInferId:c,zodSchema:p});let m=_(e);a.updateNodeReferences(i,q({config:t.config.definitions,name:m})),c&&a.updateNodeReferences(c,q({config:t.config.definitions.types.infer,name:m}));},Ec=({plugin:e})=>{e.createFile({case:e.config.case,id:X,path:e.output}).import({alias:d.z.text,module:wr({plugin:e}),name:"*"}),e.forEach("operation","parameter","requestBody","schema",r=>{r.type==="operation"?qr({getZodSchema:n=>$t({plugin:e,schema:n,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e}):r.type==="parameter"?Fs({id:r.$ref,plugin:e,schema:r.parameter.schema}):r.type==="requestBody"?Fs({id:r.$ref,plugin:e,schema:r.requestBody.schema}):r.type==="schema"&&Fs({id:r.$ref,plugin:e,schema:r.schema});});};var fd=({plugin:e,schema:t,state:r})=>{let n=s.propertyAccessExpression({expression:d.z,name:d.array}),o;if(!t.items)o=s.callExpression({functionName:n,parameters:[Vo()]});else {t=G({schema:t});let a=t.items.map(i=>Mt({plugin:e,schema:i,state:r}).expression);a.length===1?o=s.callExpression({functionName:n,parameters:a}):(t.logicalOperator,o=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.array}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.union}),parameters:[s.arrayLiteralExpression({elements:a})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:d.length}),parameters:[s.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:d.min}),parameters:[s.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:d.max}),parameters:[s.valueToExpression({value:t.maxItems})]}))),o},ld=({schema:e})=>typeof e.const=="boolean"?s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.boolean(e.const)]}):s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.boolean})}),ud=({schema:e})=>{let t=[],r=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?t.push(s.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(r=true);if(!t.length)return Vo();let n=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.enum}),parameters:[s.arrayLiteralExpression({elements:t,multiLine:false})]});return r&&(n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:d.nullable})})),n},dd=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.never})}),yd=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.null})}),nn=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},gd=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.number(e.const)]});let r=s.callExpression({functionName:t?s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.coerce}),name:d.bigint}):s.propertyAccessExpression({expression:d.z,name:d.number})});return !t&&e.type==="integer"&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.int})})),e.exclusiveMinimum!==void 0?r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.gt}),parameters:[nn({isBigInt:t,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.gte}),parameters:[nn({isBigInt:t,value:e.minimum})]})),e.exclusiveMaximum!==void 0?r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.lt}),parameters:[nn({isBigInt:t,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.lte}),parameters:[nn({isBigInt:t,value:e.maximum})]})),r},hd=({plugin:e,schema:t,state:r})=>{let n=[],o=t.required??[];for(let i in t.properties){let p=t.properties[i],c=o.includes(i),m=Mt({optional:!c,plugin:e,schema:p,state:r}).expression;re.lastIndex=0;let f;re.test(i)?f=i.startsWith("-")?b.factory.createStringLiteral(i):b.factory.createNumericLiteral(i):f=i,(i.match(/^[0-9]/)&&i.match(/\D+/g)||i.match(/\W/g))&&!i.startsWith("'")&&!i.endsWith("'")&&(f=`'${i}'`),n.push(s.propertyAssignment({initializer:m,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let i=Mt({plugin:e,schema:t.additionalProperties,state:r}).expression;return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.record}),parameters:[i]})}}return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.object}),parameters:[b.factory.createObjectLiteralExpression(n,true)]})}},xd=({plugin:e,schema:t})=>{if(typeof t.const=="string")return s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.string(t.const)]});let r=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.string})});if(t.format)switch(t.format){case "date":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.date})});break;case "date-time":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.datetime}),parameters:e.config.dates.offset?[s.objectExpression({obj:[{key:"offset",value:true}]})]:[]});break;case "email":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.email})});break;case "ipv4":case "ipv6":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.ip})});break;case "time":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.time})});break;case "uri":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.url})});break;case "uuid":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.uuid})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.length}),parameters:[s.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.min}),parameters:[s.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.max}),parameters:[s.valueToExpression({value:t.maxLength})]}))),t.pattern&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:d.regex}),parameters:[s.regularExpressionLiteral({text:t.pattern})]})),r},bd=({plugin:e,schema:t,state:r})=>{if(t.const&&Array.isArray(t.const)){let a=t.const.map(p=>s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.valueToExpression({value:p})]}));return s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.tuple}),parameters:[s.arrayLiteralExpression({elements:a})]})}let n=[];for(let a of t.items??[])n.push(Mt({plugin:e,schema:a,state:r}).expression);return s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.tuple}),parameters:[s.arrayLiteralExpression({elements:n})]})},Od=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.undefined})}),Vo=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.unknown})}),Sd=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.void})}),jc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:fd({plugin:e,schema:t,state:r})};case "boolean":return {expression:ld({schema:t})};case "enum":return {expression:ud({schema:t})};case "integer":case "number":return {expression:gd({schema:t})};case "never":return {expression:dd()};case "null":return {expression:yd()};case "object":return hd({plugin:e,schema:t,state:r});case "string":return {expression:xd({plugin:e,schema:t})};case "tuple":return {expression:bd({plugin:e,schema:t,state:r})};case "undefined":return {expression:Od()};case "unknown":return {expression:Vo()};case "void":return {expression:Sd()}}},Mt=({optional:e,plugin:t,schema:r,state:n})=>{let o=t.context.file({id:X}),a={};if(r.$ref){let i=n.circularReferenceTracker.includes(r.$ref);n.circularReferenceTracker.push(r.$ref),n.currentReferenceTracker.push(r.$ref);let p=t.api.getId({type:"ref",value:r.$ref});if(i){let c=o.addNodeReference(p,{factory:m=>s.identifier({text:m})});a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.lazy}),parameters:[s.arrowFunction({statements:[s.returnStatement({expression:c})]})]}),n.hasCircularReference=true;}else if(!o.getName(p)){let c=t.context.resolveIrRef(r.$ref);Ls({id:r.$ref,plugin:t,schema:c,state:n});}if(!i){let c=o.addNodeReference(p,{factory:m=>s.identifier({text:m})});a.expression=c;}n.circularReferenceTracker.pop(),n.currentReferenceTracker.pop();}else if(r.type){let i=jc({plugin:t,schema:r,state:n});a.expression=i.expression,a.typeName=i.anyType,t.config.metadata&&r.description&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.describe}),parameters:[s.stringLiteral({text:r.description})]}));}else if(r.items)if(r=G({schema:r}),r.items){let i=r.items.map(p=>Mt({plugin:t,schema:p,state:n}).expression);if(r.logicalOperator==="and"){let p=r.items[0];p.logicalOperator==="or"||p.type&&p.type!=="object"?a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.intersection}),parameters:i}):(a.expression=i[0],i.slice(1).forEach(c=>{a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.and}),parameters:[c]});}));}else a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.union}),parameters:[s.arrayLiteralExpression({elements:i})]});}else a=Mt({plugin:t,schema:r,state:n});else {let i=jc({plugin:t,schema:{type:"unknown"},state:n});a.expression=i.expression,a.typeName=i.anyType;}if(a.expression&&(r.accessScope==="read"&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.readonly})})),e&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.optional})})),r.default!==void 0)){let i=r.type==="integer"&&r.format==="int64",p=nn({isBigInt:i,value:r.default});p&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.default}),parameters:[p]}));}return n.hasCircularReference?a.typeName||(a.typeName="ZodTypeAny"):a.typeName=void 0,a},Ls=({id:e,plugin:t,schema:r,state:n})=>{n||(n={circularReferenceTracker:[e],currentReferenceTracker:[e],hasCircularReference:false});let o=t.context.file({id:X}),a=t.api.getId({type:"ref",value:e});if(o.getName(a))return;let i=Mt({plugin:t,schema:r,state:n}),p=t.config.definitions.types.infer.enabled?t.api.getId({type:"type-infer-ref",value:e}):void 0;ht({plugin:t,schema:r,schemaId:a,typeInferId:p,zodSchema:i});let c=_(e);o.updateNodeReferences(a,q({config:t.config.definitions,name:c})),p&&o.updateNodeReferences(p,q({config:t.config.definitions.types.infer,name:c}));},Nc=({plugin:e})=>{e.createFile({case:e.config.case,id:X,path:e.output}).import({module:wr({plugin:e}),name:d.z.text}),e.forEach("operation","parameter","requestBody","schema",r=>{r.type==="operation"?qr({getZodSchema:n=>Mt({plugin:e,schema:n,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e}):r.type==="parameter"?Ls({id:r.$ref,plugin:e,schema:r.parameter.schema}):r.type==="requestBody"?Ls({id:r.$ref,plugin:e,schema:r.requestBody.schema}):r.type==="schema"&&Ls({id:r.$ref,plugin:e,schema:r.schema});});};var Td=({plugin:e,schema:t,state:r})=>{let n={},o=s.propertyAccessExpression({expression:d.z,name:d.array});if(!t.items)n.expression=s.callExpression({functionName:o,parameters:[Bo().expression]});else {t=G({schema:t});let a=t.items.map(i=>{let p=Ft({plugin:e,schema:i,state:r});return p.hasCircularReference&&(n.hasCircularReference=true),p.expression});a.length===1?n.expression=s.callExpression({functionName:o,parameters:a}):(t.logicalOperator,n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.array}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.union}),parameters:[s.arrayLiteralExpression({elements:a})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:d.length}),parameters:[s.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:d.min}),parameters:[s.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:n.expression,name:d.max}),parameters:[s.valueToExpression({value:t.maxItems})]}))),n},Rd=({schema:e})=>{let t={};return typeof e.const=="boolean"?(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.boolean(e.const)]}),t):(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.boolean})}),t)},Id=({schema:e})=>{let t={},r=[],n=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?r.push(s.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(n=true);return r.length?(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.enum}),parameters:[s.arrayLiteralExpression({elements:r,multiLine:false})]}),n&&(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.nullable}),parameters:[t.expression]})),t):Bo()},Ad=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.never})}),t},Pd=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.null})}),t},sn=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},Ed=({schema:e})=>{let t={},r=e.type==="integer"&&e.format==="int64";return typeof e.const=="number"?(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.number(e.const)]}),t):(t.expression=s.callExpression({functionName:r?s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.coerce}),name:d.bigint}):s.propertyAccessExpression({expression:d.z,name:d.number})}),!r&&e.type==="integer"&&(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.int})})),e.exclusiveMinimum!==void 0?t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.expression,name:d.gt}),parameters:[sn({isBigInt:r,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.expression,name:d.gte}),parameters:[sn({isBigInt:r,value:e.minimum})]})),e.exclusiveMaximum!==void 0?t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.expression,name:d.lt}),parameters:[sn({isBigInt:r,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:t.expression,name:d.lte}),parameters:[sn({isBigInt:r,value:e.maximum})]})),t)},jd=({plugin:e,schema:t,state:r})=>{let n={},o=[],a=t.required??[];for(let i in t.properties){let p=t.properties[i],c=a.includes(i),m=Ft({optional:!c,plugin:e,schema:p,state:r});m.hasCircularReference&&(n.hasCircularReference=true),re.lastIndex=0;let f;re.test(i)?f=i.startsWith("-")?b.factory.createStringLiteral(i):b.factory.createNumericLiteral(i):f=i,(i.match(/^[0-9]/)&&i.match(/\D+/g)||i.match(/\W/g))&&!i.startsWith("'")&&!i.endsWith("'")&&(f=`'${i}'`),m.hasCircularReference?o.push(s.getAccessorDeclaration({name:f,returnType:m.typeName?s.propertyAccessExpression({expression:d.z,name:m.typeName}):void 0,statements:[s.returnStatement({expression:m.expression})]})):o.push(s.propertyAssignment({initializer:m.expression,name:f}));}if(t.additionalProperties&&(!t.properties||!Object.keys(t.properties).length)){let i=Ft({plugin:e,schema:t.additionalProperties,state:r});return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.record}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.string}),parameters:[]}),i.expression]}),i.hasCircularReference&&(n.hasCircularReference=true),n.hasCircularReference?{...n,typeName:"ZodType"}:n}return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.object}),parameters:[b.factory.createObjectLiteralExpression(o,true)]}),n.hasCircularReference?{...n,typeName:"ZodType"}:n},Nd=({plugin:e,schema:t})=>{let r={};if(typeof t.const=="string")return r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.ots.string(t.const)]}),r;if(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.string})}),t.format)switch(t.format){case "date":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.iso}),name:d.date})});break;case "date-time":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.iso}),name:d.datetime}),parameters:e.config.dates.offset?[s.objectExpression({obj:[{key:"offset",value:true}]})]:[]});break;case "email":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.email})});break;case "ipv4":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.ipv4})});break;case "ipv6":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.ipv6})});break;case "time":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:d.z,name:d.iso}),name:d.time})});break;case "uri":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.url})});break;case "uuid":r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.uuid})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:d.length}),parameters:[s.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:d.min}),parameters:[s.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:d.max}),parameters:[s.valueToExpression({value:t.maxLength})]}))),t.pattern&&(r.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:r.expression,name:d.regex}),parameters:[s.regularExpressionLiteral({text:t.pattern})]})),r},Cd=({plugin:e,schema:t,state:r})=>{let n={};if(t.const&&Array.isArray(t.const)){let a=t.const.map(i=>s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.literal}),parameters:[s.valueToExpression({value:i})]}));return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.tuple}),parameters:[s.arrayLiteralExpression({elements:a})]}),n}let o=[];for(let a of t.items??[]){let i=Ft({plugin:e,schema:a,state:r});o.push(i.expression),i.hasCircularReference&&(n.hasCircularReference=true);}return n.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.tuple}),parameters:[s.arrayLiteralExpression({elements:o})]}),n},kd=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.undefined})}),t},Bo=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.unknown})}),t},vd=e=>{let t={};return t.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.void})}),t},Cc=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return Td({plugin:e,schema:t,state:r});case "boolean":return Rd({schema:t});case "enum":return Id({schema:t});case "integer":case "number":return Ed({schema:t});case "never":return Ad();case "null":return Pd();case "object":return jd({plugin:e,schema:t,state:r});case "string":return Nd({plugin:e,schema:t});case "tuple":return Cd({plugin:e,schema:t,state:r});case "undefined":return kd();case "unknown":return Bo();case "void":return vd()}},Ft=({optional:e,plugin:t,schema:r,state:n})=>{let o=t.context.file({id:X}),a={};if(r.$ref){let i=n.circularReferenceTracker.includes(r.$ref),p=n.currentReferenceTracker.includes(r.$ref);n.circularReferenceTracker.push(r.$ref),n.currentReferenceTracker.push(r.$ref);let c=t.api.getId({type:"ref",value:r.$ref});if(i){let m=o.addNodeReference(c,{factory:f=>s.identifier({text:f})});p?a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.lazy}),parameters:[s.arrowFunction({returnType:s.keywordTypeNode({keyword:"any"}),statements:[s.returnStatement({expression:m})]})]}):a.expression=m,a.hasCircularReference=true;}else if(!o.getName(c)){let m=t.context.resolveIrRef(r.$ref);Ds({id:r.$ref,plugin:t,schema:m,state:n});}if(!i){let m=o.addNodeReference(c,{factory:f=>s.identifier({text:f})});a.expression=m;}n.circularReferenceTracker.pop(),n.currentReferenceTracker.pop();}else if(r.type){let i=Cc({plugin:t,schema:r,state:n});a.expression=i.expression,a.hasCircularReference=i.hasCircularReference,t.config.metadata&&r.description&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.register}),parameters:[s.propertyAccessExpression({expression:d.z,name:d.globalRegistry}),s.objectExpression({obj:[{key:"description",value:s.stringLiteral({text:r.description})}]})]}));}else if(r.items)if(r=G({schema:r}),r.items){let i=r.items.map(p=>Ft({plugin:t,schema:p,state:n}).expression);if(r.logicalOperator==="and"){let p=r.items[0];p.logicalOperator==="or"||p.type&&p.type!=="object"?a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.intersection}),parameters:i}):(a.expression=i[0],i.slice(1).forEach(c=>{a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.and}),parameters:[c]});}));}else a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.union}),parameters:[s.arrayLiteralExpression({elements:i})]});}else a=Ft({plugin:t,schema:r,state:n});else {let i=Cc({plugin:t,schema:{type:"unknown"},state:n});a.expression=i.expression;}if(a.expression&&(r.accessScope==="read"&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.readonly})})),e&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:d.z,name:d.optional}),parameters:[a.expression]}),a.typeName=d.ZodOptional),r.default!==void 0)){let i=r.type==="integer"&&r.format==="int64",p=sn({isBigInt:i,value:r.default});p&&(a.expression=s.callExpression({functionName:s.propertyAccessExpression({expression:a.expression,name:d.default}),parameters:[p]}));}return a},Ds=({id:e,plugin:t,schema:r,state:n})=>{let o={circularReferenceTracker:[e],hasCircularReference:false,...n,currentReferenceTracker:[e]},a=t.context.file({id:X}),i=t.api.getId({type:"ref",value:e});if(a.getName(i))return;let p=Ft({plugin:t,schema:r,state:o}),c=t.config.definitions.types.infer.enabled?t.api.getId({type:"type-infer-ref",value:e}):void 0;ht({plugin:t,schema:r,schemaId:i,typeInferId:c,zodSchema:p});let m=_(e);a.updateNodeReferences(i,q({config:t.config.definitions,name:m})),c&&a.updateNodeReferences(c,q({config:t.config.definitions.types.infer,name:m}));},zo=({plugin:e})=>{e.createFile({case:e.config.case,id:X,path:e.output}).import({module:wr({plugin:e}),name:d.z.text}),e.forEach("operation","parameter","requestBody","schema",r=>{r.type==="operation"?qr({getZodSchema:n=>Ft({plugin:e,schema:n,state:{circularReferenceTracker:[],currentReferenceTracker:[],hasCircularReference:false}}),operation:r.operation,plugin:e}):r.type==="parameter"?Ds({id:r.$ref,plugin:e,schema:r.parameter.schema}):r.type==="requestBody"?Ds({id:r.$ref,plugin:e,schema:r.requestBody.schema}):r.type==="schema"&&Ds({id:r.$ref,plugin:e,schema:r.schema});});};var kc=e=>{let{plugin:t}=e;switch(t.config.compatibilityVersion){case 3:return Nc(e);case 4:return zo(e);case "mini":return Ec(e);default:return zo(e)}};var Vs={api:Ac,config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:kc,name:"zod",output:"zod",resolveConfig:(e,t)=>{let r="zod",n=t.package.getVersion(r),o=()=>n&&(n.major===4||n.major===3)?n.major:4,a=i=>{if(!i)return o();if(!n)return i;if((i===4||i===3||i==="mini")&&!t.package.satisfies(n,">=3.25.0 <5.0.0")){let p=o();return console.warn(`\u{1F50C} ${xt.yellow("Warning:")} Installed ${xt.cyan(r)} ${xt.cyan(`v${n.version}`)} does not support compatibility version ${xt.yellow(String(i))}, using ${xt.yellow(String(p))}.`),p}return i};e.config.compatibilityVersion=a(e.config.compatibilityVersion),e.config.dates=t.valueToObject({defaultValue:{offset:false},value:e.config.dates}),e.config.types=t.valueToObject({defaultValue:{infer:{case:"PascalCase",enabled:false}},mappers:{object:(i,p)=>({...i,infer:t.valueToObject({defaultValue:{...p.infer,enabled:i.infer!==void 0?!!i.infer:p.infer.enabled},mappers:bt,value:i.infer})})},value:e.config.types}),e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}ZodType"}}},mappers:{...bt,object:(i,p)=>({...i,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:bt,value:c.infer})})},value:i.types})})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Data",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}DataZodType"}}},mappers:{...bt,object:(i,p)=>({...i,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:bt,value:c.infer})})},value:i.types})})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Response",types:{...e.config.types,infer:{...e.config.types.infer,name:"{{name}}ResponseZodType"}}},mappers:{...bt,object:(i,p)=>({...i,types:t.valueToObject({defaultValue:p.types,mappers:{object:(c,m)=>({...c,infer:t.valueToObject({defaultValue:{...m.infer,enabled:c.infer!==void 0?!!c.infer:m.infer.enabled},mappers:bt,value:c.infer})})},value:i.types})})},value:e.config.responses});},tags:["validator"]};var _s={"@hey-api/client-axios":ts,"@hey-api/client-fetch":rs,"@hey-api/client-next":ns,"@hey-api/client-nuxt":ss,"@hey-api/schemas":fs,"@hey-api/sdk":ys,"@hey-api/transformers":hs,"@hey-api/typescript":Os,"@tanstack/angular-query-experimental":Ns,"@tanstack/react-query":Cs,"@tanstack/solid-query":ks,"@tanstack/svelte-query":vs,"@tanstack/vue-query":ws,fastify:qs,"legacy/angular":os,"legacy/axios":is,"legacy/fetch":as,"legacy/node":ps,"legacy/xhr":cs,valibot:Ms,zod:Vs};var vc=["@hey-api/typescript","@hey-api/sdk"],qd=({dependencies:e,userPlugins:t,userPluginsConfig:r})=>{let n=new Set,o=new Set,a={},i=p=>{if(n.has(p))throw new Error(`Circular reference detected at '${p}'`);if(o.has(p))return;n.add(p);let c=_s[p],m=r[p];if(!c&&!m)throw new Error(`unknown plugin dependency "${p}" - do you need to register a custom plugin with this name?`);let f={...c,...m,config:{...c?.config,...m?.config},dependencies:new Set([...c?.dependencies||[],...m?.dependencies||[]])};if(f.resolveConfig){let l={package:Sn(e),pluginByTag:(u,y={})=>{let{defaultPlugin:g,errorMessage:x}=y;for(let S of t){let O=_s[S]||r[S];if(O&&O.tags?.includes(u)&&S!==p)return S}if(g){let S=_s[g]||r[g];if(S&&S.tags?.includes(u)&&g!==p)return g}throw new Error(x||`missing plugin - no plugin with tag "${u}" found`)},valueToObject:Dt};f.resolveConfig(f,l);}for(let l of f.dependencies)i(l);n.delete(p),o.add(p),a[p]=f;};for(let p of t)i(p);return {pluginOrder:Array.from(o),plugins:a}},$d=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e.tags&&e.tags.includes("client"),wc=({dependencies:e,userConfig:t})=>{let r={},n=vc;t.plugins&&(t.plugins=t.plugins.filter(a=>typeof a=="string"&&a||typeof a!="string"&&a.name),t.plugins.length===1&&$d(t.plugins[0])?n=[...vc,...t.plugins]:n=t.plugins);let o=n.map(a=>{if(typeof a=="string")return a;let i=a.name;return i&&(a.handler?r[i]=a:(r[i]={config:{...a}},delete r[i].config.name)),i}).filter(Boolean);return qd({dependencies:e,userPlugins:o,userPluginsConfig:r})};var an={enabled:false,interval:1e3,timeout:6e4},qc=e=>{let t={...an};return typeof e.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},$c=e=>{let t={path:"",watch:an};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path!==void 0||e.input.organization!==void 0)?(t={...t,path:"https://get.heyapi.dev",...e.input},t.watch!==void 0&&(t.watch=qc(t))):t={...t,path:e.input},e.watch!==void 0&&t.watch.enabled===an.enabled&&t.watch.interval===an.interval&&t.watch.timeout===an.timeout&&(t.watch=qc({path:t.path,watch:e.watch})),t};var Md=(e,t)=>({...e||{},...t||{}}),Ko=(e,t)=>{let r=e||{},n=t||{},o={...r,...n};return typeof o.logs=="object"&&(o.logs=Md(r.logs,n.logs)),o};var Mc=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t};var Lc=e=>{let t=e?F.dirname(e):process.cwd();for(;t!==F.dirname(t);){let r=F.join(t,"package.json");if(he.existsSync(r))try{let o=JSON.parse(he.readFileSync(r,"utf8"));return {...o.dependencies,...o.devDependencies,...o.peerDependencies,...o.optionalDependencies}}catch{}let n=F.dirname(t);if(n===t)break;t=n;}return {}};var cv=async e=>{let t;if(e?.configFile){let p=e.configFile.split(".");t=p.slice(0,p.length-1).join(".");}let{config:r,configFile:n}=await loadConfig({configFile:t,name:"openapi-ts"}),o=Lc(Object.keys(r).length?n:void 0),a=Array.isArray(e)?e:Array.isArray(r)?r.map(p=>Ko(p,e)):[Ko(r,e)],i=[];for(let p of a){let{base:c,configFile:m="",dryRun:f=false,experimentalParser:l=true,exportCore:u=true,interactive:y=false,name:g,request:x,useOptions:S=true}=p,O=[],w=Uo(p);w.level==="debug"&&console.warn("userConfig:",p);let N=$c(p),z=Mc(p),V=Qo(p);N.path||O.push(new Lt("missing input - which OpenAPI specification should we use to generate your output?")),z.path||O.push(new Lt("missing output - where should we generate your output?")),S||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),z.path=F.resolve(process.cwd(),z.path);let Z;try{Z=wc({dependencies:o,userConfig:p});}catch($){O.push($),Z={pluginOrder:[],plugins:{}};}let D=ti({...Z,base:c,configFile:m,dryRun:f,experimentalParser:l,exportCore:false,input:N,interactive:y,logs:w,name:g,output:z,parser:V,request:x,useOptions:S});D.exportCore=U(D)?u:false,w.level==="debug"&&console.warn("config:",D),i.push({config:D,errors:O});}return {dependencies:o,results:i}};var Ks=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[o,a]of n)if(a===null)t.delete(o);else if(Array.isArray(a))for(let i of a)t.append(o,i);else a!==void 0&&t.set(o,typeof a=="object"?JSON.stringify(a):a);}return t};var Vv=async({fetchOptions:e,inputPath:t,timeout:r,watch:n})=>{let o=new $RefParser,a=getResolvedInput({pathOrUrlOrSchema:t}),i,p,c;if(a.type==="url"){if(n.lastValue&&n.isHeadMethodSupported!==false){try{let f=await sendRequest({fetchOptions:{method:"HEAD",...e,headers:Ks(e?.headers,n.headers)},timeout:r,url:a.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok&&n.isHeadMethodSupported)return {error:"not-ok",response:c};if(n.isHeadMethodSupported===void 0&&(n.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(p===void 0){let f=c.headers.get("ETag");f&&(p=f!==n.headers.get("If-None-Match"),p&&n.headers.set("If-None-Match",f));}if(p===void 0){let f=c.headers.get("Last-Modified");f&&(p=f!==n.headers.get("If-Modified-Since"),p&&n.headers.set("If-Modified-Since",f));}if(p===false)return {error:"not-modified",response:c}}try{let f=await sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:a.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok)return {error:"not-ok",response:c};if(i=c.body?await c.arrayBuffer():new ArrayBuffer(0),p===void 0){let f=new TextDecoder().decode(i);p=f!==n.lastValue,n.lastValue=f;}}else n.lastValue?p=false:n.lastValue=a.type;return p===false?{error:"not-modified",response:c}:{data:await o.bundle({arrayBuffer:i,pathOrUrlOrSchema:void 0,resolvedInput:a})}};
export{It as A,it as B,Ir as C,Ge as D,xo as E,Ha as F,OI as G,SI as H,vc as I,cv as J,Vv as K,Ho as a,Ud as b,Qd as c,ty as d,ry as e,ot as f,oy as g,Lt as h,ly as i,uy as j,dy as k,yy as l,C as m,R as n,U as o,Vt as p,Uo as q,Yc as r,A as s,Ot as t,St as u,s as v,ig as w,j as x,Be as y,Ng as z};//# sourceMappingURL=chunk-PIMDA23B.js.map
//# sourceMappingURL=chunk-PIMDA23B.js.map