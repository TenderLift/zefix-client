var F=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var k={bodySerializer:e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString():r)};var B=async(e,t)=>{let r=typeof t=="function"?await t(e):t;if(r)return e.scheme==="bearer"?`Bearer ${r}`:e.scheme==="basic"?`Basic ${btoa(r)}`:r};var G=e=>{switch(e){case "label":return ".";case "matrix":return ";";case "simple":return ",";default:return "&"}},H=e=>{switch(e){case "form":return ",";case "pipeDelimited":return "|";case "spaceDelimited":return "%20";default:return ","}},V=e=>{switch(e){case "label":return ".";case "matrix":return ";";case "simple":return ",";default:return "&"}},R=({allowReserved:e,explode:t,name:r,style:a,value:s})=>{if(!t){let n=(e?s:s.map(p=>encodeURIComponent(p))).join(H(a));switch(a){case "label":return `.${n}`;case "matrix":return `;${r}=${n}`;case "simple":return n;default:return `${r}=${n}`}}let i=G(a),o=s.map(n=>a==="label"||a==="simple"?e?n:encodeURIComponent(n):S({allowReserved:e,name:r,value:n})).join(i);return a==="label"||a==="matrix"?i+o:o},S=({allowReserved:e,name:t,value:r})=>{if(r==null)return "";if(typeof r=="object")throw new Error("Deeply-nested arrays/objects aren\u2019t supported. Provide your own `querySerializer()` to handle these.");return `${t}=${e?r:encodeURIComponent(r)}`},T=({allowReserved:e,explode:t,name:r,style:a,value:s,valueOnly:i})=>{if(s instanceof Date)return i?s.toISOString():`${r}=${s.toISOString()}`;if(a!=="deepObject"&&!t){let p=[];Object.entries(s).forEach(([d,y])=>{p=[...p,d,e?y:encodeURIComponent(y)];});let u=p.join(",");switch(a){case "form":return `${r}=${u}`;case "label":return `.${u}`;case "matrix":return `;${r}=${u}`;default:return u}}let o=V(a),n=Object.entries(s).map(([p,u])=>S({allowReserved:e,name:a==="deepObject"?`${r}[${p}]`:p,value:u})).join(o);return a==="label"||a==="matrix"?o+n:n};var W=/\{[^{}]+\}/g,Z=({path:e,url:t})=>{let r=t,a=t.match(W);if(a)for(let s of a){let i=false,o=s.substring(1,s.length-1),n="simple";o.endsWith("*")&&(i=true,o=o.substring(0,o.length-1)),o.startsWith(".")?(o=o.substring(1),n="label"):o.startsWith(";")&&(o=o.substring(1),n="matrix");let p=e[o];if(p==null)continue;if(Array.isArray(p)){r=r.replace(s,R({explode:i,name:o,style:n,value:p}));continue}if(typeof p=="object"){r=r.replace(s,T({explode:i,name:o,style:n,value:p,valueOnly:true}));continue}if(n==="matrix"){r=r.replace(s,`;${S({name:o,value:p})}`);continue}let u=encodeURIComponent(n==="label"?`.${p}`:p);r=r.replace(s,u);}return r},U=({allowReserved:e,array:t,object:r}={})=>s=>{let i=[];if(s&&typeof s=="object")for(let o in s){let n=s[o];if(n!=null)if(Array.isArray(n)){let p=R({allowReserved:e,explode:true,name:o,style:"form",value:n,...t});p&&i.push(p);}else if(typeof n=="object"){let p=T({allowReserved:e,explode:true,name:o,style:"deepObject",value:n,...r});p&&i.push(p);}else {let p=S({allowReserved:e,name:o,value:n});p&&i.push(p);}}return i.join("&")},L=e=>{if(!e)return "stream";let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(t==="multipart/form-data")return "formData";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},$=async({security:e,...t})=>{for(let r of e){let a=await B(r,t.auth);if(!a)continue;let s=r.name??"Authorization";switch(r.in){case "query":t.query||(t.query={}),t.query[s]=a;break;case "cookie":t.headers.append("Cookie",`${s}=${a}`);break;case "header":default:t.headers.set(s,a);break}return}},A=e=>M({baseUrl:e.baseUrl,path:e.path,query:e.query,querySerializer:typeof e.querySerializer=="function"?e.querySerializer:U(e.querySerializer),url:e.url}),M=({baseUrl:e,path:t,query:r,querySerializer:a,url:s})=>{let i=s.startsWith("/")?s:`/${s}`,o=(e??"")+i;t&&(o=Z({path:t,url:o}));let n=r?a(r):"";return n.startsWith("?")&&(n=n.substring(1)),n&&(o+=`?${n}`),o},z=(e,t)=>{let r={...e,...t};return r.baseUrl?.endsWith("/")&&(r.baseUrl=r.baseUrl.substring(0,r.baseUrl.length-1)),r.headers=x(e.headers,t.headers),r},x=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let a=r instanceof Headers?r.entries():Object.entries(r);for(let[s,i]of a)if(i===null)t.delete(s);else if(Array.isArray(i))for(let o of i)t.append(s,o);else i!==void 0&&t.set(s,typeof i=="object"?JSON.stringify(i):i);}return t},b=class{constructor(){this._fns=[];}clear(){this._fns=[];}getInterceptorIndex(t){return typeof t=="number"?this._fns[t]?t:-1:this._fns.indexOf(t)}exists(t){let r=this.getInterceptorIndex(t);return !!this._fns[r]}eject(t){let r=this.getInterceptorIndex(t);this._fns[r]&&(this._fns[r]=null);}update(t,r){let a=this.getInterceptorIndex(t);return this._fns[a]?(this._fns[a]=r,t):false}use(t){return this._fns=[...this._fns,t],this._fns.length-1}},N=()=>({error:new b,request:new b,response:new b}),Q=U({allowReserved:false,array:{explode:true,style:"form"},object:{explode:true,style:"deepObject"}}),v={"Content-Type":"application/json"},w=(e={})=>({...k,headers:v,parseAs:"auto",querySerializer:Q,...e});var I=(e={})=>{let t=z(w(),e),r=()=>({...t}),a=o=>(t=z(t,o),r()),s=N(),i=async o=>{let n={...t,...o,fetch:o.fetch??t.fetch??globalThis.fetch,headers:x(t.headers,o.headers),serializedBody:void 0};n.security&&await $({...n,security:n.security}),n.requestValidator&&await n.requestValidator(n),n.body&&n.bodySerializer&&(n.serializedBody=n.bodySerializer(n.body)),(n.serializedBody===void 0||n.serializedBody==="")&&n.headers.delete("Content-Type");let p=A(n),u={redirect:"follow",...n,body:n.serializedBody},d=new Request(p,u);for(let f of s.request._fns)f&&(d=await f(d,n));let y=n.fetch,l=await y(d);for(let f of s.response._fns)f&&(l=await f(l,d,n));let C={request:d,response:l};if(l.ok){if(l.status===204||l.headers.get("Content-Length")==="0")return n.responseStyle==="data"?{}:{data:{},...C};let f=(n.parseAs==="auto"?L(l.headers.get("Content-Type")):n.parseAs)??"json",h;switch(f){case "arrayBuffer":case "blob":case "formData":case "json":case "text":h=await l[f]();break;case "stream":return n.responseStyle==="data"?l.body:{data:l.body,...C}}return f==="json"&&(n.responseValidator&&await n.responseValidator(h),n.responseTransformer&&(h=await n.responseTransformer(h))),n.responseStyle==="data"?h:{data:h,...C}}let D=await l.text(),j;try{j=JSON.parse(D);}catch{}let P=j??D,g=P;for(let f of s.error._fns)f&&(g=await f(P,l,d,n));if(g=g||{},n.throwOnError)throw g;return n.responseStyle==="data"?void 0:{error:g,...C}};return {buildUrl:A,connect:o=>i({...o,method:"CONNECT"}),delete:o=>i({...o,method:"DELETE"}),get:o=>i({...o,method:"GET"}),getConfig:r,head:o=>i({...o,method:"HEAD"}),interceptors:s,options:o=>i({...o,method:"OPTIONS"}),patch:o=>i({...o,method:"PATCH"}),post:o=>i({...o,method:"POST"}),put:o=>i({...o,method:"PUT"}),request:i,setConfig:a,trace:o=>i({...o,method:"TRACE"})}};var c=I(w({baseUrl:"https://www.zefix.admin.ch/ZefixPublicREST"}));var J=e=>(e.client??c).post({security:[{scheme:"basic",type:"http"}],url:"/api/v1/company/search",...e,headers:{"Content-Type":"application/json",...e.headers}}),X=e=>(e.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/sogc/{id}",...e}),K=e=>(e.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/sogc/bydate/{date}",...e}),Y=e=>(e?.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/registryOfCommerce",...e}),Re=e=>(e.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/registryOfCommerce/byBfsCommunityId/{id}",...e}),ee=e=>(e?.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/legalForm",...e}),te=e=>(e.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/company/uid/{id}",...e}),re=e=>(e.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/company/ehraid/{id}",...e}),ne=e=>(e.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/company/chid/{id}",...e}),Te=e=>(e?.client??c).get({security:[{scheme:"basic",type:"http"}],url:"/api/v1/community",...e});var q=e=>{if(typeof btoa<"u")return btoa(e);try{let{Buffer:t}=F("buffer");if(typeof t<"u")return t.from(e,"utf-8").toString("base64")}catch{}throw new Error("No base64 encoding available in this environment")};function oe(e){return typeof e=="object"&&e!==null&&"error"in e&&typeof e.error=="object"}function se(e){return typeof e=="object"&&e!==null&&"uid"in e&&"name"in e&&typeof e.uid=="string"&&typeof e.name=="string"}function Ie(e){return se(e)&&"address"in e&&"purpose"in e}function qe(e){return typeof e=="object"&&e!==null&&"id"in e&&"name"in e&&typeof e.id=="number"&&typeof e.name=="string"}function De(e){return typeof e=="object"&&e!==null&&"communityName"in e&&"bfsId"in e&&typeof e.communityName=="string"&&typeof e.bfsId=="number"}function je(e){return e instanceof Error?e.message:oe(e)?e.error?.message||"Unknown error":typeof e=="string"?e:typeof e=="object"&&e!==null&&"message"in e?String(e.message):"An unknown error occurred"}function Pe(e){return e.status==="ACTIVE"}function ke(e){let t=e.replace(/[^0-9]/g,"");return t.length===9?`CHE-${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6)}`:e}function Be(e){return /^CHE[-.]?\d{3}\.?\d{3}\.?\d{3}$/i.test(e)}var ie=["AG","AI","AR","BE","BL","BS","FR","GE","GL","GR","JU","LU","NE","NW","OW","SG","SH","SO","SZ","TG","TI","UR","VD","VS","ZG","ZH"];function Ue(e){return ie.includes(e.toUpperCase())}var ae=["de","fr","it","en"];function Le(e){return ae.includes(e.toLowerCase())}function $e(e){let t=["FR","GE","JU","NE","VD","VS"];return ["TI"].includes(e)?"it":t.includes(e)?"fr":"de"}var _=0,m,O,pe=(e={})=>{if(typeof window<"u"&&typeof document<"u")throw new Error("ZEFIX API Client Error: This client is for server-side use only (Node.js, Cloudflare Workers). It cannot be used in browsers due to CORS restrictions on the ZEFIX API. Please make API calls from your backend server.");let{baseUrl:t="https://www.zefix.admin.ch/ZefixPublicREST",auth:r,throttle:a,customFetch:s}=e;m=r,O=a;let i={baseUrl:t};s&&(i.fetch=s),c.setConfig(i),c.interceptors.request.use(async o=>{let n=new Headers(o.headers);if(m?.username&&m?.password){let p=q(`${m.username}:${m.password}`);n.set("Authorization",`Basic ${p}`);}if(O?.minIntervalMs&&O.minIntervalMs>0){let u=Date.now()-_,d=O.minIntervalMs;u<d&&await new Promise(y=>setTimeout(y,d-u)),_=Date.now();}return new Request(o,{headers:n})});},Ge=e=>{m=e,pe({auth:e});},E=class extends Error{constructor(r,a,s,i){super(s||`HTTP ${r}`);this.status=r;this.code=a;this.body=i;if(this.name="ZefixError",this.body&&typeof this.body=="object"&&"headers"in this.body){let o={...this.body};if("headers"in o&&typeof o.headers=="object"){let n={...o.headers};"Authorization"in n&&(n.Authorization="[REDACTED]"),"authorization"in n&&(n.authorization="[REDACTED]"),o.headers=n;}this.body=o;}}};async function He(e){if(!e.response.ok)throw new E(e.response.status,void 0,`Request failed with status ${e.response.status}`,e.data);if(!e.data)throw new E(e.response.status,"NO_DATA","Response contained no data",void 0);return e.data}
export{ie as SWISS_CANTONS,ae as ZEFIX_LANGUAGES,E as ZefixError,Re as byBfsCommunityId,K as byDate,c as client,pe as configureClient,He as ensureOk,je as extractErrorMessage,ke as formatUid,X as get,ee as getCantons,ne as getCompanyByChid,re as getCompanyByEhraid,te as getCompanyByUid,$e as getDefaultLanguageForCanton,Y as getLegalForms,K as getSogcByDate,X as getSogcPublications,Pe as isActiveCompany,De as isBfsCommunity,se as isCompany,Ie as isCompanyFull,qe as isLegalForm,Ue as isValidCanton,Le as isValidLanguage,Be as isValidUid,oe as isZefixError,Y as list,ee as list1,Te as list2,J as search,J as searchCompanies,Ge as setAuth,ne as showChid,re as showEhraid,te as showUid,q as toBase64};//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map